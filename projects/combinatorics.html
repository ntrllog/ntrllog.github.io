<!DOCTYPE html>
<html lang="en">
  <head>
    <!--
                                      _
        /\     _             _   _   | |             __    __
       /  \   | |      /\   | \ | |  | |       /\   |  \  /  |
      /    \  | |     /  \  |  \| |  | |      /  \  | |\\//| |
     / ____ \ | |__  / __ \ | |\  |  | |___  / __ \ | | \/ | |
    /_/    \_\|____|/_/  \_\|_| \_|  |_____|/_/  \_\|_|    |_|
                          _   _
     _  _    _     _  _  | | | |   __     ____
    | |/ \  | |_  | |/_| | | | |  /  \   /    \
    | |   | |  _| |  /   | | | | | || | |  ||  |
    | |   | | |_  | |    | | | | | || | |  ||  |
    |_|   | |___| |_|    |_| |_|  \__/   \____/|
                                               |
                                          ____/
    -->
    <title>Alan Lam | Combinatorics</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Ubuntu" rel="stylesheet">
    <link rel="shortcut icon" type="image/png" href="../pictures/favicon.ico"/>
    <link href="../css/styles.css" rel="stylesheet">
  </head>
  <body>
    <div class="dropdown">
      <button onclick="showMenu()" class="dropbtn">ToC</button>
      <div class="dropdown-content" id="dropDownMenu">
        <a class="dropdown-item" href="#formulas">Formulas</a>
        <a class="dropdown-item" href="#induction">Induction</a>
        <a class="dropdown-item" href="#permutations">Permutations</a>
        <a class="dropdown-item" href="#combinations">Combinations</a>
        <a class="dropdown-item" href="#words">Words</a>
        <a class="dropdown-item" href="#choiceproblems">Choice Problems</a>
        <a class="dropdown-item" href="#poker">Counting Poker Hands</a>
        <a class="dropdown-item" href="#multisets">Multisets</a>
        <a class="dropdown-item" href="#compositions">Compositions</a>
        <a class="dropdown-item" href="#setpartitions">Set Partitions</a>
        <a class="dropdown-item" href="#integerpartitions">Integer Partitions</a>
        <a class="dropdown-item" href="#twelvefoldway">Twelvefold Way</a>
        <a class="dropdown-item" href="#binomialtheorem">Binomial Theoerem</a>
        <a class="dropdown-item" href="#multinomialtheorem">Multinomial Theoerem</a>
        <a class="dropdown-item" href="#formalpowerseries">Formal Power Series</a>
        <a class="dropdown-item" href="#binomialtheoremgeneral">Binomial Theoerem (General)</a>
        <a class="dropdown-item" href="#ordinarygeneratingfunctions">Ordinary Generating Functions</a>
        <a class="dropdown-item" href="#catalannumbers">Catalan Numbers</a>
        <a class="dropdown-item" href="#exponentialgeneratingfunctions">Exponential Generating Functions</a>
        <a class="dropdown-item" href="#lagrangeinversion">Lagrange Inversion</a>
        <a class="dropdown-item" href="#inclusionexclusion">Inclusion-Exclusion</a>
        <a class="dropdown-item" href="#mobiusinversion">Möbius Inversion</a>
        <a class="dropdown-item" href="#practiceproblems">Practice Problems</a>
      </div>
    </div>
    <div class="container line-height">
      <a href="projects.html"><i class="fas fa-long-arrow-alt-left fa-2x"></i></a>
      <h1>Combinatorics</h1>
      <hr>
      <p>(or as I like to call it, combinatrix)</p>
      <p>Shortcut to this page: <a href="combinatorics.html">ntrllog.netlify.app/comb</a></p>
      <p>Notes provided by Professor Steven Sam</p>
      <h2 id="formulas">Formulas</h2>
      <div class="box">
        <p>Number of subsets: `sum_(k=0)^n ((n),(k)) = 2^n`</p>
        <p>Pascal's Identity: `((n),(k)) + ((n),(k-1)) = ((n+1),(k))`</p>
        <p>Number of `k`-element multisets: `((n+k-1),(k))`</p>
        <p>Number of weak compositions into `k` parts: `((n+k-1),(n))`</p>
        <p>Number of compositions into `k` parts: `((n-1),(n-k)) = ((n-1),(k-1))`</p>
        <p>Number of compositions into all possible parts: `2^(n-1)`</p>
        <p>Number of set partitions into `k` blocks: `S(n,k) = S(n-1,k-1) + k*S(n-1,k)`</p>
        <p>Bell numbers: `B(n+1) = sum_(i=0)^n ((n),(i))B(i)` and `B(0)=1`</p>
        <p>Binomial Theorem: `(x+y)^n = sum_(i=0)^n ((n),(i)) x^iy^(n-i)`</p>
        <p>Multinomial Theorem: `(x_1+x_2+...+x_k)^n = sum_(a_1+a_2+...+a_k=n) ((n),((a_1, a_2, ..., a_k))) x_1^(a_1)x_2^(a_2)...x_k^(a_k)`</p>
        <p>`sum_(n ge 0) x^n = 1/(1-x)`</p>
        <p>Binomial Theorem (General): `(1+x)^m = sum_(n ge 0)((m),(n))x^n`</p>
        <p>`((-d),(n)) = (-1)^n((d+n-1),(n)) = (-1)^n((d+n-1),(d-1))`</p>
        <p>`(1+x)^(-d) = sum_(n ge 0) (-1)^n((d+n-1),(n))x^n = sum_(n ge 0) (-1)^n((d+n-1),(d-1))x^n`</p>
        <p>Product of ogf: `A(x)B(x) = sum_(n ge 0)(sum_(i=0)^na_ib_(n-i))x^n`</p>
        <p>Composition of ogf: `B(A(x)) = sum_(n ge 0) b_nA(x)^n`</p>
        <p>Catalan numbers: `C_n = 1/(n+1) ((2n),(n))`</p>
        <p>Catalan numbers (recurrence): `C_n = sum_(i = 0)^(n-1)C_iC_(n-1-i)` and `C_0 = 1`</p>
        <p>`sum_(n ge 0) x^n/(n!) = e^x`</p>
        <p>Product of egf: `A(x)B(x) = sum_(n ge 0)(sum_(i=0)^n((n),(i))a_ib_(n-i))x^n/(n!)`</p>
        <p>Lagrange Inversion: If `A(x) = xG(A(x))`, then `[x^n]A(x) = 1/n[x^(n-1)](G(x)^n)`</p>
        <ul>
          <li>`G(x)` must have a nonzero constant term</li>
        </ul>
        <p>Inclusion-Exclusion: `|A_1 uu A_2 uu ... uu A_n| = sum_(j=1)^n(-1)^(j-1)sum_(1 le i_1 lt i_2 ... lt i_j le n)|A_(i_1) nn A_(i_2) ... nn A_(i_j)|`</p>
        <p>Number of derangements: `sum_(i=0)^n(-1)^i(n!)/(i!)`</p>
        <p>Number of necklaces: `sum_(d|n)(omega(d))/d`</p>
        <ul>
          <li>`omega(d)` is the number of words with period `d`</li>
        </ul>
        <p>`omega(d) = sum_(e|d)mu(d/e)k^e`</p>
      </div>
      <h2 id="induction">Induction</h2>
      <div class="box">
        <p>Theorem: There are `2^n` subsets of a set of size `n`</p>
        <div class="collapse" id="subsetinduction">
          <p>Let `P(n)` be the statement that there are `2^n` subsets of a set of size `n`</p>
          <p>For a set with `0` elements, the only subset is `O/`, which is consistent with `2^0 = 1` so `P(0)` is true</p>
          <p>Suppose `P(n)` is true. Want to show `P(n+1)` is true, i.e., there are `2^(n+1)` subsets of a set of size `n+1`</p>
          <p>Let `S` be a set of size `n+1`</p>
          <p>Fix any `x in S` and consider `S' = S\\{x}`</p>
          <p>Since `S'` has `n` elements, there are `2^n` subsets</p>
          <p>Every subset of `S` either contains `x` or it doesn't contain `x`</p>
          <p>The subsets that don't contain `x` are in `S'`, which has `2^n` subsets</p>
          <p>So there are `2^n` subsets that don't contain `x`</p>
          <p>The subsets that do contain `x` can be obtained by adding `x` to each of the `2^n` subsets that dont' contain `x`</p>
          <p>So there are `2^n` subsets that do contain `x`</p>
          <p>The total number of subsets of `S` is the number of subsets containing `x` plus the number of the subsets not containing `x`</p>
          <p>So the total number of subsets of `S` is `2^n + 2^n = 2*2^(n) = 2^(n+1)`</p>
          <p>So `P(n+1)` is true</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#subsetinduction">Proof</a>
      </div>
      <div class="box">
        <p>`sum_(i=0)^n i = (n*(n+1))/2`</p>
        <div class="collapse" id="sumnaturals">
          <p>Let `P(n)` be the statement `sum_(i=0)^n i = (n*(n+1))/2`</p>
          <p>For `n=0`, `sum_(i=0)^0 i = 0` and `(0*(0+1))/2 = 0` so `P(0)` is true</p>
          <p>Suppose `P(n)` is true. Want to show `P(n+1)` is true, i.e., `sum_(i=0)^(n+1) i = ((n+1)(n+2))/2`</p>
          <div class="math">
            <p>`sum_(i=0)^(n+1) i = sum_(i=0)^n i + (n+1)`</p>
            <p>`= (n*(n+1))/2 + (n+1)`</p>
            <p>`= (n^2 + n)/2 + (2(n+1))/2`</p>
            <p>`= (n^2 + n)/2 + (2n + 2)/2`</p>
            <p>`= (n^2 + 3n + 2)/2`</p>
            <p>`= ((n+1)(n+2))/2`</p>
          </div>
          <p>So `P(n+1)` is true</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#sumnaturals">Proof</a>
      </div>
      <div class="box">
        <p>`4n lt 2^n` for `n ge 5`</p>
        <div class="collapse" id="fourn">
          <p>Let `P(n)` be the statement `4n lt 2^n` for `n ge 5`</p>
          <p>For `n=0`, `4*0 = 0 lt 2^0 = 1` so `P(0)` is true</p>
          <p>Suppose `P(n)` is true. Want to show `P(n+1)` is true, i.e., `4n+4 lt 2^(n+1)`</p>
          <div class="math">
            <p>`2^(n+1) = 2*2^n`</p>
            <p>`= 2^n + 2^n`</p>
            <p>`gt 4n + 4n`</p>
            <p>`gt 4n + 4` (since `n ge 5`)</p>
          </div>
          <p>So `P(n+1)` is true</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#fourn">Proof</a>
      </div>
      <div class="box">
        <p>Every polynomial in `x` is a linear combination of `1, x-1, (x-1)^2, (x-1)^3, ...`</p>
        <div class="collapse" id="polynomialinduction">
          <p>Let `P(n)` be the statement that every polynomial of degree `n` in `x` is a linear combination of the powers of `x-1`</p>
          <p>For `n=0`, the polynomial of degree `0` is a constant `c`, which is a linear combination of `1` (`c = c*1`) so `P(0)` is true</p>
          <p>Suppose `P(0), P(1), P(2), ... P(n)` is true. Want to show `P(n+1)` is true, i.e., every polynomial of degree `n+1` in `x` is a linear combination of the powers of `x-1`</p>
          <p>Let `f(x)` be a polynomial of degree `n+1`</p>
          <p>Let `alpha` be the leading coefficient of `f`</p>
          <p>Consider `g(x) = f(x) - alpha*(x-1)^(n+1)`</p>
          <p>`g(x)` is a polynomial of degree `le n` so it is a linear combination of the powers of `x-1`</p>
          <p>`f(x) = g(x) + alpha*(x-1)^(n+1)`</p>
          <p>`alpha*(x-1)^(n+1)` is also a linear combination of the powers of `x-1`</p>
          <p>So `f(x)` is a linear combination of the powers of `x-1`</p>
          <p>So `P(n+1)` is true</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#polynomialinduction">Proof</a>
      </div>
      <div class="box">
        <p>Every positive integer can be written as `2^rm` where `r ge 0` and `m` is an odd integer</p>
        <div class="collapse" id="twonm"</p>
          <p>Let `P(n)` be the statement that `n` can be written as `2^rm` where `r ge 0` and `m` is odd</p>
          <p>For `n=1`, `1 = 2^0*1 = 1` so `P(1)` is true</p>
          <p>Suppose `P(1), ..., P(n)` is true. Want to show `P(n+1)` is true, i.e., `n+1` can be written as `2^rm` where `r ge 0` and `m` is odd</p>
          <p>Suppose `n+1` is odd. Then pick `r=0` and pick `m = n+1` so `P(n+1)` is true</p>
          <p>Suppose `n+1` is even</p>
          <p>Then it can be written as `n+1 = 2k` for some integer `1 le k le n`</p>
          <p>Since `k` is a positive integer, it can be written as `2^rm` where `r ge 0` and `m` is odd</p>
          <div class="math">
            <p>`n+1 = 2k`</p>
            <p>`= 2*2^rm`</p>
            <p>`= 2^(r+1)m`</p>
          </div>
          <p>`m` is odd and `r ge 0 implies r+1 ge 0` so `n+1` can be written as a power of `2` multiplied by an odd number</p>
          <p>So `P(n+1)` is true</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#twonm">Proof</a>
      </div>
      <div class="box">
        <p>Every integer `n ge 2` can be written as a product of prime numbers</p>
        <div class="collapse" id="productprime">
          <p>Let `P(n)` be the statement that `n` can be written as a product of prime numbers</p>
          <p>For `n=2`, `2` is a product of `2`, which is a prime number so `P(2)` is true</p>
          <p>Suppose `P(2), ..., P(n)` is true. Want to show `P(n+1)` is true, i.e., `n+1` can be written as a product of prime numbers</p>
          <p>Suppose `n+1` is prime. Then it is a product of itself so `P(n+1)` is true</p>
          <p>Suppose `n+1` is not prime</p>
          <p>Then `n+1` can be written as `n+1 = a*b` for integers `a,b` where `2 le a,b le n`</p>
          <p>Since `2 le a,b le n`, `a` and `b` can be written as products of prime numbers</p>
          <p>So `n+1` is a product of prime numbers</p>
          <p>So `P(n+1)` is true</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#productprime">Proof</a>
      </div>
      <div class="box">
        <p>Let `f` be a function so that `f(0)=1`, `f(1)=2`, and `f(n+1)=f(n-1)+2f(n)` for `n ge 1`. Show that `f(n) le 3^n` for `n ge 0`</p>
        <div class="collapse" id="functioninduction">
          <p>Let `P(n)` be the statement that `f(n) le 3^n` for `n ge 0`</p>
          <p>For `n=0`, `f(0) = 1 le 3^0 = 1`</p>
          <p>For `n=1`, `f(1) = 2 le 3^1 = 3`</p>
          <p>So `P(0)` and `P(1)` are true</p>
          <p>Suppose `P(n)` is true. Want to show that `P(n+1)` is true, i.e., `f(n+1) le 3^(n+1)`</p>
          <div class="math">
            <p>`f(n+1) = f(n-1)+2f(n)`</p>
            <p>`le 3^(n-1) + 2*3^n`</p>
            <p>`= 3^(n-1) + 3^n + 3^n`</p>
            <p>`le 3^n + 3^n + 3^n`</p>
            <p>`= 3*3^n`</p>
            <p>`= 3^(n+1)`</p>
          </div>
          <p>So `P(n+1)` is true</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#functioninduction">Proof</a>
      </div>
      <h2 id="permutations">Permutations</h2>
      <div class="box">
        <p>Given a set `S` of objects, a <b>permutation</b> of `S` is a way to put all elements of `S` in order</p>
      </div>
      <div class="box">
        <p>Example: For `S = {1,2,3}`, all the permutations are:</p>
        <div class="math">
          <p>`1,2,3`</p>
          <p>`1,3,2`</p>
          <p>`2,1,3`</p>
          <p>`2,3,1`</p>
          <p>`3,1,2`</p>
          <p>`3,2,1`</p>
        </div>
      </div>
      <div class="box">
        <p>Theorem: If `S` has `n gt 0` elements, then there are `n!` permutations of the elements in `S`</p>
        <div class="collapse" id="permutationproof">
          <p>Let `P(n)` be the statement that if `S` has `n gt 0` elements, then there are `n!` permutations of the elements of `S`</p>
          <p>For a set of size `1`, there's only `1` way to order all the elements. `1 = 1!` so `P(1)` is true</p>
          <p>Suppose `P(n)` is true. Want to show `P(n+1)` is true, i.e., if `S` has `n+1` elements, then there are `(n+1)!` permutations of the elements in `S`</p>
          <p>Let `S` be a set of size `n+1`</p>
          <p>We could pick any random element of `S` and put that in the first spot</p>
          <p>There are `n+1` choices for the random element in the first spot</p>
          <p>Now, `S` has `n` elements</p>
          <p>So there are `n!` ways to order the remaining elements in `S`</p>
          <p>So the total number of ways to order the elements is `(n+1)*n! = (n+1)!`</p>
          <p>So `P(n+1)` is true</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#permutationproof">Proof</a>
        <p>Intuitively, there are `n` choices for the first digit, `n-1` choices for the second digit, `n-2` choices for the third digit, ..., all the way down to `1` choice for the last digit</p>
        <p>So there are `n*(n-1)*(n-2)*...*1 = n!` ways to order the elements</p>
      </div>
      <h2 id="combinations">Combinations</h2>
      <p>Let's suppose we're arranging flowers. We have `2` red flowers and `1` yellow flower. How many ways can we arrange them? Previously, we saw that if we have `n` elements, there are `n!` ways to arrange them. Here, we have `3` elements, so there are `3! = 6` ways to arrange them. All the possible orderings are:</p>
      <div class="math">
        <p>`R RY`</p>
        <p>`R RY`</p>
        <p>`YR R`</p>
        <p>`YR R`</p>
        <p>`RYR`</p>
        <p>`RYR`</p>
      </div>
      <p>But some of the orderings are repeated. This is because the `2` red flowers are technically different flowers, but the order in which they appear doesn't matter; the result is the same. So we have to divide out the commonalities. In this case, since there are `2` red flowers and, therefore, `2!` ways to order them, we divide the total number of ways to arrange all the elements by `2!`.</p>
      <div class="math">
        <p>`(3!)/(2!) = 3`</p>
        <p>`R RY`</p>
        <p>`YR R`</p>
        <p>`RYR`</p>
      </div>
      <div class="box">
        <p>If we have `10` red flowers and `5` yellow flowers, then the total number of ways to arrange them is</p>
        <div class="math">
          <p>`(15!)/(10!5!)`</p>
        </div>
      </div>
      <div class="box">
        <p>If we have `r` red flowers, `y` yellow flowers, and `b` blue flowers, then the total number of ways to arrange them is</p>
        <div class="math">
          <p>`((r+y+b)!)/(r!y!b!)`</p>
        </div>
      </div>
      <div class="box">
        <p>Theorem: Say we have `n` objects which have one of `k` different types. Objects of the same type are considered identical. Label the types with numbers `1,2,...,k` and let `a_i` be the number of objects of type `i`. Then the number of ways to arrange the `n` objects is `(n!)/(a_1!a_2!...a_k!)`</p>
      </div>
      <div class="box">
        <p>The <b>multinomial coefficient</b> is</p>
        <div class="math">
          <p>`((n),((a_1,a_2,...,a_k))) = (n!)/(a_1!a_2!...a_k!)`</p>
        </div>
        <p>The <b>binomial coefficient</b> is the multinomial coefficient for `k=2`, which is</p>
        <div class="math">
          <p>`((n),((a_1,a_2)))`</p>
        </div>
        <p>It's often denoted by</p>
        <div class="math">
          <p>`((n),(a_1))`</p>
        </div>
        <p>instead because we know `a_2 = n - a_1`</p>
      </div>
      <h2 id="words">Words</h2>
      <p>Sometimes, it's easier to count things by using some sort of encoding.</p>
      <div class="box">
        <p>A <b>word</b> is a finite ordered sequence whose entries are drawn from some set `A`, called the alphabet</p>
        <p>The <b>length</b> of a word is the number of entries it has</p>
        <p>Entries may be repeated</p>
        <p>An empty sequence `O/` is a word of length `0`</p>
      </div>
      <div class="box">
        <p>Example: Consider the alphabet `A = {a,b}`</p>
        <p>The words of length `le 2` are:</p>
        <div class="math">
          <p>`O/`</p>
          <p>`a`</p>
          <p>`b`</p>
          <p>`aa`</p>
          <p>`ab`</p>
          <p>`ba`</p>
          <p>`bb`</p>
        </div>
      </div>
      <div class="box">
        <p>Theorem: If `|A| = n`, then the number of words of length `k` is `n^k`</p>
        <div class="collapse" id="numwords">
          <p>There are `k` spots, and each spot has `n` choices of entries</p>
          <p>So there are `ubrace(n*n*...*n)_k = n^k` words of length `k`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#numwords">Proof</a>
      </div>
      <div class="box">
        <p>`[n] = {1,2,...,n}`</p>
      </div>
      <div class="box">
        <p>The number of subsets of `[n]` is `2^n`</p>
        <div class="collapse" id="subsetwordproof">
          <p>Let `S sube [n]`</p>
          <p>Define a word `w_s` of length `n` in the alphabet `{0,1}` as follows:</p>
          <p>Let `i in [n]`</p>
          <p>If `i in S`, then the `i^(th)` entry of `w_s = 1`</p>
          <p>If `i notin S`, then the `i^(th)` entry of `w_s = 0`</p>
          <div class="box">
            <p>If `n = 5` and `S = {1,3,4}`, then the word associated with `S` is `10110`</p>
          </div>
          <p>Define a function `f:{`subset `S` of `[n]} rarr {`word of length `n` in alphabet `{0,1}}`</p>
          <p>We can define another function `g:{`words of length `n` in `{0,1}} rarr {`subset of `[n]}`</p>
          <p>The process for converting a subset to a word is reversible, gives a unique result, and always gives a result with valid input</p>
          <p>So `g` is the inverse of `f`, which means `f` is bijective</p>
          <p>So `|{`subsets of `[n]}| = |{`words of length `n` in `{0,1}}| = 2^n`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#subsetwordproof">Proof</a>
        <p>The general idea is that any element is either in `S` or not in `S`</p>
      </div>
      <div class="box">
        <p>How many pairs of subsets `S,T sube [n]` satisfy `S sube T`?</p>
        <p>Any element in `[n]` is</p>
        <ul>
          <li>in `S` and in `T`</li>
          <li>not in `S` but in `T`</li>
          <li>not in `S` and not in `T`</li>
        </ul>
        <p>There are `3` choices for each of the `n` elements, so there are `3^n` total possibilities</p>
        <p>In the context of words, the function would be</p>
        <p>`f:{`pairs of subsets `S,T sube [n]` s.t. `S sube T} rarr {`words of length `n` in `{`in `S`, not in `S` but in `T`, not in `S` and not in `T}}`</p>
      </div>
      <div class="box">
        <p>For `n ge k` where `n` is a nonnegative integer, the <b>falling factorial</b> is</p>
        <div class="math">
          <p>`(n)_k = n*(n-1)*(n-2)*...*(n-k+1)`</p>
        </div>
        <div class="box">
          <p>`(6)_3 = 6*5*4`</p>
          <p>`(6)_6 = 6*5*4*3*2*1`</p>
        </div>
        <div class="box">
          <p>There are `k` numbers being multiplied</p>
          <p>This can be seen by:</p>
          <div class="math">
            <p>`(n)_k = n*(n-1)*(n-2)*...*(n-k+1)`</p>
            <p>`= (n-0)*(n-1)*(n-2)*...*(n-(k-1))`</p>
          </div>
          <p>There are `k` numbers from `0` to `k-1`</p>
        </div>
      </div>
      <div class="box">
        <p>Theorem: If `|A| = n ge k`, then there are `(n)_k` words of length `k` in `A` that do not have repeating entries</p>
        <div class="collapse" id="repeatingentriesproof">
          <p>Let `sigma = a_1a_2...a_ka_(k+1)...a_n` be a permutation of `A`</p>
          <p>The first `k` entries make up a word with no repeating entries</p>
          <p>Since there are `n!` permutations, we have `n!` words with no repeating entries</p>
          <p>But there are repeated words since the last `(n-k)` entries can be ordered in any way</p>
          <p>So there are</p>
          <div class="math">
            <p>`(n!)/((n-k)!) = (n*(n-1)*...*(n-k+1)*(n-k)!)/((n-k)!)`</p>
            <p>`= n*(n-1)*...*(n-k+1)`</p>
            <p>`= (n)_k`</p>
          </div>
          <p>words with no repeating entries</p>
          <div class="box">
            <p>Let `A = {1,2,3,4,5}` and `k=3`</p>
            <p>Let `sigma = 31254`</p>
            <p>The first `k` entries are `312`, which is a word of length `k` with no repeating entries</p>
            <p>So that is contained in `31254`</p>
            <p>But that same word is also contained in `31245`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#repeatingentriesproof">Proof</a>
        <p>Intuitively, there are `n` choices for the first digit, `n-1` choices for the second digit, ..., `n-k+1` choices for the `k^(th)` digit</p>
      </div>
      <h2 id="choiceproblems">Choice Problems</h2>
      <p>We saw earlier that the number of subsets of a set of size `n` is `2^n`. We could look at how many of those subsets are of size `k`.</p>
      <div class="box">
        <p>Theorem: The number of `k`-element subsets of `[n]` is `((n),(k)) = (n!)/(k!(n-k)!)`</p>
        <div class="collapse" id="kelementsubsets">
          <p>We can associate subsets of `[n]` with words of length `n` in `{0,1}`</p>
          <p>The number of `k`-element subsets of `[n]` is the number of words of length `n` in `{0,1}` that have exactly `k` `1`'s</p>
          <p>For such words, there are `k` ways to arrange the `1`'s and `n-k` ways to arrange the `0`'s</p>
          <p>Which gives us `(n!)/(k!(n-k)!) = ((n),(k))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#kelementsubsets">Proof</a>
      </div>
      <div class="box">
        <p>Corollary: `sum_(k=0)^n ((n),(k)) = 2^n`</p>
        <div class="collapse" id="sumofsubsets">
          <p>`sum_(k=0)^n ((n),(k))` is the number of ways to choose subsets of size `0`, `1`, `2`, ..., `n`</p>
          <p>Well, that should make up all the possible subsets</p>
          <p>Before, we showed that the total number of subsets is `2^n`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#sumofsubsets">Proof</a>
      </div>
      <div class="box">
        <p>Pascal's Identity: `((n),(k-1)) + ((n),(k)) = ((n+1),(k))` for any `k ge 0`</p>
        <div class="collapse" id="pascalsidentity">
          <p>`((n+1),(k))` is the number of `k`-element subsets of `[n+1]`</p>
          <p>We could split those subsets up into two categories: subsets of size `k` that contain `n+1` and subsets of size `k` that don't contain `n+1`</p>
          <div class="math">
            <img class="img-fluid" src="../pictures/combinatorics/pascal_1.jpg">
          </div>
          <p>The subsets of size `k` that don't contain `n+1` are actually the subsets of size `k` of `[n]`, so that gives us `((n),(k))`</p>
          <div class="math">
            <img class="img-fluid" src="../pictures/combinatorics/pascal_2.jpg">
          </div>
          <p>If we look at the subsets of size `k` that do contain `n+1` and remove `n+1` from each subset, we end up with the number of subsets of size `k-1` of `[n]`, which gives us `((n),(k-1))`</p>
          <div class="math">
            <img class="img-fluid" src="../pictures/combinatorics/pascal_3.jpg">
          </div>
          <p>These two sets don't overlap so there are `((n),(k))+((n),(k-1))` subsets of size `k` of `[n+1]`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#pascalsidentity">Proof</a>
      </div>
      <h2 id="poker">Counting Poker Hands</h2>
      <div class="box">
        <p>Four of a Kind: `4` of the `5` cards have the same value</p>
        <p>How many four of a kinds are there?</p>
        <div class="collapse" id="fourofakind">
          <p>There are `13` choices for the value that is the same</p>
          <p>There are `48` choices for the fifth card</p>
          <p>Total number of ways to get a four of a kind: `13*48`</p>
          <p>Alternatively,</p>
          <p>There are `13` choices for the value that is the same</p>
          <p>There are `12` choices for the value that is different</p>
          <p>There are `4` choices for the suit of the different value</p>
          <p>Total number of ways to get a four of a kind: `13*12*4`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#fourofakind">Answer</a>
      </div>
      <div class="box">
        <p>Full House: `3` cards have the same value and `2` cards have the same value</p>
        <p>How many full houses are there?</p>
        <div class="collapse" id="fullhouse">
          <p>There are `13` choices for the value of the triple</p>
          <p>There are `12` choices for the value of the pair</p>
          <p>There are `((4),(3))` choices for the suits of the triple</p>
          <p>There are `((4),(2))` choices for the suits of the pair</p>
          <p>Total number of ways to get a full house: `13*12*((4),(3))*((4),(2))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#fullhouse">Answer</a>
      </div>
      <div class="box">
        <p>Two Pair: `2` cards have the same value, `2` cards have the same value, `1` card has a different value</p>
        <p>How many two pairs are there?</p>
        <div class="collapse" id="twopair">
          <p>There are `((13),(2))` choices for the value of each pair</p>
          <p>There are `((4),(2))` choices for suits of one pair</p>
          <p>There are `((4),(2))` choices for suits of other pair</p>
          <p>There are `44` choices for the leftover card</p>
          <p>Total number of ways to get a two pair: `((13),(2))*((4),(2))*((4),(2))*44`</p>
          <p>Alternatively,</p>
          <p>There are `((13),(2))` choices for the value of each pair</p>
          <p>There are `11` choices for the value of the different card</p>
          <p>There are `((4),(2))` choices for suits of one pair</p>
          <p>There are `((4),(2))` choices for suits of other pair</p>
          <p>There are `4` choices for the suit of the different card</p>
          <p>Total number of ways to get a two pair: `((13),(2))*11*((4),(2))*((4),(2))*4`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#twopair">Answer</a>
      </div>
      <div class="box">
        <p>Straight: `5` cards can be put in consecutive order by values</p>
        <p>How many straights are there?</p>
        <div class="collapse" id="straight">
          <p>To pick values, we only need to know what the largest possible values are</p>
          <p>The fifth card can be `5`, `6`, `7`, `8`, `9`, `10`, `J`, `Q`, `K`, or `A`</p>
          <p>There are `10` choices for the fifth card</p>
          <p>There are `4^5` choices for the suits of each card</p>
          <p>Total number of ways to get a straight: `10*4^5`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#straight">Answer</a>
      </div>
      <h2 id="multisets">Multisets</h2>
      <p>Multisets are like subsets except the elements can be repeated.</p>
      <div class="box">
        <p>Multisets of `{1,2,3}` of size `3` are:</p>
        <div class="math">
          <p>`{1,1,1}`</p>
          <p>`{1,1,2}`</p>
          <p>`{1,1,3}`</p>
          <p>`{1,2,2}`</p>
          <p>`{1,2,3}`</p>
          <p>`{1,3,3}`</p>
          <p>`{2,2,2}`</p>
          <p>`{2,2,3}`</p>
          <p>`{2,3,3}`</p>
          <p>`{3,3,3}`</p>
        </div>
        <p>Are these all the possible multisets? How can we be sure?</p>
        <p>Let's add `1` to the second element and add `2` to the third element</p>
        <div class="math">
          <p>`{1,1,1} rarr {1,2,3}`</p>
          <p>`{1,1,2} rarr {1,2,4}`</p>
          <p>`{1,1,3} rarr {1,2,5}`</p>
          <p>`{1,2,2} rarr {1,3,4}`</p>
          <p>`{1,2,3} rarr {1,3,5}`</p>
          <p>`{1,3,3} rarr {1,4,5}`</p>
          <p>`{2,2,2} rarr {2,3,4}`</p>
          <p>`{2,2,3} rarr {2,3,5}`</p>
          <p>`{2,3,3} rarr {2,4,5}`</p>
          <p>`{3,3,3} rarr {3,4,5}`</p>
        </div>
        <p>Notice that we end up with all the subsets of size `3` of `[5]`. This leads to a more general result</p>
      </div>
      <div class="box">
        <p>Theorem: The number of `k`-element multisets of a set of size `n` is `((n+k-1),(k))`</p>
        <div class="collapse" id="multisets">
          <p>Note: it doesn't matter what the set is, since we can form a bijection between the set and `[n]`</p>
          <p>Let `S` be a multiset of size `k` of `[n]`</p>
          <p>Sort the elements of `S` so that `s_1 le s_2 le s_3 le ... le s_k`</p>
          <p>Add `i-1` to each `s_i`</p>
          <p>Then we get `s_1 lt s_2 + 1 lt s_3 + 2 lt ... lt s_k + (k-1)`</p>
          <p>Well, `{s_1, s_2+1, s_3+2, ..., s_k+(k-1)}` is a subset of size `k` of `[n+k-1]color(red)(text(*))`</p>
          <p>The number of ways to make `k`-element subsets from a set of size `[n+k-1]` is `((n+k-1),(k))`</p>
          <p>(Reversing the process -- subtracting `i-1` from each `s_i` -- shows that there is a bijection between `{s_1, s_2, ..., s_k}` and `{s_1, s_2+1, ..., s_k+(k-1)}`)</p>
          <p>`color(red)(text(*))` happens when `s_k = n`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#multisets">Proof</a>
      </div>
      <div class="box">
        <p>Let `x`,`y`,`z` be variables. The degree of the monomial `x^ay^bz^c` is `a+b+c` where `a,b,c ge 0`</p>
        <p>How many monomials have degree `d`?</p>
        <div class="box">
          <p>There are `3` with degree `1`:</p>
          <div class="math">
            <p>`x,y,z`</p>
          </div>
          <p>There are `6` with degree `2`:</p>
          <div class="math">
            <p>`x^2,y^2,z^2,xy,xz,yz`</p>
          </div>
          <p>There are `10` with degree `3`:</p>
          <div class="math">
            <p>`x^3,y^3,z^3,x^2y,x^2z,y^2x,y^2z,z^2x,z^2y,xyz`</p>
          </div>
        </div>
        <p>`x^ay^bz^c` is like a multiset of `{x,y,z}` where `x` appears `a` times, `y` appears `b` times, and `z` appears `c` times</p>
        <p>Since they add up to `d`, there should be `d` total elements</p>
        <p>So the total number of monomials is the number of multisets of size `d` of `{x,y,z}`, which is</p>
        <div class="math">
          <p>`((d+3-1),(d)) = ((d+2),(d))`</p>
        </div>
        <p>Let `x_1,x_2,...,x_n` be variables. How many monomials `x_1^(a_1)*x_2^(a_2)*...*x_n^(a_n)` are there with degree `d`?</p>
        <div class="collapse" id="multisetdegreegeneral">
          <p>`x_1^(a_1)*x_2^(a_2)*...*x_n^(a_n)` is like a multiset of `{x_1,x_2,...,x_n}` where each `x_i` is chosen `a_i` times</p>
          <p>Since they add up to `d`, there should be `d` total elements</p>
          <p>So the total number of monomials is the number of multisets of size `d` of `{x_1,x_2,...,x_n}`, which is</p>
          <div class="math">
            <p>`((n+d-1),(d))`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#multisetdegreegeneral">Answer</a>
      </div>
      <h2 id="compositions">Compositions</h2>
      <div class="box">
        <p>A <b>weak composition</b> of `n` into `k` parts is a `k`-tuple `(a_1,a_2,...,a_k)` such that each `a_i ge 0` and `a_1 + a_2 + ... + a_k = n`</p>
        <p>A <b>composition</b> is the same except each `a_i gt 0`</p>
        <p>`k` is the number of parts</p>
      </div>
      <div class="box">
        <p>Theorem: The number of weak compositions of `n` into `k` parts is `((n+k-1),(n))`</p>
        <div class="collapse" id="weakcomposition">
          <p>Claim: There is a bijection between weak compositions of `n` into `k` parts and `n`-element multisets of `[k]`</p>
          <p>Given a weak composition `(a_1,...,a_k)`, we get a multiset that has the `i^(th)` element `a_i` times</p>
          <p>Since `a_1 + ... + a_k = n`, this is an `n`-element multiset of `[k]`</p>
          <p>Given an `n`-element multiset of `[k]`, let `a_i` be the number of times that `i` appears in the multiset</p>
          <p>Then we end up with a weak composition `(a_1,...,a_k)` of `n`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#weakcomposition">Proof</a>
        <p>Intuitively, a multiset is a weak composition that is written out. Since the parts of the weak composition have to add up to `n`, there are `n` elements in the multiset. So the formula for an `n`-element multiset applies here.</p>
        <div class="box">
          <p>`((n+k-1),(n)) = ((n+k-1),(n+k-1-n)) = ((n+k-1),(k-1))`</p>
        </div>
      </div>
      <div class="box">
        <p>How many ways are there to distribute `20` identical pieces of candy to `4` different children?</p>
        <p>This can be seen as a weak composition of `20` into `4` parts</p>
        <div class="math">
          <p>`((23),(20))`</p>
        </div>
      </div>
      <div class="box">
        <p>How many ways can we distribute all the candy so that no child is candyless?</p>
        <p>First, we can give each child `1` piece of candy</p>
        <p>Now, we have `16` pieces of candy leftover which can be distributed in any way</p>
        <p>So this can be seen as a weak composition of `16` into `4` parts</p>
        <div class="math">
          <p>`((19),(16))`</p>
        </div>
        <p>Since each child has at least `1` candy, this is also a composition of `20` into `4` parts</p>
      </div>
      <div class="box">
        <p>Corollary: The number of compositions of `n` into `k` parts is `((n-1),(n-k))`</p>
        <p>Generalizing the previous example, there is a bijection between compositions of `n` into `k` parts and weak compositions of `n-k` into `k` parts</p>
        <div class="box">
          <p>`(((n-k)+k-1),(n-k)) = ((n-1),(n-k)) = ((n-1),(n-1-(n-k))) = ((n-1),(k-1))`</p>
        </div>
      </div>
      <div class="box">
        <p>Corollary: The number of compositions of `n` into any number of parts is `2^(n-1)`</p>
        <div class="collapse" id="varyingcompositions">
          <p>The possible number of parts for a composition of `n` ranges from `k = 1` to `k = n`</p>
          <p>So the total number of compositions possible is</p>
          <div class="math">
            <p>`sum_(k=1)^n((n-1),(k-1))`</p>
            <p>`= sum_(k=0)^(n-1)((n-1),(k))`</p>
          </div>
          <p>Well, that is the formula for the number of subsets of `[n-1]`, which is `2^(n-1)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#varyingcompositions">Proof</a>
        <p>A composition can be represented as `(1square1square...square1square1)` where we either put a `+` (plus sign) or a `,` (comma) in the boxes.</p>
        <p>There are `n` `1's`, so there are `n-1` boxes</p>
        <p>There are `2` choices for each box</p>
        <p>So there are `2^(n-1)` total compositions</p>
      </div>
      <h2 id="setpartitions">Set Partitions</h2>
      <div class="box">
        <p>Let `X` be a set. A <b>partition</b> of `X` is an unordered collection of nonempty subsets `X_1,...,X_k` such that every element of `X` belongs to exactly one subset</p>
        <p>An <b>ordered partition</b> of `X` is the same except each subset has an order</p>
        <p>Each subset is a <b>block</b> of the partition</p>
      </div>
      <div class="box">
        <p>There are `5` partitions of `X = {1,2,3}`:</p>
        <div class="math">
          <p>`k = 1:`</p>
          <p>`{{1,2,3}}`</p>
          <p>`k = 2:`</p>
          <p>`{{1},{2,3}}`</p>
          <p>`{{2},{1,3}}`</p>
          <p>`{{3},{1,2}}`</p>
          <p>`k = 3:`</p>
          <p>`{{1},{2},{3}}`</p>
        </div>
        <p>For an unordered collection of subsets, `{{3},{1,2}}` and `{{1,2},{3}}` are the same (the order of the blocks doesn't matter)</p>
      </div>
      <div class="box">
        <p>How many ways are there to distribute `20` different pieces of candy to `4` identical children so that no child is candyless?</p>
        <p>This can be seen as a partition of `[20]` into `4` blocks</p>
      </div>
      <p>Unfortunately, there's not really a nice formula for the number of set partitions of `[n]`. But we can still count them though.</p>
      <div class="box">
        <p>Let `S(n,k)` be the number of partitions of a set of size `n` into `k` blocks</p>
        <p>These are called <b>Stirling numbers of the second kind</b></p>
        <p>`S(0,0) = 1` and `S(n,k) = 0` if `k gt n`</p>
      </div>
      <p>For some values of `k`, there actually are nice formulas.</p>
      <div class="box">
        <p>`S(n,1)`</p>
        <div class="collapse" id="sn1">
          <p>This is `n` pieces into `1` block. The only way to do this is to put all the pieces into the block</p>
          <p>`S(n,1) = 1`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#sn1">Formula</a>
      </div>
      <div class="box">
        <p>`S(n,n)`</p>
        <div class="collapse" id="snn">
          <p>This is `n` pieces into `n` blocks. The only way to do this is to put each piece in each block</p>
          <p>`S(n,n)=1`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#snn">Formula</a>
      </div>
      <div class="box">
        <p>`S(n,2)`</p>
        <div class="collapse" id="sn2">
          <p>This is `n` pieces into `2` blocks</p>
          <p>We can't put `O/` or the whole set in the blocks, so there are `2^n-2` complementary subsets</p>
          <p>The order of the blocks don't matter, so there are `(2^n-2)/(2!) = 2^(n-1)-1` ways to do this</p>
          <p>`S(n,2) = 2^(n-1)-1`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#sn2">Formula</a>
      </div>
      <div class="box">
        <p>`S(n,n-1)`</p>
        <div class="collapse" id="snn-1">
          <p>This is `n` pieces into `n-1` blocks</p>
          <p>One block must have `2` pieces, so we choose `2` elements to be in the same block</p>
          <p>`S(n,n-1) = ((n),(2))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#snn-1">Formula</a>
      </div>
      <p>For other values of `k`, there is a recurrence relation that allows us to calculate `S(n,k)`.</p>
      <div class="box">
        <p>Theorem: If `k le n`, then `S(n,k) = S(n-1,k-1) + k*S(n-1,k)`</p>
        <div class="collapse" id="stirlingrecursive">
          <p>Consider two kinds of partitions of `[n]`</p>
          <p>The first kind is partitions where `n` is in its own block</p>
          <div class="math">
            <img class="img-fluid" src="../pictures/combinatorics/stirling_1.jpg">
          </div>
          <p>Removing that block, we end up with a partition of `n-1` into `k-1` blocks, which is `S(n-1,k-1)`</p>
          <p>The second kind of partition is the partitions where `n` is not in its own block</p>
          <div class="math">
            <img class="img-fluid" src="../pictures/combinatorics/stirling_2.jpg">
          </div>
          <p>Removing `n` from each partition, we end up with a partition of `n-1` into `k` blocks</p>
          <p>But by doing so, we can't reconstruct the original situation because we don't know which block it came from</p>
          <p>There are `k` blocks we could put `n` in `implies k` different ways to reconstruct the original situation</p>
          <p>So the number of partitions is `k*S(n-1,k)`</p>
          <p>Adding up both types of partitions gives us all the partitions of `[n]`</p>
          <div class="math">
            <img class="img-fluid" src="../pictures/combinatorics/stirling_3.jpg">
          </div>
          <p></p>
        </div>
        <a class="btn" data-toggle="collapse" href="#stirlingrecursive">Proof</a>
      </div>
      <div class="box">
        <p>We can use this recurrence to verify that `S(n,2) = 2^(n-1)-1`</p>
        <div class="math">
          <p>`S(n,2) = S(n-1,1) + 2*S(n-1,2)`</p>
          <p>`= 1 + 2*S(n-1,2)`</p>
          <p>`= 1 + 2*(2^(n-2)-1)`</p>
          <p>`= 1 + 2^(n-1)-2`</p>
          <p>`= 2^(n-1)-1`</p>
        </div>
      </div>
      <p>The Stirling numbers counted the number of set partitions into blocks of specific sizes. To get the total number of set partitions of all sizes, we add them all up.</p>
      <div class="box">
        <p>The <b>Bell numbers</b> are the number of partitions of `[n]` into any number of blocks</p>
        <p>`B(n) = sum_(k=0)^nS(n,k)`</p>
        <p>`B(0) = 1`</p>
      </div>
      <div class="box">
        <p>Theorem: `B(n+1) = sum_(i=0)^n ((n),(i)) B(i)`</p>
        <div class="collapse" id="bellnumbers">
          <p>Separate all the partitions of `[n+1]` based on the number of elements in the block that contains `n+1`</p>
          <p>Consider those partitions where the block containing `n+1` is of size `j`</p>
          <p>For the block containing `n+1`, there are `n` numbers to choose from and `j-1` spots, so there are `((n),(j-1))` ways to generate such a block</p>
          <p>Now, there are `n+1-j` elements remaining</p>
          <p>For the other blocks not containing `n+1`, they can be generated by looking at the number of partitions of `[n+j-1]`, i.e., `B(n+j-1)`</p>
          <p>So the number of partitions where the block containing `n+1` is of size `j` is `((n),(j-1)) B(n+1-j)`</p>
          <p>The possible sizes of blocks containing `n+1` range from `1` to `n+1`</p>
          <div class="math">
            <p>`sum_(j=1)^(n+1) ((n),(j-1)) B(n+1-j)`</p>
            <p>set `i = j-1`</p>
            <p>`sum_(i=0)^n ((n),(i)) B(n-i)`</p>
            <p>set `k = n-i`</p>
            <p>`sum_(k=0)^n ((n),(n-k)) B(k)`</p>
            <p>`sum_(k=0)^n ((n),(k)) B(k)`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#bellnumbers">Proof</a>
      </div>
      <h2 id="integerpartitions">Integer Partitions</h2>
      <div class="box">
        <p>A <b>partition</b> of `n` is a sequence of nonnegative integers `lambda_1 ge lambda_2 ge ... ge lambda_k ge 0` such that `lambda_1 + lambda_2 + ... + lambda_k = n`</p>
        <p>`lambda = (lambda_1, lambda_2, ..., lambda_k)` is a partition</p>
        <p>`|lambda| = lambda_1 + lambda_2 + ... + lambda_k`</p>
        <p>`l(lambda)` is the length of the partition</p>
      </div>
      <p>There are no nice formulas for the number of partitions, but we have a notation for it.</p>
      <div class="box">
        <p>`p(n) = ` number of partitions of `n`</p>
        <p>`p_k(n) = ` number of partitions of `n` such that `l(lambda) = k` (has `k` parts)</p>
      </div>
      <div class="box">
        <p>`p(5) = 7`</p>
        <div class="math">
          <p>`(5)`</p>
          <p>`(4,1)`</p>
          <p>`(3,2)`</p>
          <p>`(3,1,1)`</p>
          <p>`(2,2,1)`</p>
          <p>`(2,1,1,1)`</p>
          <p>`(1,1,1,1,1)`</p>
        </div>
      </div>
      <p>Partitions can be represented using <b>Young diagrams</b>. The `i^(th)` row has `lambda_i` boxes.</p>
      <div class="box">
        <p>`lambda = (4,2,1)`</p>
        <div class="math">
          <img class="img-fluid" src="../pictures/combinatorics/young_421.png">
        </div>
      </div>
      <div class="box">
        <p>The <b>transpose</b> (or <b>conjugate</b>) of a partition `lambda` is the partition `lambda^T` whose Young diagram is `Y(lambda)` flipped across the main diagonal</p>
        <p>`(lambda^T)^T = lambda`</p>
        <p>`lambda_i^T = {j|lambda_j ge i}`</p>
        <div class="box">
          <p>`lambda^T = (3,2,1,1)`</p>
          <div class="math">
            <img class="img-fluid" src="../pictures/combinatorics/young_3211.png">
          </div>
        </div>
      </div>
      <div class="box">
        <p>`lambda` is <b>self-conjugate</b> if `lambda = lambda^T`</p>
        <p>Some self-conjugate partitions are `(4,3,2,1)`, `(5,1,1,1,1)`, `(4,2,1,1)`</p>
        <div class="math">
          <img class="img-fluid" src="../pictures/combinatorics/young_4321.png">
          <img class="img-fluid" src="../pictures/combinatorics/young_51111.png">
          <img class="img-fluid" src="../pictures/combinatorics/young_4211.png">
        </div>
      </div>
      <div class="box">
        <p>Theorem: The number of partitions `lambda` of `n` with `l(lambda) le k` equals the number of partitions `mu` of `n` with `mu_i le k`</p>
        <div class="box">
          <p>Example: `n=5, k=2`</p>
          <div class="math">
            <div class="row">
              <div class="col-sm">
                <p>`(5)`</p>
                <p>`(4,1)`</p>
                <p>`(3,2)`</p>
              </div>
              <div class="col-sm">
                <p>`(1,1,1,1,1)`</p>
                <p>`(2,1,1,1)`</p>
                <p>`(2,2,1)`</p>
              </div>
            </div>
          </div>
        </div>
        <div class="collapse" id="partitionslek">
          <p>Notice that taking the transpose of `lambda` gives us `mu`</p>
          <p>Claim: There is a bijection between `A = {`partitions `lambda` of `n` with `l(lambda) le k}` and `B = {`partitions `mu` of `n` such that `mu_i le k}`</p>
          <p>Let `f:A rarr B` be a function defined to be `f(lambda) = lambda^T`</p>
          <p>Since `(lambda^T)^T = lambda`, `f circ f` is the identity function, which means it is its own inverse</p>
          <p>So `f` is bijective `implies |A| = |B|`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#partitionslek">Proof</a>
      </div>
      <div class="box">
        <p>Theorem: The number of self-conjugate partitions `lambda` of `n` equals the number of partitions `mu` of `n` with only odd and distinct parts</p>
        <div class="collapse" id="odddistinct">
          <p>Start with a Young diagram of `lambda`</p>
          <p>Take the boxes of the first row and column and put them all in a row</p>
          <p>Make that row the first row of `mu`</p>
          <p>Repeat this for all the rows/columns of the `lambda`</p>
          <p>(Informally, peel off the outer layer of `lambda` and straighten it out to become a row in `mu`)</p>
          <p>This process is reversible, so there is a bijection</p>
          <p>(Informally, fold the row of `mu` in half and make it the outer layer of `lambda`)</p>
          <p>Since `lambda` is self-conjugate, there are an odd number of parts in the `i^(th)` row and column</p>
          <p>Now we show why they are distinct</p>
          <p>We can come up with a formula for the length of the `i^(th)` row</p>
          <p>The `i^(th)` row of `mu` is the `i^(th)` row of `lambda` minus the boxes to the left plus the `i^(th)` row of `lambda^T` minus the boxes from the top minus `1` for the box in the top-left corner</p>
          <div class="math">
            <p>`mu_i = lambda_i-(i-1) + lambda_i^T - (i-1) - 1`</p>
            <p>`= 2lambda_i - 2i + 1`</p>
          </div>
          <p>Claim: `mu_1 gt mu_2 gt ...`</p>
          <div class="math">
            <p>`mu_i = 2lambda_i - 2i + 1`</p>
            <p>`mu_(i+1) = 2lambda_(i+1) - 2(i+1) + 1`</p>
          </div>
          <p>Since `lambda` is a partition, `lambda_i ge lambda_(i+1)`</p>
          <p>So</p>
          <div class="math">
            <p>`mu_i = 2lambda_i - 2i + 1`</p>
            <p>`ge 2lambda_(i+1)-2i-1 = mu_(i+1)`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#odddistinct">Proof</a>
      </div>
      <h2 id="twelvefoldway">Twelvefold Way</h2>
      <p>The twelvefold way considers all the ways to put `k` balls into `n` boxes. Putting balls into boxes can be thought of as a function `f:[k] rarr [n]`.</p>
      <p>The balls and boxes can be distinguishable or indistinguishable. If the balls are distinguishable, each of them has a different color. If the balls are indistinguishable, they all have the same color. If the boxes are distinguishable, each box is labeled with a different number.</p>
      <p>The function can be arbitrary, injective, or surjective. If the function is arbitrary, then there are no restrictions on which balls can go in which box. If the function is injective, then each box can have at most one ball (no box can have two or more balls). If the function is surjective, then each box has to have at least one ball.</p>
      <p>Considering all the possible combinations, we get the following table:</p>
      <div style="display: flex; justify-content: center;">
        <table>
          <tr>
            <td>balls/boxes</td>
            <td>`f` arbitrary</td>
            <td>`f` injective</td>
            <td>`f` surjective</td>
          </tr>
          <tr>
            <td>distinguishable/distinguishable</td>
            <td>`(1)`</td>
            <td>`(2)`</td>
            <td>`(3)`</td>
          </tr>
          <tr>
            <td>indistinguishable/distinguishable</td>
            <td>`(4)`</td>
            <td>`(5)`</td>
            <td>`(6)`</td>
          </tr>
          <tr>
            <td>distinguishable/indistinguishable</td>
            <td>`(7)`</td>
            <td>`(8)`</td>
            <td>`(9)`</td>
          </tr>
          <tr>
            <td>indistinguishable/indistinguishable</td>
            <td>`(10)`</td>
            <td>`(11)`</td>
            <td>`(12)`</td>
          </tr>
        </table>
      </div>
      <p>If the balls are distinguishable, then it is important to know which ball goes where. If the balls are indistinguishable, then we only need to know how many balls are in each box.</p>
      <div class="box">
        <p>`(1)`: balls and boxes are distinguishable; `f` is arbitrary</p>
        <p>For each of the `k` balls, there are `n` choices for which box it can be put in</p>
        <p>So there are `n^k` ways</p>
      </div>
      <div class="box">
        <p>`(2)`: balls and boxes are distinguishable; `f` is injective</p>
        <p>For the first ball, there are `n` choices of boxes</p>
        <p>For the second ball, there are `n-1` choices of boxes</p>
        <p>`vdots`</p>
        <p>For the `k^(th)` ball, there is `(n-k+1)` choices of boxes</p>
        <p>So there are `(n)_k = n(n-1)(n-2)...(n-k+1)` ways</p>
      </div>
      <div class="box">
        <p>`(3)`: balls and boxes are distinguishable; `f` is surjective</p>
        <p>Some boxes might have one ball. Some boxes might have more than one ball. But none of them are empty</p>
        <p>This is like breaking up `[k]` into `n` blocks</p>
        <p>The number of ways to do this are counted by the number of set partitions of `[k]` into `n` blocks, which is `S(k,n)`</p>
        <p>Since the boxes are distinguishable, the order of the partitions matter</p>
        <p>So there are `n!S(k,n)` ways</p>
      </div>
      <div class="box">
        <p>`(4)`: balls are indistinguishable, boxes are distinguishable; `f` is arbitrary</p>
        <p>Since the balls are indistinguishable, we're not concerned with which balls go to which box. We only need to know how many balls are in each box</p>
        <p>Let `a_i` be the number of balls in box `i`</p>
        <p>Then `a_1 + a_2 + ... a_n = k` where each `a_i ge 0`</p>
        <p>This is a weak composition of `k` into `n` parts</p>
        <p>So there are `((k+n-1),(k))` ways</p>
      </div>
      <div class="box">
        <p>`(5)`: balls are indistinguishable, boxes are distinguishable; `f` is injective</p>
        <p>Since the balls are indistinguishable, we're not concerned with which balls go to which box. We only need to know how many balls are in each box</p>
        <p>Additionally, since each box can only get at most one ball, we only need to know which box gets a ball</p>
        <p>This is like choosing a subset of `k` boxes that get a ball</p>
        <p>So there are `((n),(k))` ways</p>
      </div>
      <div class="box">
        <p>`(6)`: balls are indistinguishable, boxes are distinguishable; `f` is surjective</p>
        <p>Since the balls are indistinguishable, we're not concerned with which balls go to which box. We only need to know how many balls are in each box</p>
        <p>Let `a_i` be the number of balls in box `i`</p>
        <p>Then `a_1 + a_2 + ... a_n = k` where each `a_i gt 0` since each box must have a ball</p>
        <p>This is a composition of `k` into `n` parts</p>
        <p>So there are `((k-1),(n-1))` ways</p>
      </div>
      <div class="box">
        <p>`(7)`: balls are distinguishable, boxes are indistinguishable; `f` is arbitrary</p>
        <p>Some boxes might have one ball. Some boxes might have more than one ball. Some boxes might be empty</p>
        <p>This is like breaking up `[k]` into at most `n` blocks, since each box might not have a ball</p>
        <p>So there are `sum_(i=1)^nS(k,i)` ways</p>
      </div>
      <div class="box">
        <p>`(8)`: balls are distinguishable, boxes are indistinguishable; `f` is injective</p>
        <p>Since the boxes are indistinguishable, we can rearrange the boxes in any order</p>
        <p>Therefore, it doesn't matter where the balls go (putting the same ball in different boxes doesn't count as a separate ordering because we can just rearrange the boxes)</p>
        <p>So there's really only one way to do this</p>
        <p>However, since each box can have at most one ball, if there are more balls than boxes, then it is impossible</p>
        <p>So the number of ways is `{(1\ if k le n),(0\ if k gt n):}`</p>
      </div>
      <div class="box">
        <p>`(9)`: balls are distinguishable, boxes are indistinguishable; `f` is surjective</p>
        <p>Some boxes might have one ball. Some boxes might have more than one ball. But none of them are empty</p>
        <p>This is like breaking up `[k]` into exactly `n` blocks, since each box must have a ball</p>
        <p>The number of ways to do this are counted by the number of set partitions of `[k]` into `n` blocks, which is `S(k,n)`</p>
        <p>So there are `S(k,n)` ways</p>
      </div>
      <div class="box">
        <p>`(10)`: balls and boxes are indistinguishable; `f` is arbitrary</p>
        <p>Since the balls are indistinguishable, we're not concerned with which balls go to which box. We only need to know how many balls are in each box</p>
        <p>Since the boxes are indistinguishable, we can rearrange them after we put the balls in them so that they're in decreasing order (with respect to the number of balls in each box)</p>
        <p>This is like integer partitions of `k` into at most `n` parts, since each box might not have a ball</p>
        <p>So there are `sum_(i=1)^np_i(k)` ways</p>
      </div>
      <div class="box">
        <p>`(11)`: balls and boxes are indistinguishable; `f` is injective</p>
        <p>Since the boxes are indistinguishable, we can rearrange the boxes in any order</p>
        <p>Therefore, it doesn't matter where the balls go (it doesn't matter anyway since the balls are indistinguishable)</p>
        <p>So there's really only one way to do this</p>
        <p>However, since each box can have at most one ball, if there are more balls than boxes, then it is impossible</p>
        <p>So the number of ways is `{(1\ if k le n),(0\ if k gt n):}`</p>
      </div>
      <div class="box">
        <p>`(12)`: balls and boxes are indistinguishable; `f` is surjective</p>
        <p>Since the balls are indistinguishable, we're not concerned with which balls go to which box. We only need to know how many balls are in each box</p>
        <p>Since the boxes are indistinguishable, we can rearrange them after we put the balls in them so that they're in decreasing order (with respect to the number of balls in each box)</p>
        <p>This is like integer partitions of `k` into exactly `n` parts, since each box must have a ball</p>
        <p>So there are `p_n(k)` ways</p>
      </div>
      <p>So the twelvefold way table looks like:</p>
      <div style="display: flex; justify-content: center;">
        <table>
          <tr>
            <td>balls/boxes</td>
            <td>`f` arbitrary</td>
            <td>`f` injective</td>
            <td>`f` surjective</td>
          </tr>
          <tr>
            <td>distinguishable/distinguishable</td>
            <td>`n^k`</td>
            <td>`(n)_k`</td>
            <td>`n!S(k,n)`</td>
          </tr>
          <tr>
            <td>indistinguishable/distinguishable</td>
            <td>`((k+n-1),(k))`</td>
            <td>`((n),(k))`</td>
            <td>`((k-1),(n-1))`</td>
          </tr>
          <tr>
            <td>distinguishable/indistinguishable</td>
            <td>`sum_(i=1)^nS(k,i)`</td>
            <td>`{(1\ if k le n),(0\ if k gt n):}`</td>
            <td>`S(k,n)`</td>
          </tr>
          <tr>
            <td>indistinguishable/indistinguishable</td>
            <td>`sum_(i=1)^np_i(k)`</td>
            <td>`{(1\ if k le n),(0\ if k gt n):}`</td>
            <td>`p_n(k)`</td>
          </tr>
        </table>
      </div>
      <h2 id="binomialtheorem">Binomial Theorem</h2>
      <p>The binomial theorem provides a formula for expanding powers of `x+y`.</p>
      <div class="box">
        <p>Theorem: `(x+y)^n = sum_(i=0)^n ((n),(i)) x^iy^(n-i)` for `n ge 0`</p>
        <div class="collapse" id="binomialproof">
          <p>Consider the expansion `(x+y)^n = ubrace((x+y)(x+y)...(x+y))_n`</p>
          <p>Multiply the terms, considering all the possible choices in each set of parentheses</p>
          <p>Some terms will be repeated. For example, `x*x*x*...*x*y` and `x*x*y*x*...*x` both have `n-1` `x's` and `1` `y`</p>
          <p>The number of repeated terms is the number of ways to create a term that has that form</p>
          <p>The form of each term will be `i` `x's` and `n-i` `y's`</p>
          <p>Which gives us `((n),(i))` ways to create `x^iy^(n-i)`</p>
          <p>To get the final answer, we sum up all the possible products</p>
          <p>The sum goes from `0` to `n` because we have situations where `x` appears `0` times and `x` appears `n` times</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#binomialproof">Proof</a>
      </div>
      <p>There are several identities that can be obtained by substituting values for `x` and `y`.</p>
      <div class="box">
        <p>Let `x=y=1`</p>
        <p>Then we get `2^n = sum_(i=0)^n ((n),(i))`, which was proven earlier</p>
      </div>
      <div class="box">
        <p>Let `x=-1`, `y=1`</p>
        <p>Then we get `0 = sum_(i=0)^n (-1)^i((n),(i))`</p>
        <p>There's an interesting result when we expand the sum:</p>
        <div class="math">
          <p>`((n),(0))-((n),(1))+((n),(2))-((n),(3))+...+(-1)^n((n),(n)) = 0`</p>
          <p>`((n),(0))+((n),(2))+... = ((n),(1))+((n),(3))+...`</p>
          <p>`sum_(i text( even)) ((n),(i)) = sum_(i text( odd)) ((n),(i))`</p>
        </div>
        <p>This means the number of subsets with even size equals the number of subsets with odd size</p>
        <p>So there are `(2^n)/2 = 2^(n-1)` subsets with even size (and likewise for subsets with odd size)</p>
      </div>
      <p>We can also obtain another identity by taking the derivative.</p>
      <div class="box">
        <p>Applying `del/(delx)`, we get</p>
        <div class="math">
          <p>`n(x+y)^(n-1) = sum_(i=0)^n i ((n),(i))x^(i-1)y^(n-i)`</p>
          <p>`= sum_(i=1)^n i ((n),(i)) x^(i-1)y^(n-i)`</p>
        </div>
        <p>Setting `x=y=1`, we get</p>
        <div class="math">
          <p>`n2^(n-1)=sum_(i=1)^n i ((n),(i))`</p>
        </div>
        <p>The right-hand side counts the number of ways to pick a subset `S` of `[n]` and an element `x` in that subset:</p>
        <div class="math">
          <p>`|{(x,S)|S sube [n], x in S}|`</p>
        </div>
        <p>First, pick a subset `S` of size `i`: `((n),(i))` ways to to this</p>
        <p>Then, pick an element `x` in `S`: `i` ways to to this</p>
        <div class="box">
          <p>This is like picking members to be in a group, then picking a leader</p>
        </div>
        <p>The left-hand side tells a similar story</p>
        <p>First, pick an element `x` to put in the subset `S`: `n` ways to do this</p>
        <p>Then, pick the remaining elements to put in the subset `S`: `2^(n-1)` ways to do this</p>
        <div class="box">
          <p>This is like picking a leader, then the group members</p>
        </div>
      </div>
      <h2 id="multinomialtheorem">Multinomial Theorem</h2>
      <p>The multinomial theorem is a generalization of the binomial theorem.</p>
      <div class="box">
        <p>For `n,k ge 0`,</p>
        <div class="math">
          <p>`(x_1+x_2+...+x_k)^n = sum_(((a_1,a_2,...,a_k))) ((n),((a_1, a_2, ..., a_k))) x_1^(a_1)x_2^(a_2)...x_k^(a_k)`</p>
        </div>
        <p>where `a_i ge 0` and `a_1 + ... + a_k = n`</p>
        <p>The proof is similar to the proof for the binomial theorem</p>
        <p>The number of times `x_1^(a_1)x_2^(a_2)...x_k^(a_k)` appears is equal to the number of ways to choose each `x_i` exactly `a_i` times, which is `((n),((a_1,a_2,...,a_k)))`</p>
      </div>
      <div class="box">
        <p>Example: `(x_1+x_2+x_3)^3`</p>
        <div class="math">
          <p>`= ((3),((3,0,0)))x_1^3 + ((3),((0,3,0)))x_2^3 + ((3),((0,0,3)))x_3^3`</p>
          <p>`+ ((3),((2,1,0)))x_1^2x_2 + ((3),((2,0,1)))x_1^2x_3 + ((3),((1,2,0)))x_1x_2^2`</p>
          <p>`+ ((3),((0,2,1)))x_2^2x_3 + ((3),((1,0,2)))x_1x_3^2 + ((3),((0,1,2)))x_2x_3^2`</p>
          <p>`+ ((3),((1,1,1)))x_1x_2x_3`</p>
          <p>`= x_1^3+x_2^3+x_3^3+3x_1^2x_2+3x_1^2x_3+3x_1x_2^2+3x_2^2x_3+3x_1x_3^2+3x_2x_3^2+6x_1x_2x_3`<p>
        </div>
      </div>
      <div class="box">
        <p>`k^n = sum_(((a_1,...,a_k))) ((n),((a_1,...,a_k)))`</p>
        <div class="collapse" id="multiidentity1">
          <p>Set `x_1 = x_2 = ... = x_k = 1`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#multiidentity1">Proof</a>
      </div>
      <div class="box">
        <p>`0 = sum_(((a_1,...,a_k))) (1-k)^(a_1) ((n),((a_1,...,a_k)))`</p>
        <div class="collapse" id="multiidentity2">
          <p>Set `x_1 = 1-k`, `x_2 = ... = x_k = 1`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#multiidentity2">Proof</a>
      </div>
      <div class="box">
        <p>`nk^(n-1) = sum_(((a_1,...,a_k))) a_1 ((n),((a_1,...,a_k)))`</p>
        <div class="collapse" id="multiidentity3">
          <p>Apply `del/(delx_1)` and set `x_1 = ... = x_k = 1`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#multiidentity3">Proof</a>
      </div>
      <h2 id="formalpowerseries">Formal Power Series</h2>
      <p>A formal power series is a way to encode a sequence of numbers as an algebraic object. The numbers are the coefficients of some (infinite) polynomial.</p>
      <div class="box">
        <p>A <b>formal power series</b> (in variable `x`) is an expression of the form `sum_(n=0)^(oo) a_nx^n = A(x)` where `a_n` are scalars</p>
        <p>Alternatively, it can be written as `sum_(n ge 0) a_nx^n`</p>
        <p>Let `[x^n]A(x) = a_n` be the coefficient of `x^n`</p>
      </div>
      <p>Some special cases of formal power series are polynomials and scalars. Polynomials are formal power series where all the terms after a certain point are zero. Scalars are formal power series where `a_0` is a scalar and the rest of the terms are zero.</p>
      <div class="box">
        <p>Two power series are equal if and only if all of their coefficients match</p>
        <p>`A(x) = B(x)` if and only if `[x^n]A(x) = a_n = b_n = [x^n]B(x)` for all `n`</p>
      </div>
      <h3>Addition and Multiplication of Formal Power Series</h3>
      <div class="box">
        <p>Let `A(x) = sum_(n ge 0) a_nx^n` and `B(x) = sum_(n ge 0) b_nx^n`</p>
        <p>The sum of two formal power series is</p>
        <div class="math">
          <p>`A(x)+B(x) = sum_(n ge 0) (a_n+b_n)x^n`</p>
        </div>
        <p>The product of two formal power series is</p>
        <div class="math">
          <p>`A(x)B(x) = sum_(n ge 0) c_nx^n` where `c_n = sum_(i=0)^n a_ib_(n-i)`</p>
          <p>(the indices have to add up to `n`)</p>
        </div>
        <p>Addition and multiplication are both commutative</p>
        <div class="math">
          <p>`A(x)+B(x) = B(x)+A(x)`</p>
          <p>`A(x)B(x) = B(x)A(x)`</p>
        </div>
        <p>and associative</p>
        <div class="math">
          <p>`A(x)+[B(x)+C(x)] = [A(x)+B(x)]+C(x)`</p>
          <p>`A(x)[B(x)C(x)] = [A(x)B(x)]C(x)`</p>
        </div>
      </div>
      <div class="box">
        <p>Example: Let `A(x) = B(x) = sum_(n ge 0) x^n`</p>
        <p>`A(x)+B(x) = sum_(n ge 0) 2x^n`</p>
        <p>`A(x)B(x) = sum_(n ge 0) (n+1)x^n`</p>
        <p>In the multiplication, `c_n = sum_(i=0)^n a_ib_(n-i) = sum_(i=0)^n 1 = n+1`</p>
      </div>
      <h3>Invertibility of Formal Power Series</h3>
      <div class="box">
        <p>`A(x)` is <b>invertible</b> if there exists `B(x)` such that `A(x)B(x) = 1`</p>
        <p>Then `B(x) = A(x)^(-1) = 1/(A(x))`</p>
      </div>
      <div class="box">
        <p>An example of an invertible formal power series:</p>
        <p>Let `A(x) = sum_(n ge 0) x^n`, `B(x) = 1-x`</p>
        <p>`A(x)B(x) = sum_(n ge 0) c_nx^n` where `c_n = sum_(i=0)^n a_ib_(n-i)`</p>
        <p>If `n=0`, then `c_0 = a_0b_0 = 1`</p>
        <p>If `n=1`, then `c_1 = a_0b_1 + a_1b_0 = (1)(-1) + (1)(1) = 0`</p>
        <p>If `n ge 2`, then `c_n = 0` since `B(x)` has no degree `ge 2` term</p>
        <p>So `c_n = 1` when `n=0` and `c_n = 0` when `n gt 0` `implies A(x)B(x) = sum_(n ge 0) c_nx^n = 1`</p>
        <p>This means `sum_(n ge 0) x^n` is invertible with inverse `1-x`</p>
        <p>We can also see that their product is equal to `1` by manually multiplying them:</p>
        <div class="math">
          <p>`(1+x+x^2+x^3+...)(1-x)`</p>
          <p>`= 1+x+x^2+x^3+...`</p>
          <p>`\ \ \ \ \ \ \ \ -x-x^2-x^3-...`</p>
          <p>`= 1`</p>
        </div>
        <div class="box">
          <p>From this result, we get an identity:</p>
          <div class="math">
            <p>`(sum_(n ge 0) x^n)(1-x) = 1`</p>
            <p>`sum_(n ge 0) x^n = 1/(1-x)`</p>
          </div>
        </div>
      </div>
      <div class="box">
        <p>Theorem: `A(x)` is invertible if and only if `[x^0]A(x) != 0`</p>
        <p>A formal power series is invertible if and only if the constant term is nonzero</p>
        <div class="collapse" id="fpsinvertible">
          <p>`(lArr)`Suppose `[x^0]A(x) != 0`. Want to show `A(x)` is invertible</p>
          <p>Consider `B(x) = sum_(n ge 0) b_nx^n` and try to pick `b_n` so that `A(x)B(x) = 1`</p>
          <p>Expanding out the equation `A(x)B(x) = 1` and matching coefficients, we get:</p>
          <div class="math">
            <p>`a_0b_0 = 1`</p>
            <p>`(a_1b_0 + a_0b_1)x = 0x`</p>
            <p>`(a_2b_0 + a_1b_1 + a_0b_2)x^2 = 0x^2`</p>
            <p>`vdots`</p>
          </div>
          <p>Using this system of equations, we can try to find `b_n`</p>
          <div class="math">
            <p>`a_0b_0 = 1 implies b_0 = 1/a_0`</p>
            <p>`a_1b_0+a_0b_1 = 0 implies b_1 = -(a_1b_0)/a_0 = -a_1/(a_0)^2`</p>
            <p>`a_2b_0+a_1b_1+a_0b_2 = 0 implies b_2 = -(a_2b_0+a_1b_1)/a_0`</p>
            <p>`vdots`</p>
          </div>
          <p>At each stage, it is possible to find `b_(n+1)` since it is in terms of `b_0,...,b_n`. More formally, we can do so using induction. Suppose we have solved for `b_0, ..., b_n`. At each stage, we have</p>
          <div class="math">
            <p>`a_(n+1)b_0 + ... + a_0b_(n+1) = 0`</p>
          </div>
          <p>So we can solve for `b_(n+1) = -(a_(n+1)b_0 + ...)/a_0`</p>
          <p>`(implies)`If the constant term is `0`, then the equation `a_0b_0 = 1` has no solution `implies` cannot find `b_n` `implies` `A(x)` is not invertible</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#fpsinvertible">Proof</a>
        <p>Intuitively, if a formal power series has no constant term, then its product with any other power series will always be a sum of powers of `x`, which can never be equal to `1`</p>
      </div>
      <h3>Composition of Formal Power Series</h3>
      <div class="box">
        <p>Let `A(x),B(x)` be formal power series such that `[x^0]A(x) = 0`</p>
        <p>The <b>composition</b> `(B circ A)(x) = B(A(x))` is defined by `sum_(n ge 0) b_nA(x)^n`</p>
        <div class="box">
          <p>It looks like we're taking the sum of infinitely many things, so how is this operation well defined, i.e., how are we going to get an answer if it looks like we're adding infinitely many things?</p>
          <p>Since `A(x)` has no constant term, we have</p>
          <div class="math">
            <p>`A(x) = a_1x + a_2x^2 + ...`</p>
          </div>
          <p>What happens when we take powers of `A(x)`? For `A(x)^2`, there is no constant term. There is also no linear term</p>
          <div class="math">
            <p>`A(x)^2 = a_1^2x^2 + 2a_2a_1x^3 + ...`</p>
          </div>
          <p>Claim: `[x^i]A(x)^n = 0` for `i lt n`</p>
          <p>Expanding `sum_(n ge 0) b_nA(x)^n`, we get</p>
          <div class="math">
            <p>`b_0 + b_1A(x) + b_2A(x)^2 + b_3A(x)^3 + ...`</p>
            <p>`= b_0`</p>
            <p>`+ b_1a_1x + b_1a_2x^2 + b_1a_3x^3 + ...`</p>
            <p>`+ b_2a_1^2x^2 + b_2 2a_2a_1x^3 + ...`</p>
          </div>
          <p>To get the coefficient of `x^n`, we only have to do a finite amount of additions. For example,</p>
          <div class="math">
            <p>The coefficient of `x^0` is `b_0`</p>
            <p>The coefficient of `x^1` is `b_1a_1x`</p>
            <p>The coefficient of `x^2` is `b_1a_2x^2 + b_2a_1^2x^2`</p>
          </div>
          <p>So we will get an answer from doing this operation</p>
          <p>If `A(x)` had a constant term, then we would end up having to do an infinite amount of additions</p>
        </div>
      </div>
      <div class="box">
        <p>Example: Let `A(x) = x^d` where `d gt 0` and `B(x) = sum_(n ge 0) x^n`</p>
        <p>`B(A(x)) = sum_(n ge 0) (x^d)^n = sum_(n ge 0) x^(dn)`</p>
        <p>We can substitute this into the identity `(1-x)sum_(n ge 0) x^n = 1` to get a new identity:</p>
        <div class="math">
          <p>`(1-x^d)sum_(n ge 0) x^(dn) = 1`</p>
          <p>`1/(1-x^d) = sum_(n ge 0) x^(dn)`</p>
        </div>
      </div>
      <h3>Derivative of Formal Power Series</h3>
      <div class="box">
        <p>The <b>derivative</b> of `A`, written as `DA` or `A'`, is defined by `sum_(n ge 1) na_nx^(n-1) = sum_(n ge 0) (n+1)a_(n+1)x^n`</p>
        <div class="box">
          <p>The familiar rules for derivatives apply to formal power series as well</p>
          <p>`D(A+B) = DA + DB`</p>
          <p>`D(A*B) = (DA)*B + A*(DB)` (product rule)</p>
          <p>`D(B circ A) = (DA)(DB circ A)` (chain rule)</p>
          <p>`D(A^(-1)) = -(DA)/A^2`</p>
          <p>`D(A^n) = n(DA)A^(n-1)`</p>
        </div>
      </div>
      <div class="box">
        <p>From before, `1/(1-x) = sum_(n ge 0) x^n`. We can use this identity to get a new identity by taking the derivative:</p>
        <div class="math">
          <p>`1/(1-x)^2 = sum_(n ge 1) nx^(n-1) = sum_(n ge 0) (n+1)x^n`</p>
        </div>
      </div>
      <div class="box">
        <p>It is possible to simplify `sum_(n ge 0) nx^n`:</p>
        <div class="math">
          <p>`sum_(n ge 0) nx^n = sum_(n ge 1)nx^n = x sum_(n ge 1) nx^(n-1)` (we can pull out an `x` because there's no constant term)</p>
          <p>`= x sum_(n ge 0) (n+1)x^n`</p>
          <p>`= x*1/(1-x)^2`</p>
          <p>`= x/(1-x)^2`</p>
        </div>
        <p>or</p>
        <div class="math">
          <p>`sum_(n ge 0) nx^n = sum_(n ge 0) (n+1)x^n - sum_(n ge 0) x^n`</p>
          <p>`= 1/(1-x)^2 - 1/(1-x)`</p>
          <p>`= (1-(1-x))/(1-x)^2`</p>
          <p>`= x/(1-x)^2`</p>
        </div>
        <p>In either case, we get the identity</p>
        <div class="math">
          <p>`(1-x)^2 sum_(n ge 0) nx^n = x`</p>
          <p>`sum_(n ge 0) nx^n = x/(1-x)^2`</p>
        </div>
      </div>
      <h2 id="binomialtheoremgeneral">Binomial Theorem (General)</h2>
      <p>The previous binomial theorem only considered nonnegative powers. Here, we consider real-numbered powers.</p>
      <div class="box">
        <p>Let `m` be a real number and `k ge 0` be an integer</p>
        <p>`((m),(0))=1`</p>
        <p>`((m),(k)) = (m(m-1)(m-2)...(m-k+1))/(k!)`</p>
      </div>
      <div class="box">
        <p>Theorem: `(1+x)^m = sum_(n ge 0) ((m),(n)) x^n`</p>
      </div>
      <div class="box">
        <p>Consider `-1` as a power: `m=-1`</p>
        <p>From before,</p>
        <div class="math">
          <p>`1/(1-x) = sum_(n ge 0) x^n`</p>
        </div>
        <p>Substituting `-x` for `x`,</p>
        <div class="math">
          <p>`1/(1+x) = sum_(n ge 0) (-x)^n = sum_(n ge 0) (-1)^nx^n`</p>
        </div>
        <p>Using the binomial theorem, we should get the same result</p>
        <p>From the binomial theorem: `(1+x)^(-1) = sum_(n ge 0) ((-1),(n))x^n`</p>
        <div class="math">
          <p>`((-1),(n)) = ((-1)(-2)(-3)...(-1-n+1))/(n!)`</p>
          <p>`= ((-1)^n n!)/(n!)`</p>
          <p>`= (-1)^n`</p>
        </div>
        <p>So the equation obtained from the binomial theorem matches the one from the formal power series</p>
      </div>
      <div class="box">
        <p>Consider any negative power: `m=-d` where `d gt 0` is an integer</p>
        <p>We could try to see what it evaluates to without using the binomial theorem, but it gets pretty complicated</p>
        <div class="math">
          <p>`(1+x)^(-d) = (1/(1+x))^d`</p>
          <p>`= (sum_(n ge 0) (-1)^nx^n)^d`</p>
        </div>
        <p>Using the binomial theorem: `(1+x)^(-d) = sum_(n ge 0) ((-d),(n)) x^n`</p>
        <div class="math">
          <p>`((-d),(n)) = ((-d)(-d-1)(-d-2)...(-d-n+1))/(n!)`</p>
          <p>`= (-1)^n((d)(d+1)(d+2)...(d+n-1))/(n!)`</p>
          <p>`= (-1)^n((d-1)!(d)(d+1)...(d+n-1))/((d-1)!n!)`</p>
          <p>`= (-1)^n((d+n-1)!)/((d-1)!n!)`</p>
          <p>`= (-1)^n((d+n-1),(n))`</p>
        </div>
        <p>So `(1+x)^(-d) = 1/(1+x)^d = sum_(n ge 0) (-1)^n((d+n-1),(n))x^n`</p>
        <p>If we substitute `-x` for `x`, we get</p>
        <div class="math">
          <p>`(1-x)^(-d) = 1/(1-x)^d = sum_(n ge 0) (-1)^n((d+n-1),(n))(-x)^n = sum_(n ge 0) ((d+n-1),(n))x^n`</p>
        </div>
      </div>
      <div class="box">
        <p>Consider a fractional power: `m=1/2`</p>
        <p>`(1+x)^(1/2)` is a formal power series whose square is `(1+x)`</p>
        <p>Using the binomial theorem: `(1+x)^(1/2) = sum_(n ge 0) ((1/2),(n))x^n`</p>
        <div class="math">
          <p>`((1/2),(n)) = ((1/2)(-1/2)(-3/2)...(-1/2-n+1))/(n!)`</p>
          <p>`= (-1)^(n-1)((1/2)(1/2)(3/2)(5/2)...((2n-1)/2))/(n!)`</p>
          <p>`= (-1)^(n-1)(3*5*7*...*2n-1)/(2^n n!)`</p>
        </div>
        <p>which doesn't really simplify further (unless we introduce the double factorial)</p>
        <p>However, this means we've found the square root of a formal power series</p>
        <div class="math">
          <p>`(sum_(n ge 0) ((1/2),(n))x^n)^2 = 1+x`</p>
        </div>
      </div>
      <div class="box">
        <p>Given a quadratic equation, `A(x)t^2+B(x)t+C(x) = 0` where `A(x),B(x),C(x)` are formal power series, the solutions `t` are given by the quadratic formula</p>
        <div class="math">
          <p>`t = (-B(x) +- sqrt(B(x)^2-4A(x)C(x)))/(2A(x))`</p>
        </div>
        <p>if `A(x)` is invertible</p>
      </div>
      <h2 id="ordinarygeneratingfunctions">Ordinary Generating Functions</h2>
      <p>Ordinary generating functions are a way to encode a sequence of numbers as a formal power series.</p>
      <div class="box">
        <p>Given a sequence of numbers `a_0, a_1, a_2, ...`, the <b>ordinary generating function</b> (ogf) is</p>
        <div class="math">
          <p>`A(x) = sum_(n ge 0) a_nx^n`</p>
        </div>
      </div>
      <h3>Linear Recurrence Relations</h3>
      <p>We can use ordinary generating functions to find closed formulas for linear recurrence relations.</p>
      <div class="box">
        <p>A sequence `a_0,a_1,...` satisfies a <b>linear recurrence relation</b> (of order `d`) if there exist scalars `c_1, c_2, ..., c_d` such that `c_d != 0` and for all `n ge d`</p>
        <div class="math">
          <p>`a_n = c_1a_(n-1)+c_2a_(n-2)+...+c_da_(n-d)`</p>
        </div>
        <p>`d` is the minimum number of initial conditions that must be specified in order to find `a_n`</p>
      </div>
      <div class="box">
        <p>An example of a linear recurrence relation is the Fibonacci numbers</p>
        <div class="math">
          <p>`1,1,2,3,5,8,13,21,...`</p>
        </div>
        <p>The relation is `a_n = a_(n-1)+a_(n-2)` for `n ge 2`</p>
        <p>It satisifes a linear recurrence relation of order `2` where `c_1=c_2=1`</p>
      </div>
      <p>We have a recurrence relation for `a_n`, but it would be nice to find a closed formula for `a_n` so we could calculate `a_n` directly without going through the recurrence.</p>
      <div class="box">
        <p>Consider the case when `d=1`</p>
        <p>Then we have `a_n = c_1a_(n-1)` for `n ge 1`</p>
        <div class="math">
          <p>`a_1=c_1a_0`</p>
          <p>`a_2=c_1a_1=c_1^2a_0`</p>
          <p>`a_3=c_1a_2=c_1^3a_0`</p>
          <p>`vdots`</p>
          <p>`a_n=c_1^na_0`</p>
        </div>
        <p>Here, `a_0` is an initial condition</p>
      </div>
      <div class="box">
        <p>Consider the case when `d=2`</p>
        <p>Then we have `a_n = c_1a_(n-1)+c_2a_(n-2)` for `n ge 2` and `c_2 != 0`</p>
        <div class="box">
          <p>The <b>characteristic polynomial</b> of this recurrence relation is defined to be</p>
          <div class="math">
            <p>`t^2-c_1t-c_2`</p>
          </div>
          <p>The roots `r_1,r_2` are given by</p>
          <div class="math">
            <p>`(c_1 +- sqrt(c_1^2+4c_2))/2`</p>
          </div>
          <p>So the characteristic polynomial can be factored as</p>
          <div class="math">
            <p>`t^2-c_1t-c_2 = (t-r_1)(t-r_2)`</p>
          </div>
        </div>
        <div class="box">
          <p>Theorem: If `r_1 != r_2`, then there are constants `alpha_1,alpha_2` such that `a_n = alpha_1r_1^n+alpha_2r_2^n` for all `n`</p>
          <div class="collapse" id="linearorder2">
            <p>Given `a_0, a_1, ...`, create the ordinary generating function `A(x) = sum_(n ge 0)a_nx^n`</p>
            <p>We can rewrite `A(x)` as</p>
            <div class="math">
              <p>`a_0 + a_1x + sum_(n ge 2)a_nx^n`</p>
            </div>
            <p>The recurrence is only valid for `n ge 2` so we have to take out the first two terms in order to make the substitution below</p>
            <p>From the definition of a linear recurrence relation, `a_n = c_1a_(n-1)+c_2a_(n-2)`, so</p>
            <div class="math">
              <p>`A(x) = a_0 + a_1x + sum_(n ge 2)(c_1a_(n-1)+c_2a_(n-2))x^n`</p>
              <p>`= a_0 + a_1x + c_1sum_(n ge 2)a_(n-1)x^n+c_2sum_(n ge 2)a_(n-2)x^n`</p>
            </div>
            <p>The last two summations are almost the same as `A(x)`:</p>
            <div class="math">
              <p>`sum_(n ge 2)a_(n-1)x^n=xsum_(n ge 2)a_(n-1)x^(n-1)=x(a_1x+a_2x^2+a_3x^3+...)=x(A(x)-a_0)`</p>
              <p>`sum_(n ge 2)a_(n-2)x^n=x^2sum_(n ge 2)a_(n-2)x^(n-2)=x^2sum_(n ge 0)a_nx^n=x^2A(x)`</p>
            </div>
            <p>Plugging these two back into `A(x)`, we get</p>
            <div class="math">
              <p>`A(x) = a_0+a_1x+c_1x(A(x)-a_0)+c_2x^2A(x)`</p>
              <p>`= a_0+a_1x+c_1xA(x)-c_1a_0x+c_2x^2A(x)`</p>
            </div>
            <p>Now we gather all the `A(x)`'s onto one side:</p>
            <div class="math">
              <p>`A(x)-c_1xA(x)-c_2x^2A(x)=a_0+a_1x-a_0c_1x`</p>
              <p>`A(x)(1-c_1x-c_2x^2)=a_0+a_1x-a_0c_1x`</p>
            </div>
            <p>We can divide both sides by `(1-c_1x-c_2x^2)` since it is invertible (because there is a constant term):</p>
            <div class="math">
              <p>`A(x)=(a_0+a_1x-a_0c_1x)/(1-c_1x-c_2x^2)`</p>
            </div>
            <p>We can factor the bottom by using `t^2-c_1t-c_2 = (t-r_1)(t-r_2)` and plugging in `1/x` for `t`:</p>
            <div class="math">
              <p>`x^(-2)-c_1x^(-1)-x_2=(1/x-r_1)(1/x-r_2)`</p>
            </div>
            <p>To make it look like `1-c_1x-c_2x^2`, we multiply by `x^2`:</p>
            <div class="math">
              <p>`1-c_1x-c_2x^2=(1-r_1x)(1-r_2x)`</p>
            </div>
            <p>Knowing that the denominator can be factored, we can use partial fraction decomposition to get</p>
            <div class="math">
              <p>`A(x)=(a_0+a_1x-a_0c_1x)/(1-c_1x-c_2x^2)=alpha_1/(1-r_1x)+alpha_2/(1-r_2x)`</p>
              <p>for some constants `alpha_1,alpha_2`</p>
            </div>
            <p>Both of those terms are geometric series `color(red)(text(*))`, so we can write</p>
            <div class="math">
              <p>`A(x)=alpha_1/(1-r_1x)+alpha_2/(1-r_2x)=alpha_1sum_(n ge 0)(r_1x)^n+alpha_2sum_(n ge 0)(r_2x)^n`</p>
              <p>`= alpha_1sum_(n ge 0) r_1^nx^n + alpha_2sum_(n ge 0) r_2^nx^n`</p>
            </div>
            <p>The coefficient of `x^n` on the left-hand side is `a_n`</p>
            <p>The coefficient of `x^n` on the right-hand side is `alpha_1r_1^n+alpha_2r_2^n`</p>
            <p>So `a_n = alpha_1r_1^n+alpha_2r_2^n`</p>
            <p>`color(red)(text(*))`this also comes from the identity `1/(1-x) = sum_(n ge 0)x^n`</p>
          </div>
          <a class="btn" data-toggle="collapse" href="#linearorder2">Proof</a>
          <p>To solve for `alpha_1,alpha_2`, plug in `n=0,1`</p>
          <div class="math">
            <p>`a_0=alpha_1+alpha_2`</p>
            <p>`a_1=alpha_1r_1+alpha_2r_2`</p>
            <p>(`a_0` and `a_1` are part of the numbers in the sequence that is given)</p>
          </div>
        </div>
        <div class="box">
          <p>This theorem can be seen with the Fibonacci numbers</p>
          <p>They are defined by `a_n = a_(n-1)+a_(n-2)`, so the characteristic polynomial is `t^2-t-1`</p>
          <p>The roots are `r_1 = (1+sqrt(5))/2` and `r_2 = (1-sqrt(5))/2`</p>
          <p>According to the theorem, there exist `alpha_1, alpha_2` such that `a_n = alpha_1((1+sqrt(5))/2)^n+alpha_2((1-sqrt(5))/2)^n`</p>
          <p>To find `alpha_1,alpha_2`, plug in `n=0,1`</p>
          <div class="math">
            <p>`1=alpha_1+alpha_2`</p>
            <p>`1=alpha_1((1+sqrt(5))/2)+alpha_2((1-sqrt(5))/2)`</p>
          </div>
          <p>Solving this system of equations, we get</p>
          <div class="math">
            <p>`alpha_1=(1+sqrt(5))/(2sqrt(5))`</p>
            <p>`alpha_2=-(1-sqrt(5))/(2sqrt(5))`</p>
          </div>
          <p>So `a_n = (1+sqrt(5))/(2sqrt(5))((1+sqrt(5))/2)^n-(1-sqrt(5))/(2sqrt(5))((1-sqrt(5))/2)^n`</p>
          <div class="math">
            <p>`= 1/sqrt(5)((1+sqrt(5))/2)^(n+1)-1/sqrt(5)((1-sqrt(5))/2)^(n+1)`</p>
          </div>
        </div>
        <div class="box">
          <p>Theorem: If `r_1=r_2`, then there are constants `alpha_1,alpha_2` such that `a_n = alpha_1r_1^n+nalpha_2r_1^n`</p>
          <div class="collapse" id="linearorder2-2">
            <p>The proof is the same up until partial fraction decomposition</p>
            <p>At that point, we have</p>
            <div class="math">
              <p>`A(x) = alpha_1/(1-r_1x)+alpha_2/(1-r_1x)^2`</p>
            </div>
            <p>`alpha_1/(1-r_1x)` is a geometric series so that simplifies to `alpha_1sum_(n ge 0)r_1^nx^n color(red)(text(*))`</p>
            <p>`alpha_2/(1-r_1x)^2` is the square of a geometric series so that simplifies to `alpha_2sum_(n ge 0)(n+1)r_1^nx^n color(red)(text(**))`</p>
            <p>Comparing the coefficients of `x^n`, we get</p>
            <div class="math">
              <p>`a_n = alpha_1r_1^n + alpha_2(n+1)r_1^n`</p>
              <p>`= (alpha_1+alpha_2)r_1^n + alpha_2nr_1^n`</p>
            </div>
            <p>`color(red)(text(*))`this also comes from the identity `1/(1-x) = sum_(n ge 0)x^n`</p>
            <p>`color(red)(text(**))`this also comes from the identity `1/(1-x)^2 = sum_(n ge 0)(n+1)x^n`</p>
          </div>
          <a class="btn" data-toggle="collapse" href="#linearorder2-2">Proof</a>
        </div>
        <p>So the procedure for finding closed formulas for a linear recurrence relation of order `2` is:</p>
        <ul>
          <li>Form the characteristic polynomial and find its roots</li>
          <li>If the roots are the same, use `a_n = alpha_1r_1^n + alpha_2r_2^n`</li>
          <li>If the roots are the different, use `a_n = alpha_1r_1^n + nalpha_2r_1^n`</li>
        </ul>
      </div>
      <div class="box">
        <p>For general `d`, we have</p>
        <div class="math">
          <p>`a_n=c_1a_(n-1)+c_2a_(n-2)+...+c_da_(n-d)` for `n ge d`</p>
        </div>
        <p>The characteristic polynomial is</p>
        <div class="math">
          <p>`t^d-c_1t^(d-1)-c_2t^(d-2)-...-c_d = (t-r_1)(t-r_2)...(t-r_d)`</p>
        </div>
        <p>If all `r_1,r_2,...,r_d` are different, then there exist constants `alpha_1,alpha_2,...,alpha_d` such that</p>
        <div class="math">
          <p>`a_n=alpha_1r_1^n+alpha_2r_2^n+...+alpha_dr_d^n`</p>
        </div>
        <p>What if some roots are the same?</p>
        <div class="box">
          <p>Example: `d=5`, `r_1=r_2=r_3`, `r_4=r_5`, `r_1 != r_4`</p>
          <p>Then there exist constants `alpha_1,alpha_2,alpha_3,alpha_4,alpha_5` such that</p>
          <div class="math">
            <p>`a_n=alpha_1r_1^n+nalpha_2r_1^n+n^2alpha_3r_1^n+alpha_4r_4^n+nalpha_5r_4^n`</p>
          </div>
        </div>
      </div>
      <h3>Combinatorial Interpretation</h3>
      <p>Ordinary generating functions sometimes make counting things easier.</p>
      <p>We can think of `a_n` as counting the number of "structures" on the set `[n]`.</p>
      <div class="box">
        <p>If `a_n = n!`, then `a_n` is the number of ways to order the elements in `[n]`</p>
        <p>If `b_n = 2^n`, then `b_n` is the number of ways to pick a subset of `[n]`</p>
        <p>`A(x)=sum_(n ge 0) a_nx^n` is an ogf encoding the number of orderings</p>
        <p>`B(x)=sum_(n ge 0) b_nx^n` is an ogf encoding the number of subsets</p>
      </div>
      <p>In general, `a_n` is the number of ways of putting structure `alpha` on the set `[n]` and `b_n` is the number of ways of putting structure `beta` on the set `[n]`.</p>
      <p>So `a_n+b_n` is the number of ways of putting structure `alpha` on the set `[n]` or putting structure `beta` on the set `[n]`. `(A+B)(x)` is an ogf encoding the number of ways of putting either `alpha` on `[n]` or `beta` on `[n]`.</p>
      <div class="box">
        <p>In the above example, `a_n+b_n=n!+2^n` is the number of ways to pick either an ordering of the elements of `[n]` or a subset of `[n]`</p>
      </div>
      <div class="box">
        <p>`a_n+a_n=(2n)!` can be thought of as the number of ways of letting either person `1` order the elements of `[n]` or person `2` order the elements of `[n]`</p>
      </div>
      <p>The product is putting two structures on the elements of `[n]` simultaneously.</p>
      <div class="box">
        <p>`A(x)B(x) = sum_(n ge 0) c_nx^n` where `c_n = sum_(i=0)^n a_ib_(n-i)`</p>
        <p>`c_n=a_ib_(n-i)` is the number of ways to put structure `alpha` on `{1,...,i}` and to put structure `beta` on `{i+1,...,n}`</p>
        <p>So `c_n` is the number of ways of splitting `[n]` into two consecutive pieces and putting `alpha` on the first piece and putting `beta` on the second piece</p>
      </div>
      <div class="box">
        <p>Example: A class has `n` days. We want to split the course into two portions, where the first portion is theory and the second portion is labs. One of the theory lectures is given by a guest lecturer and two of the lab days are carried out by the guest lecturer. How many ways are there to design the course?</p>
        <p>Let `alpha` be picking the theory portion, `beta` be picking the lab portion</p>
        <p>So `a_i = i` is the number of ways to pick one theory day out of `i` days to be the guest speaker</p>
        <p>And `b_j = ((j),(2))` is the number of ways to pick two lab days out of `j` days to be the guest speaker</p>
        <p>In terms of generating functions, we have</p>
        <div class="math">
          <p>`A(x) = sum_(n ge 0)a_nx^n = sum_(n ge 0)nx^n = x/(1-x)^2`</p>
          <p>`B(x) = sum_(n ge 0)b_nx^n = sum_(n ge 0)((n),(2))x^n = x^2/(1-x)^3 color(red)(text(*))`</p>
          <p>`C(x) = A(x)B(x) = (x/(1-x)^2)(x^2/(1-x)^3) = x^3/(1-x)^5`</p>
        </div>
        <p>The coefficients of `C(x)` will be the answer to this question</p>
        <div class="math">
          <p>`sum_(n ge 0) c_nx^n = x^3/(1-x)^5`</p>
        </div>
        <p>To do that, we can use the binomial theorem:</p>
        <div class="math">
          <p>`x^3 sum_(n ge 0) ((-5),(n))x^n`</p>
          <p>`= x^3 sum_(n ge 0) ((n+4),(n))x^n`</p>
          <p>`= sum_(n ge 0) ((n+4),(n))x^(n+3)`</p>
        </div>
        <p>We want the coefficient of `x_n`, so we plug in `n-3`:</p>
        <div class="math">
          <p>`= sum_(n ge 0) ((n+1),(n-3))x^n`</p>
        </div>
        <p>So `c_n = ((n+1),(n-3))`</p>
        <p>`color(red)(text(*))`To get this identity, we expand `((n),(2))`:</p>
        <div class="math">
          <p>`sum_(n ge 0) ((n),(2))x^n = sum_(n ge 0) (n(n-1))/2x^n`</p>
          <p>`= 1/2 sum_(n ge 0) n(n-1)x^n`</p>
        </div>
        <p>We can find a formula for that by taking the derivative of `sum_(n ge 0)x^n = 1/(1-x)` twice and then multiplying by `x^2/2`:</p>
        <div class="math">
          <p>`sum_(n ge 0)x^n = 1/(1-x)`</p>
          <p>`sum_(n ge 0)nx^(n-1) = 1/(1-x)^2`</p>
          <p>`sum_(n ge 0)n(n-1)x^(n-2) = 2/(1-x)^3`</p>
          <p>`x^2/2sum_(n ge 0)n(n-1)x^(n-2) = x^2/2 2/(1-x)^3`</p>
          <p>`1/2sum_(n ge 0)n(n-1)x^n = x^2/(1-x)^3`</p>
        </div>
        <div class="box">
          <p>We can get this answer without using generating functions</p>
          <p>We can determine the class structure by knowing</p>
          <ul>
            <li>the day that the guest speaker speaks for the theory portion</li>
            <li>the last day of the theory portion</li>
            <li>the first day that the guest speaker leads the lab portion</li>
            <li>the second day that the guest speaker leads the lab portion</li>
          </ul>
          <p>Let `a,b,c,d in [n]` be the days that these occur</p>
          <p>Day `1` can be a day for the guest speaker</p>
          <div class="math">
            <p>`1 le a`</p>
          </div>
          <p>The last day of the theory portion can be any day after the guest speaker (including day `1`)</p>
          <div class="math">
            <p>`1 le a le b`</p>
          </div>
          <p>The first day that the guest speaker leads the lab portion cannot be day `1`</p>
          <div class="math">
            <p>`1 le a le b lt c`</p>
          </div>
          <p>The second day that the guest speaker leads the lab has to be different from the first</p>
          <div class="math">
            <p>`1 le a le b lt c lt d`</p>
          </div>
          <p>The second day that the guest speaker leads the lab can be the last day of the class</p>
          <div class="math">
            <p>`1 le a le b lt c lt d le n`</p>
          </div>
          <p>This is the same situation as</p>
          <div class="math">
            <p>`0 le a lt b lt c lt d le n`</p>
          </div>
          <p>So the problem becomes choosing `4` numbers from `n+1` numbers, which is `((n+1),(4))`</p>
          <p>Note that `((n+1),(n-3)) = ((n+1),(n+1-n+3)) = ((n+1),(4))`</p>
        </div>
      </div>
      <div class="box">
        <p>Example: Let `p_(le k)(n)` be the number of integer partitions of `n` using `le k` parts</p>
        <p>Note: After taking the transpose, `p_(le k)(n)` is also the number of integer partitions of `n` where all parts are `le k`</p>
        <p>We want a simple formula for `sum_(n ge 0) p_(le k)(n)x^n`</p>
        <p>For `k=1`, it is the number of partitions where all parts are `le 1`. To do this, we just repeat `1` `n` times</p>
        <div class="math">
          <p>`p_(le 1)(n) = 1` for all `n`</p>
        </div>
        <p>So the generating function is</p>
        <div class="math">
          <p>`sum_(n ge 0) p_(le 1)(n)x^n = sum_(n ge 0)x^n = 1/(1-x)`</p>
        </div>
        <p>For `k=2`, it is the number of partitions using only `1`'s and `2`'s. This is the same as splitting `[n]` into two consecutive pieces, and then splitting the first piece into consecutive pieces of size `1` and splitting the second piece into consecutive pieces of size `2`</p>
        <div class="box">
          <p>Example: `7 = 1+1+1+2+2`</p>
          <p>The first piece is `1|2|3` and the second piece is `4\ 5|6\ 7`</p>
        </div>
        <p>Let `alpha` be breaking up a set into singletons, `beta` be breaking up a set into consecutive `2`-element subsets</p>
        <p>Let `a_n` be the number of ways to do `alpha` to `[n]`, `b_n` be the number of ways to do `beta` to `[n]`</p>
        <p>There's only one way to split a set into singletons, so `a_n = 1`</p>
        <p>To split a set into consecutive `2`-element subsets, `n` has to be even. If it is, then there is one way to to do this, so `b_n = {(1 text( if n even)),(0 text( if n odd)):}`</p>
        <p>The product of the generating functions will give us what we want:</p>
        <div class="math">
          <p>`sum_(n ge 0) p_(le 2)(n)x^n = (sum_(n ge 0)a_nx^n)(sum_(n ge 0)b_nx^n)`</p>
          <p>`= (sum_(n ge 0)x^n)(sum_(n ge 0)x^(2n))`</p>
          <p>`= 1/(1-x)*1/(1-x^2)`</p>
          <p>`= 1/((1-x)(1-x^2))`</p>
        </div>
        <p>Another way to see how `sum_(n ge 0)p_(le 2)(n)x^n = 1/((1-x)(1-x^2))`:</p>
        <div class="math">
          <p>`1/((1-x)(1-x^2)) = (1+x+x^2+x^3+...)(1+x^2+x^4+x^6+...)`</p>
          <p>`= (1+x^1+x^(1+1)+x^(1+1+1)+...)(1+x^2+x^(2+2)+x^(2+2+2)+...)`</p>
        </div>
        <p>Multiplying these two expressions, we get the following table:</p>
        <div style="display: flex; justify-content: center;">
          <table>
            <tr>
              <td></td>
              <td>`1`</td>
              <td>`x^1`</td>
              <td>`x^(1+1)`</td>
              <td>`x^(1+1+1)`</td>
            </tr>
            <tr>
              <td>`1`</td>
              <td>`1`</td>
              <td>`x^1`</td>
              <td>`x^(1+1)`</td>
              <td>`x^(1+1+1)`</td>
            </tr>
            <tr>
              <td>`x^2`</td>
              <td>`x^2`</td>
              <td>`x^(1+2)`</td>
              <td>`x^(1+1+2)`</td>
              <td>`x^(1+1+1+2)`</td>
            </tr>
            <tr>
              <td>`x^(2+2)`</td>
              <td>`x^(2+2)`</td>
              <td>`x^(1+2+2)`</td>
              <td>`x^(1+1+2+2)`</td>
              <td>`x^(1+1+1+2+2)`</td>
            </tr>
            <tr>
              <td>`x^(2+2+2)`</td>
              <td>`x^(2+2+2)`</td>
              <td>`x^(1+2+2+2)`</td>
              <td>`x^(1+1+2+2+2)`</td>
              <td>`x^(1+1+1+2+2+2)`</td>
            </tr>
          </table>
        </div>
        <p>The result is that the exponents are partitions where are parts are `le 2`. The coefficient of `x^n` is the number of partitions of `n` where all parts are `le k`, i.e., `p_(le k)(n)`</p>
        <p>For `k=3`, we have</p>
        <div class="math">
          <p>`sum_(n ge 0) p_(le 3)(n)x^n = 1/((1-x)(1-x^2)(1-x^3))`</p>
        </div>
        <p>For general `k`, we have</p>
        <div class="math">
          <p>`sum_(n ge 0) p_(le k)(n)x^n = 1/(1-x)*1/(1-x^2)*...*1/(1-x^k)`</p>
          <p>`= prod_(i=1)^k 1/(1-x^i)`</p>
        </div>
        <p>Taking `k rarr oo`, we get</p>
        <div class="math">
          <p>`p_(le oo)(n) = p(n)`</p>
        </div>
        <p>which is the number of partitions of `n` where all parts are `le oo`, which is the same as the number of partitions of `n`</p>
        <p>So we have</p>
        <div class="math">
          <p>`sum_(n ge 0)p(n)x^n = prod_(i=1)^(oo) 1/(1-x^i) = 1/((1-x)(1-x^2)(1-x^3)...)`</p>
        </div>
        <div class="box">
          <p>It looks like we're taking the product of infinitely many things. So how is this well defined, i.e., how do we get an answer? Expanding the product, we get</p>
          <div class="math">
            <p>`1/((1-x)(1-x^2)(1-x^3)...) = (1+x+x^2+x^3+...)(1+x^2+x^4+x^6+...)(1+x^3+x^6+x^9+...)`</p>
          </div>
          <p>To multiply it all out, we choose one term from each set of parentheses and multiply all the terms together. We do this for all powers of `x`</p>
          <p>For `x^0`, we're forced to pick all `1`'s from each set of parentheses so the product will be `1`</p>
          <p>For `x^1`, we have to pick one `x` from the first set of parentheses and `1`'s from the rest</p>
          <p>For `x^2`, we have to pick an `x^2` from a set of parentheses and `1`'s from the rest</p>
          <p>For `x^3`, we have to pick an `x^3` or `x` and `x^2` and `1`'s from the rest</p>
          <p>This process repeats infinitely, but each step only requires a finite amount of multiplications to calculate the coefficient of `x^n`</p>
        </div>
      </div>
      <div class="box">
        <p>Example: Let `p_(text(odd))(n)` be the number of partitions of `n` where all parts are odd and let `p_(text(dist))(n)` be the number of partitions of `n` where all parts are distinct</p>
        <div style="display: flex; justify-content: center;">
          <table>
            <tr>
              <td>`n`</td>
              <td>`p_(text(odd))(n)`</td>
              <td>`p_(text(dist))(n)`</td>
            </tr>
            <tr>
              <td>`1`</td>
              <td>`(1)`</td>
              <td>`(1)`</td>
            </tr>
            <tr>
              <td>`2`</td>
              <td>`(1,1)`</td>
              <td>`(2)`</td>
            </tr>
            <tr>
              <td>`3`</td>
              <td>`(3)`,`(1,1,1)`</td>
              <td>`(3)`,`(2,1)`</td>
            </tr>
            <tr>
              <td>`4`</td>
              <td>`(3,1)`,`(1,1,1,1)`</td>
              <td>`(4)`,`(3,1)`</td>
            </tr>
            <tr>
              <td>`5`</td>
              <td>`(5)`,`(3,1,1)`,`(1,1,1,1,1)`</td>
              <td>`(5)`,`(4,1)`,`(3,2)`</td>
            </tr>
          </table>
        </div>
        <p>We can use generating functions to show that these two are the same number</p>
        <p>Theorem: `p_(text(odd))(n)` = `p_(text(dist))(n)`</p>
        <div class="collapse" id="odddistinctpartitions">
          <p>Using generating functions, the goal is to show that `sum_(n ge 0)p_(text(odd))(n)x^n = sum_(n ge 0)p_(text(dist))(n)x^n`</p>
          <p>From the previous example, we have</p>
          <div class="math">
            <p>`sum_(n ge 0)p_(text(odd))(n)x^n = (1/(1-x))(1/(1-x^3))(1/(1-x^5))...`</p>
          </div>
          <p>For `p_(text(dist))(n)x^n`, we can only use unique exponents, so we have</p>
          <div class="math">
            <p>`sum_(n ge 0)p_(text(dist))(n)x^n = (1+x)(1+x^2)(1+x^3)(1+x^4)...`</p>
          </div>
          <p>`1+x^k` can be rewritten as</p>
          <div class="math">
            <p>`1+x^k = (1-x^(2k))/(1-x^k)`</p>
          </div>
          <p>So `p_(text(dist))(n)x^n` can be rewritten as</p>
          <div class="math">
            <p>`sum_(n ge 0)p_(text(dist))(n)x^n = (1-x^2)/(1-x)*(1-x^4)/(1-x^2)*(1-x^6)/(1-x^3)*(1-x^8)/(1-x^4)*...`</p>
          </div>
          <p>All the terms in the numerator will cancel out the terms in the denominator with even exponents. What's left is the odd terms</p>
          <div class="math">
            <p>`= 1/(1-x)*1/(1-x^3)*1/(1-x^5)*...`</p>
            <p>`= sum_(n ge 0)p_(text(odd))(n)x^n`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#odddistinctpartitions">Proof</a>
      </div>
      <h3>Composition of Ordinary Generating Functions</h3>
      <p>We compose ordinary generating functions when we want to break up `[n]` into consecutive intervals, apply a structure on each interval, and then apply another structure on a set of those intervals.</p>
      <p>`a_n` is the number of ways to apply structure `alpha` on a set of size `n` and `a_0=0`. `h_n` is the number of ways to break `[n]` into consecutive intervals and place structure `alpha` on each interval. The generating functions are `A(x) = sum_(n ge 0) a_nx^n` and `H(x) = sum_(n ge 0) h_nx^n`.</p>
      <div class="box">
        <p>Theorem: `H(x) = 1/(1-A(x))`</p>
        <div class="collapse" id="composeogf">
          <p>`A(x)^k` is the ordinary generating function for the number of ways to break up `[n]` into `k` consecutive intervals and place structure `alpha` on each piece</p>
          <p>This is counted by `h_n` when we sum over all `k`</p>
          <p>So `H(x) = sum_(k ge 0) A(x)^k = 1/(1-A(x))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#composeogf">Proof</a>
      </div>
      <div class="box">
        <p>Example: There are `n` soldiers in a line and we want to split the line at several places to form teams of soldiers. Also, we want to assign a leader to each team. How many ways are there to do this?</p>
        <p>Let `a_n` be the number of ways to pick a leader from `n` people. Then `a_n = n`</p>
        <p>`A(x) = sum_(n ge 0) a_nx^n = sum_(n ge 0)nx^n = x/(1-x)^2`</p>
        <p>The answer is given by `h_n`</p>
        <div class="math">
          <p>`H(x) = 1/(1-A(x)) = 1/(1-x/(1-x)^2)`</p>
          <p>`= (1-x)^2/((1-x)^2-x)`</p>
          <p>`= (1-2x+x^2)/(1-3x+x^2)`</p>
        </div>
        <p>Using partial fractions, we get</p>
        <div class="math">
          <p>`h_n = 1/sqrt(5)((3+sqrt(5))/2)^n-1/sqrt(5)((3-sqrt(5))/2)^n`</p>
        </div>
      </div>
      <p>So far, we broke `[n]` into consecutive intervals and applied a structure to each interval. We could apply another structure `beta` on a subset of those intervals.</p>
      <p>`b_n` is the number of structures of type `beta` on a set of size `n`. The generating function is `B(x) = sum_(n ge 0) b_nx^n`. Now `h_n` is the number of ways to break `[n]` into consecutive intervals, place structure `alpha` on each interval, then place structure `beta` on a subset of those intervals.</p>
      <div class="box">
        <p>Theorem: `H(x) = B(A(x))`</p>
        <div class="collapse" id="composeogf2">
          <p>`b_kA(x)^k` is the ordinary generating function for the number of ways to break up `[n]` into `k` consecutive intervals, place structure `alpha` on each piece, and then place structure `beta` on the `k` pieces</p>
          <p>This is counted by `h_n` when we sum over all `k`</p>
          <p>So `H(x) = sum_(k ge 0) b_kA(x)^k = B(A(x))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#composeogf2">Proof</a>
      </div>
      <div class="box">
        <p>Going back to the soldier example, suppose we want to additionally pick some of the teams for night duty. How many ways are there to do this?</p>
        <p>Let `b_n` be the number of ways to pick some teams for night duty. This is the same as picking a subset, so `b_n = 2^n`</p>
        <p>`B(x) = sum_(n ge 0) b_nx^n = sum_(n ge 0) 2^nx^n = sum_(n ge 0) (2x)^n = 1/(1-2x)`</p>
        <p>From before, `A(x) = x/(1-x)^2`</p>
        <p>The number of ways to do this is counted by `h_n`</p>
        <div class="math">
          <p>`H(x) = B(A(x)) = 1/(1-(2x)/(1-x)^2)`</p>
          <p>`= (1-x)^2/((1-x)^2-2x)`</p>
          <p>`= (1-2x+x^2)/(1-4x+x^2)`</p>
        </div>
        <p>Using partial fractions, we would get our answer</p>
        <div class="box">
          <p>We could get the answer without using generating functions</p>
          <p>Each soldier could be</p>
          <ul>
            <li>the first soldier on a team for night duty</li>
            <li>the first soldier on a team not assigned to night duty</li>
            <li>not the first soldier on a team</li>
          </ul>
          <p>The only exception is the first soldier who only has two choices</p>
          <p>So there are two choices for the first soldier and three choices for the rest of the `n-1` soldiers</p>
          <p>The number of ways is `2*3^(n-1)`</p>
        </div>
      </div>
      <h2 id="catalannumbers">Catalan Numbers</h2>
      <p>Catalan numbers can be used to count a lot of things. One way to view them is the number of ways to balance `n` pairs of parentheses.</p>
      <div class="box">
        <p>Let `C_n` be the number of ways to write a balanced expression using `n` pairs of parentheses</p>
        <p>For example, for `n=3`</p>
        <div class="math">
          <p>`()()()`</p>
          <p>`(())()`</p>
          <p>`((()))`</p>
          <p>`(()())`</p>
          <p>`()(())`</p>
        </div>
        <p>`C_n` is also the same as the number of words with `n` left parentheses and `n` right parentheses such that every initial segment has at least as many `(` as `)`</p>
        <p>`C_n` is also the same as the number of sequences of `n` counts of `+1`'s and `n` counts of `-1`'s such that every initial partial sum is `ge 0`</p>
      </div>
      <p>There is some kind of recursive structure to these parentheses. For example, we can have a balanced pair of parentheses and put another pair of balanced parentheses inside. We can use this recursive structure to obtain a recurrence relation. It turns out that the recurrence relation will be nonlinear.</p>
      <div class="box">
        <p>Lemma: If `n ge 0`, then `C_n = sum_(i = 0)^(n-1)C_iC_(n-1-i)`</p>
        <div class="collapse" id="catalanproof">
          <p>Every expression starts with a `(` and is matched by some `)`</p>
          <p>In between those `()`, we can put another set of balanced parentheses</p>
          <ul>
            <li>Let `i` be the number of pairs inside</li>
            <li>We can put up to `n-1` pairs of parentheses inside</li>
            <li>Then there are `C_i` choices for `0 le i le n-1`</li>
          </ul>
          <p>After the `)`, we can put another set of balanced parentheses</p>
          <ul>
            <li>After putting `i` pairs inside the initial balanced parentheses, we have `n-(i+1) = n-1-i` pairs leftover</li>
            <li>Then there are `C_(n-1-i)` choices</li>
          </ul>
          <p>These choices are independent of each other, so there are `C_iC_(n-1-i)` total choices<p>
          <p>Since `i` can go from `0` to `n-1`, we have `sum_(i = 0)^(n-1)C_iC_(n-1-i)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#catalanproof">Proof</a>
      </div>
      <p>So we have a recurrence relation for the Catalan numbers. Now we can try to find a closed formula for `C_n` using generating functions. In this case, we can define the generating function `C(x) = sum_(n ge 0) C_nx^n` where `C_0 = 1`.</p>
      <div class="box">
        <p>We start by multiplying both sides of the recurrence relation by `x^n`</p>
        <div class="math">
          <p>`C_nx^n = sum_(i = 0)^(n-1)C_iC_(n-1-i)x^n`</p>
        </div>
        <p>And then summing over all positive `n`</p>
        <div class="math">
          <p>`sum_(n gt 0)C_nx^n = sum_(n gt 0) sum_(i = 0)^(n-1)C_iC_(n-1-i)x^n`</p>
        </div>
        <p>The left-hand side is `C(x)` without the `n=0` term (which is `C_0 = 1`), so the left-hand side evaluates to `C(x)-1`</p>
        <p>The right-hand side looks like the result of multiplying two generating functions</p>
        <p>`C(x)^2 = sum_(n ge 0) (sum_(i=0)^nC_iC_(n-i))x^n` by the definition of multiplying two generating functions</p>
        <p>`sum_(n gt 0) sum_(i = 0)^(n-1)C_iC_(n-1-i)x^n` almost looks like `C(x)^2`. We can manipulate it so that it does</p>
        <p>Since `n gt 0`, we can pull out an `x` from `C(x)^2`</p>
        <div class="math">
          <p>`x sum_(n gt 0) sum_(i=0)^(n-1)C_iC_(n-1-i)x^(n-1)`</p>
        </div>
        <p>Then we can re-index to get</p>
        <div class="math">
          <p>`x sum_(n ge 0) sum_(i=0)^n C_iC_(n-i)x^n`</p>
          <p>`= xC(x)^2`</p>
        </div>
        <p>So the right-hand side evaluates to `xC(x)^2`</p>
        <p>Which gives us</p>
        <div class="math">
          <p>`C(x)-1=xC(x)^2`</p>
          <p>`xC(x)^2-C(x)+1=0`</p>
        </div>
        <p>This tells us that `C(x)` is a solution to a quadratic equation `xt^2-t+1=0`. We can use the quadratic formula to solve for `t = C(x)`, which gives us</p>
        <div class="math">
          <p>`t = (1 +- sqrt(1-4x))/(2x)`</p>
        </div>
        <p>There are two possibilities for `t = C(x)`:</p>
        <ol>
          <li>`C(x) = (1 + sqrt(1-4x))/(2x) implies 2xC(x) = 1 + sqrt(1-4x)`</li>
          <li>`C(x) = (1 - sqrt(1-4x))/(2x) implies 2xC(x) = 1 - sqrt(1-4x)`</li>
        </ol>
        <p>There's only one correct choice for `C(x)`, so which one do we pick? Looking at `2xC(x)`, whatever `C(x)` is, when we multiply it with `2x`, there will be no constant term. So `1+sqrt(1-4x)` must not have a constant term either</p>
        <p>The constant term of `1+sqrt(1-4x)` is `1` plus whatever the constant term of `sqrt(1-4x)` is, which we can find by using the binomial theorem:</p>
        <div class="math">
          <p>`(1-4x)^(1/2) = sum_(n ge 0) ((1/2),(n)) (-4x)^n`</p>
        </div>
        <p>The constant term appears when `n=0`, so `((1/2),(0))=1` is the constant term</p>
        <ol>
          <li>The constant term of `1 + sqrt(1-4x)` is `2`</li>
          <li>The constant term of `1 - sqrt(1-4x)` is `0`</li>
        </ol>
        <p>So `C(x) = (1-sqrt(1-4x))/(2x)`</p>
        <div class="box">
          <p>Alternatively, looking at `2xC(x) = 1-sqrt(1-4x)`, if we plug in `x=0` on the left-hand side, we get `0`. So plugging in `x=0` on the right-hand side should give us `0` too</p>
          <div class="math">
            <p>`1+sqrt(1-4*0)`</p>
            <p>`= 1+sqrt(1)`</p>
            <p>`= 1+1 = 2`</p>
          </div>
          <div class="math">
            <p>`1-sqrt(1-4*0)`</p>
            <p>`= 1-sqrt(1)`</p>
            <p>`= 1-1 = 0`</p>
          </div>
          <p>So we pick the expression with the negative sign</p>
        </div>
        <p>To simplify this, we can use the binomial theorem (again):</p>
        <div class="math">
          <p>`(1-4x)^(1/2) = sum_(n ge 0) ((1/2),(n))(-4x)^n`</p>
        </div>
        <p>We can simplify this by expanding `((1/2),(n))`:</p>
        <div class="math">
          <p>`((1/2),(n)) = ((1/2)(-1/2)(-3/2)...(1/2-n+1))/(n!)`</p>
        </div>
        <p>So we have</p>
        <div class="math">
          <p>`sum_(n ge 0) ((1/2),(n))(-4x)^n = sum_(n ge 0) ((1/2)(-1/2)(-3/2)...(1/2-n+1))/(n!) (-4)^n x^n`</p>
          <p>`= sum_(n ge 0) (1/2)^n (1(-1)(-3)...(1-2n+2))/(n!) (-4)^n x^n`</p>
          <p>`= sum_(n ge 0) (-2)^n (1(-1)(-3)...(-2n+3))/(n!) x^n`</p>
          <p>`= -sum_(n ge 0) 2^n (1*1*3*...*(2n-3))/(n!) x^n`</p>
          <p>`= -sum_(n ge 0) 2^n (1*1*3*...*(2n-3))/(n!) * (2*4*6*...*(2n-2))/(2*4*6*...*(2n-2)) x^n`</p>
          <p>`= -sum_(n ge 0) 2^n ((2n-2)!)/(n!) * 1/(2*4*6*...*(2n-2)) x^n`</p>
          <p>`= -sum_(n ge 0) 2 ((2n-2)!)/(n!) * 1/(1*2*3*...*(n-1)) x^n`</p>
          <p>`= -2sum_(n ge 0) ((2n-2)!)/(n!(n-1)!) x^n`</p>
        </div>
        <p>So `(1-4x)^(1/2) = -2sum_(n ge 0) ((2n-2)!)/(n!(n-1)!) x^n`</p>
        <p>Since we're looking for `C(x)`,</p>
        <div class="math">
          <p>`C(x) = (1-(1-4x)^(1/2))/(2x)`</p>
          <p>`= 1/(2x)(1-(1-4x)^(1/2))`</p>
          <p>`= 1/(2x)(1+2sum_(n ge 0) ((2n-2)!)/(n!(n-1)!) x^n)`</p>
          <p>`= 1/(2x)(1-1+2sum_(n ge 1) ((2n-2)!)/(n!(n-1)!) x^n)` (taking out the constant term)</p>
          <p>`= sum_(n ge 1) ((2n-2)!)/(n!(n-1)!) x^(n-1)`</p>
          <p>`= sum_(n ge 1) ((2(n-1))!)/(n!(n-1)!) x^(n-1)`</p>
          <p>`= sum_(n ge 0) ((2n)!)/((n+1)!n!) x^n`</p>
        </div>
        <p>So `C(x) = sum_(n ge 0) ((2n)!)/((n+1)!n!) x^n` and `C_n = ((2n)!)/((n+1)!n!)`, which looks like a binomial coefficient after pulling out `1/(n+1)`:</p>
        <div class="math">
          <p>`C_n = 1/(n+1)((2n)!)/(n!n!)`</p>
          <p>`= 1/(n+1)((2n),(n))`</p>
        </div>
      </div>
      <div class="box">
        <p>Other Catalan objects for `n=3`</p>
        <p>1) The number of ways to apply binary operation `text(*)` to `n+1` inputs</p>
        <div class="math">
          <p>`a text(*) (b text(*) (c text(*) d))`</p>
          <p>`a text(*) ((b text(*) c) text(*) d)`</p>
          <p>`(a text(*) b) text(*) (c text(*) d)`</p>
          <p>`((a text(*) b) text(*) c) text(*) d`</p>
          <p>`(a text(*) (b text(*) c)) text(*) d`</p>
        </div>
        <div class="box">
          <p>(Look at 2) first)
          <p>Let `alpha_n` be the number of ways to apply binary operation `text(*)` to `n+1` inputs</p>
          <p>There's a bijection between 1) and 2)</p>
          <p>Place a `text(*)` inside each node</p>
          <p>From the bottom, combine leaves into one expression with `text(*)`</p>
          <div class="math">
            <img class="img-fluid" src="../pictures/combinatorics/startrees.jpg">
          </div>
          <p>To go the other way, start with the outermost `text(*)` and make that the root</p>
          <p>Make the left and right part subtrees</p>
          <p>So `alpha_n = beta_n = C_n`</p>
        </div>
        <p>2) The number of rooted binary trees with `n+1` leaves</p>
        <div class="math">
          <img class="img-fluid" src="../pictures/combinatorics/binarytrees.png">
        </div>
        <div class="box">
          <p>Let `beta_n` be the number of ways to form a rooted binary tree with `n+1` leaves</p>
          <p>Remove the root to form two trees (left and right)</p>
          <p>The left part has `i` leaves, so there are `beta_(i-1)` ways to do this</p>
          <p>The right part has `n+1-i` leaves, so there are `beta_(n-i)` ways to do this</p>
          <p>The left part needs to have at least one leaf and the right part also needs to have at least one leaf, so `1 le i le n`</p>
          <p>`beta_n = sum_(i=1)^n beta_(i-1)beta_(n-i) = sum_(i=0)^(n-1)beta_ibeta_(n-1-i)`</p>
          <p>So `beta_n` satisifies the same recurrence as the Catalan numbers</p>
        </div>
        <p>3) The number of forward paths from `(0,0)` to `(n,n)` which do not go above the line `x=y`</p>
        <div class="math">
          <img class="img-fluid" src="../pictures/combinatorics/forwardpaths.png">
        </div>
        <div class="box">
          <p>Let `gamma_n` be the number of forward paths from `(0,0)` to `(n,n)` which do not go above the line `x=y`</p>
          <p>There is a bijection between 3) and the Catalan numbers</p>
          <p>A right step corresponds to a `(` and a step up corresponds to a `)`</p>
          <p>So `gamma_n = C_n`</p>
          <p>The forward paths also satisify the recurrence relation</p>
          <p>Given a path, let `i` be the smallest positive value such that `(i,i)` is on `x=y`</p>
          <p>Chop the path into two pieces</p>
          <p>The first piece is the path from `(0,0)` to `(i,i)` which does not touch `x=y` except at the endpoints</p>
          <ul>
            <li>If we remove the first and last steps, we end up with the path `(1,0)` to `(i,i-1)` which does not go above `x=y+1`</li>
            <li>If we shift by `(-1,0)`, we get a path from `(0,0)` to `(i-1,i-1)` not going above `x=y`, for which there are `gamma_(i-1)` paths</li>
          </ul>
          <p>The second piece is the path from `(i,i)` to `(n,n)`</p>
          <ul>
            <li>This is the same as the path from `(0,0)` to `(n-i,n-i)`, for which there are `gamma_(n-i)` paths</li>
          </ul>
          <p>So the total number of paths is `gamma_n = sum_(i=1)^ngamma_(i-1)gamma_(n-i) = sum_(i=0)^(n-1)gamma_(i)gamma_(n-1-i)`</p>
          <p>`gamma_n` satisifies the same recurrence as the Catalan numbers</p>
        </div>
      </div>
      <h2 id="exponentialgeneratingfunctions">Exponential Generating Functions</h2>
      <p>Exponential generating functions are similar to ordinary generating functions. They're still formal power series, but they encode sequences differently. As such, the interpretations of operations, such as multiplication and composition, have different meanings and can be used for different applications of problems.</p>
      <p>For example, when using ordinary generating functions, we were constrained to consecutive intervals. But it may be more natural to form groups where the elements are not consecutive. Exponential generating functions give us a way to do that.</p>
      <div class="box">
        <p>Given a sequence `a_0, a_1, a_2, ...`, the <b>exponential generating function</b> (egf) is</p>
        <div class="math">
          <p>`A(x) = sum_(n ge 0) a_n/(n!)x^n`</p>
        </div>
        <p>When `a_n=1` for all `n`, we use `e^x` to denote `sum_(n ge 0) 1/(n!)x^n`</p>
      </div>
      <div class="box">
        <p>Taking the derivative (bringing down an `n`) is like shifting the sequence by one</p>
        <div class="math">
          <p>`A(x) = sum_(n ge 0) a_n/(n!)x^n`</p>
          <p>`A(x) = a_0 + sum_(n ge 1) a_n/(n!)x^n`</p>
          <p>`A'(x) = sum_(n ge 1) (na_n)/(n!)x^(n-1)`</p>
          <p>`A'(x) = sum_(n ge 1) a_n/((n-1)!)x^(n-1)`</p>
          <p>`A'(x) = sum_(n ge 0) a_(n+1)/(n!)x^n`</p>
        </div>
      </div>
      <div class="box">
        <p>Example: Suppose we have a sequence defined by `a_0 = 1` and `a_n = n(a_(n-1)-n+2)` for `n ge 1`</p>
        <p>Let's try to encode it as an ordinary generating function</p>
        <p>So let `A(x) = sum_(n ge 0)a_nx^n` be the ogf</p>
        <p>Multiplying the recurrence by `x^n` and summing over all `n ge 1`, we get</p>
        <div class="math">
          <p>`sum_(n ge 1)a_nx^n = sum_(n ge 1)(na_(n-1)-n^2+2n)x^n`</p>
          <p>`A(x)-a_0 = sum_(n ge 1)na_(n-1)x^n + sum_(n ge 1)(-n^2+2n)x^n`</p>
          <p>`A(x)-a_0 = xsum_(n ge 1)na_(n-1)x^(n-1) + sum_(n ge 1)(-n^2+2n)x^n`</p>
          <p>`A(x)-a_0 = xsum_(n ge 0)na_nx^n + sum_(n ge 1)(-n^2+2n)x^n`</p>
          <p>`A(x)-a_0 = x^2A'(x) + sum_(n ge 1)(-n^2+2n)x^n`</p>
        </div>
        <p>Now we have a differential equation, which would be too complicated to deal with</p>
        <p>Instead, let's try to encode this sequence as an exponential generating function</p>
        <p>So let `A(x) = sum_(n ge 0) a_n/(n!)x^n` be the egf</p>
        <p>We could substitute in the recurrence after changing the summation to `n ge 1` (by pulling out the constant term)</p>
        <div class="math">
          <p>`A(x) = sum_(n ge 0)a_n/(n!)x^n`</p>
          <p>`= a_0 + sum_(n ge 1)a_n/(n!)x^n`</p>
          <p>`= 1 + sum_(n ge 1)(na_(n-1)-n(n-2))/(n!)x^n`</p>
          <p>`= 1 + sum_(n ge 1)(na_(n-1))/(n!)x^n - sum_(n ge 1)(n(n-2))/(n!)x^n`</p>
          <p>`= 1 + sum_(n ge 1)a_(n-1)/((n-1)!)x^n - sum_(n ge 1)(n-2)/((n-1)!)x^n`</p>
          <p>`= 1 + xsum_(n ge 1)a_(n-1)/((n-1)!)x^(n-1) - xsum_(n ge 1)(n-2)/((n-1)!)x^(n-1)`</p>
          <p>`= 1 + xsum_(n ge 0)a_n/(n!)x^n - xsum_(n ge 0)(n-1)/(n!)x^n`</p>
          <p>`= 1 + xA(x) - xsum_(n ge 0)n/(n!)x^n + xsum_(n ge 0) 1/(n!)x^n`</p>
          <p>`= 1 + xA(x) - xsum_(n ge 1)1/((n-1)!)x^n + xe^x`</p>
          <p>`= 1 + xA(x) - x^2sum_(n ge 1)1/((n-1)!)x^(n-1) + xe^x`</p>
          <p>`= 1 + xA(x) - x^2sum_(n ge 0)1/(n!)x^n + xe^x`</p>
          <p>`= 1 + xA(x) - x^2e^x + xe^x`</p>
        </div>
        <p>So we have</p>
        <div class="math">
          <p>`A(x) = 1 + xA(x) - x^2e^x + xe^x`</p>
          <p>`A(x) - xA(x) = 1 - x^2e^x + xe^x`</p>
          <p>`A(x)(1-x) = 1 - x^2e^x + xe^x`</p>
          <p>`A(x) = (1 - x^2e^x + xe^x)/(1-x)`</p>
          <p>`= 1/(1-x) + ((x-x^2)e^x)/(1-x)`</p>
          <p>`= 1/(1-x) + (x(1-x)e^x)/(1-x)`</p>
          <p>`= 1/(1-x) + xe^x`</p>
          <p>`= sum_(n ge 0)x^n + xsum_(n ge 0)1/(n!)x^n`</p>
          <p>`= sum_(n ge 0)x^n + sum_(n ge 0)1/(n!)x^(n+1)`</p>
          <p>`= sum_(n ge 0)x^n + sum_(n ge 1)1/((n-1)!)x^n`</p>
        </div>
        <p>Normally for ordinary generating functions, we would get our answer `a_n` by looking at the coefficient of `x^n`. However, with exponential generating functions, we have `sum_(n ge 0)a_n/(n!)x^n`. So the summations have to be in that form before we can extract the coefficient</p>
        <div class="math">
          <p>`= sum_(n ge 0)(n!)/(n!)x^n + sum_(n ge 1)n/(n!)x^n`</p>
          <p>`= 1 + sum_(n ge 1)(n!)/(n!)x^n + sum_(n ge 1)n/(n!)x^n`</p>
          <p>`= 1 + sum_(n ge 1)(n!+n)/(n!)x^n`</p>
        </div>
        <p>So `a_n = n!+n`</p>
      </div>
      <h3>Product of Exponential Generating Functions</h3>
      <p>The product of two exponential generating functions can be thought of as putting a structure on a subset of `[n]` and putting another structure on the complement.</p>
      <p>Let `alpha, beta` be structures on sets. Let `a_n` be the number of ways to do `alpha` on a set of size `n`. Let `b_n` be the number of ways to do `beta` on a set of size `n`. Let `c_n` be the number of ways to pick a subset `S sube [n]`, put `alpha` on `S` and put `beta` on `[n]\\S`.</p>
      <p>Then `sum_(n ge 0)c_n/(n!)x^n = (sum_(n ge 0)a_n/(n!)x^n)(sum_(n ge 0)b_n/(n!)x^n)`.</p>
      <p>More generally, we can handle more than two structures. If we had `k` structures, the product of their egf's is the egf for the number of ways to write `[n] = S_1 uu S_2 uu ... uu S_k` such that no subsets overlap and we put the `i^(th)` structure on `S_i`.</p>
      <div class="box">
        <p>Let `A(x) = sum_(n ge 0)a_n/(n!)x^n` and `B(x) = sum_(n ge 0) b_n/(n!)x^n`</p>
        <p>Lemma: `A(x)B(x) = sum_(n ge 0) c_n/(n!)x^n` where `c_n = sum_(i=0)^n ((n),(i)) a_ib_(n-i)`</p>
        <div class="collapse" id="productegf">
          <p>The coefficient of `x^n` in `A(x)B(x)` is `sum_(i=0)^na_i/(i!)b_(n-i)/((n-i)!)` by the definition of multiplying two power series</p>
          <p>But it is also equal to `c_n/(n!)`</p>
          <div class="math">
            <p>`c_n/(n!) = sum_(i=0)^n(a_ib_(n-i))/(i!(n-i)!)`</p>
            <p>`c_n = sum_(i=0)^n(n!a_ib_(n-i))/(i!(n-i)!)`</p>
            <p>`c_n = sum_(i=0)^n((n),(i))a_ib_(n-i)`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#productegf">Proof</a>
      </div>
      <div class="box">
        <p>Let `a_n` be the number of structures of type `alpha` on a set of size `n`</p>
        <p>Let `b_n` be the number of structures of type `beta` on a set of size `n`</p>
        <p>Then `((n),(i))a_ib_(n-i)` is the number of ways to pick a subset `S sube [n]` of size `i`, putting structure `alpha` on `S`, and putting structure `beta` on `[n]\\S`</p>
        <p>So `c_n` is the number of ways to pick subsets (possibly empty) of `[n]`, putting structure `alpha` on `S`, and putting structure `beta` on `[n]\\S`</p>
      </div>
      <div class="box">
        <p>Example: There are `n` football players and we want to split them up into two groups. Both groups will be assigned an ordering, but the each player in the second group also gets to choose one of three colors for their uniforms. How many ways are there to do this?</p>
        <p>Let `alpha` be the ways to order a set. So `a_n = n!`</p>
        <p>Let `beta` be the ways to order a set and assign a color to each element. So `b_n = 3^n n!`</p>
        <p>`A(x) = sum_(n ge 0)a_n/(n!)x^n = sum_(n ge 0)x^n = 1/(1-x)`</p>
        <p>`B(x) = sum_(n ge 0)b_n/(n!)x^n = sum_(n ge 0)3^nx^n = 1/(1-3x)`</p>
        <p>`C(x) = A(x)B(x) = 1/(1-x)*1/(1-3x)`</p>
        <p>Using partial fractions, we get</p>
        <div class="math">
          <p>`1/(1-x)*1/(1-3x) = (3/2)/(1-3x)-(1/2)/(1-x)`</p>
          <p>`= 3/2sum_(n ge 0)3^nx^n - 1/2sum_(n ge 0)x^n`</p>
          <p>`= 3/2sum_(n ge 0)(3^n n!)/(n!)x^n - 1/2sum_(n ge 0)(n!)/(n!)x^n`</p>
        </div>
        <p>So `c_n = 3/2 3^n n! - 1/2 n!`</p>
      </div>
      <div class="box">
        <p>There's a trick for getting rid of odd/even terms of a formal power series `A(x) = sum_(n ge 0)a_nx^n`</p>
        <p>To get rid of all odd terms, add `A(-x)` and divide the sum by `2`:</p>
        <div class="math">
          <p>`A(x)+A(-x) = sum_(n ge 0)a_nx^n + sum_(n ge 0)(-1)^na_nx^n`</p>
        </div>
        <p>When `n` is odd, the terms will cancel each other out, so there are only even terms leftover</p>
        <p>When `n` is even, the terms will be added, so we need to divide by `2`</p>
        <div class="math">
          <p>`(A(x)+A(-x))/2 = sum_(n ge 0)a_(2n)x^(2n)`</p>
        </div>
        <p>To get rid of all even terms, subtract `A(-x)` and divide the difference by `2`:</p>
        <div class="math">
          <p>`A(x)-A(-x) = sum_(n ge 0)a_nx^n - sum_(n ge 0)(-1)^na_nx^n`</p>
        </div>
        <p>When `n` is even, the terms will cancel each other out, so there are only odd terms leftover</p>
        <p>When `n` is odd, the terms will be added, so we need to divide by `2`</p>
        <div class="math">
          <p>`(A(x)-A(-x))/2 = sum_(n ge 0)a_(2n+1)x^(2n+1)`</p>
        </div>
      </div>
      <div class="box">
        <p>Example: There are `n` distinguishable telephone poles and we want to paint each of them either red or blue. But the number of blue poles must be even. How many ways are there to do this?</p>
        <p>Let `R(x)` be the egf for painting `n` poles red. There's only one way to paint `n` poles red, so `R(x) = sum_(n ge 0)1/(n!)x^n = e^x`</p>
        <p>Let `B(x)` be the egf for painting `n` poles blue. There's only one way to paint `n` poles blue if `n` is even and zero ways if `n` is odd, so `B(x) = sum_(n ge 0)1/((2n)!)x^(2n) = (e^x+e^(-x))/2`</p>
        <div class="math">
          <p>`sum_(n ge 0)c_n/(n!)x^n = R(x)B(x) = e^x((e^x+e^(-x))/2)`</p>
          <p>`= (e^(2x)+1)/2`</p>
          <p>`= 1/2e^(2x) + 1/2`</p>
          <p>`= 1/2 sum_(n ge 0) 1/(n!)(2x)^n + 1/2`</p>
          <p>`= 1/2 sum_(n ge 0) 2^n/(n!)x^n + 1/2`</p>
          <p>`= sum_(n ge 0) 2^(n-1)/(n!)x^n + 1/2`</p>
          <p>`= 1 + sum_(n ge 1) 2^(n-1)/(n!)x^n`</p>
        </div>
        <p>So `c_0 = 1` and `c_n = 2^(n-1)`</p>
        <div class="box">
          <p>We can get this answer without using generating functions</p>
          <p>If we knew which poles were blue, then we automatically know which ones are red too</p>
          <p>So all we need to do is pick a subset of even size of `n`</p>
          <p>There are `2^(n-1)` subsets of even size of `n`</p>
        </div>
      </div>
      <p>We can use the product of egf's to get an egf for the Stirling numbers.</p>
      <div class="box">
        <p>Define `a_n=1` if `n ge 0` and `a_0=0`</p>
        <p>We can interpret this as counting the number of ways for a set to be nonempty</p>
        <p>`A(x) = sum_(n ge 0)a_n/(n!)x^n = sum_(n ge 1)x^n/(n!) = e^x-1`</p>
        <p>`A(x)^2 = sum_(n ge 0)c_n/(n!)x^n`</p>
        <p>`c_n` is the number of ways to pick a subset `S sube [n]` such that `S != O/` and `[n]\\S != O/`</p>
        <p>The Stirling numbers, `S(n,k)`, counted the number of ways to break up a set of size `n` into `k` nonempty pieces without regard to order. In this case, `k=2` and the order matters. `S` is like the first subset and `[n]\\S` is like the second subset. So this is ordered set partitions with two blocks, the number of which is counted by `2!S(n,2)`</p>
        <p>But `c_n` is also the number of ordered set partitions of `[n]` into `2` blocks. So `c_n = 2!S(n,2)`</p>
        <p>Plugging that back into `A(x)^2`, we get</p>
        <div class="math">
          <p>`A(x)^2 = sum_(n ge 0)c_n/(n!)x^n = sum_(n ge 0)(2!S(n,2))/(n!)x^n`</p>
        </div>
        <p>But `A(x)^2` is also equal to `(e^x-1)^2`, so we get</p>
        <div class="math">
          <p>`sum_(n ge 0)(2!S(n,2))/(n!)x^n = (e^x-1)^2`</p>
        </div>
        <p>`(e^x-1)^2` is the exponential generating function for ordered set partitions into two blocks</p>
        <p>Dividing by `2!`, we also get</p>
        <div class="math">
          <p>`sum_(n ge 0)(S(n,2))/(n!)x^n = (e^x-1)^2/(2!)`</p>
        </div>
        <p>`(e^x-1)^2/(2!)` is the exponential generating function for set partitions into two blocks, i.e., `S(n,2)`</p>
        <p>For general `k`, if we take `A(x)^k`, then that would be counting the number of ways to break `[n]` into `k` nonempty subsets, which is exactly the number of ordered set partitions into `k` blocks</p>
        <p>So more generally,</p>
        <div class="math">
          <p>`(e^x-1)^k = sum_(n ge 0)(k!S(n,k))/(n!)x^n`</p>
          <p>`(e^x-1)^k/(k!) = sum_(n ge 0)(S(n,k))/(n!)x^n`</p>
        </div>
      </div>
      <p>Using the exponential generating function for the Stirling numbers, we can also get one for the Bell numbers, `B(n) = sum_(k=0)^nS(n,k)`, which are the number of set partitions of `[n]`.</p>
      <div class="box">
        <p>The exponential generating function would be `sum_(n ge 0)(B(n))/(n!)x^n`</p>
        <div class="math">
          <p>`= sum_(n ge 0)1/(n!)[sum_(k ge 0)S(n,k)]x^n`</p>
          <p>`= sum_(k ge 0)sum_(n ge 0)(S(n,k))/(n!)x^n`</p>
          <p>`= sum_(k ge 0)(e^x-1)^k/(k!)`</p>
          <p>`= e^(e^x-1)`</p>
        </div>
      </div>
      <p>The advantage of having formulas like these is that it makes taking products much simpler when the formulas are nice and compact, possibly leading to simplifications. It's pretty hard to work with a bunch of summations.</p>
      <p>While they are clean formulas, they are often difficult to work with, compared to the formulas obtained from ordinary generating functions, which are usually rational expressions that can be simplified by partial fraction decomposition and expressed as geometric series. Here, there's no easy way to see what the `n^(th)` coefficient of something like `e^(e^x-1)` is.</p>
      <h3>Compositions of Exponential Generating Functions</h3>
      <p>We compose exponential generating functions when we want to break up `[n]` into blocks, apply a structure on each block, and then apply another structure on a set of those blocks.</p>
      <p>Let `alpha` be a structure on a set.</p>
      <p>Let `a_n` be the number of ways to do `alpha` on a set of size `n` (assume `a_0=0`).</p>
      <p>Define `h_n` to be the number of ways to pick a set partition on `[n]` into `k` blocks for some `k` and put structure `alpha` on each block.</p>
      <p>The egf's are `A(x)=sum_(n ge 0)a_n/(n!)x^n` and `H(x) = sum_(n ge 0)h_n/(n!)x^n`.</p>
      <div class="box">
        <p>Theorem: `H(x)=e^(A(x))`</p>
        <div class="collapse" id="compositionegf">
          <p>`A(x)^k` is the egf for the number of ways to write `[n] = S_1 uu S_2 uu ... uu S_k` such that the `S_i`'s don't overlap and put structure `alpha` on each `S_i`</p>
          <p>Since now the order doesn't matter, we divide by `k!` to get `(A(x)^k)/(k!)`</p>
          <p>Considering all `k`, we get `H(x) = sum_(k ge 0) (A(x)^k)/(k!) = e^(A(x))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#compositionegf">Proof</a>
      </div>
      <div class="box">
        <p>Example: A bijection `f:S rarr S` is an involution if `f circ f = id_s`. Applying the function to one element twice results in the original element</p>
        <p>Let `h_n` be the number of involutions of a set of size `n`</p>
        <p>Find a formula for `H(x) = sum_(n ge 0)h_n/(n!)x^n`</p>
        <p>Involutions are built out of two pieces:</p>
        <ul>
          <li>elements that go to themselves</li>
          <li>pairs of elements that get swapped</li>
        </ul>
        <p>So we can think of involutions as set partitions of `[n]` into blocks of size `1` or `2`<p>
        <ul>
          <li>elements in the `1`-block are elements that go to themselves</li>
          <li>elements in the `2`-block are elements that get swapped</li>
        </ul>
        <p>Let `alpha` be the structure where we apply the identity function on an element or swap two elements</p>
        <p>Then `a_1=a_2=1` and `a_n=0` otherwise</p>
        <p>`A(x) = sum_(n ge 0)a_n/(n!)x^n`</p>
        <div class="math">
          <p>`= x + (x^2)/(2!)`</p>
        </div>
        <p>`H(x) = e^(A(x))`</p>
        <div class="math">
          <p>`= e^(x+(x^2)/(2!))`</p>
        </div>
      </div>
      <div class="box">
        <p>Example: Let `h_n` be the number of ways to split up `n` people into nonempty groups and have each sit in a circle</p>
        <p>Find a formula for `H(x) = sum_(n ge 0)h_n/(n!)x^n`</p>
        <p>Let `alpha` be the number of ways to circularly order a set</p>
        <p>There are `n!` ways to order people in a circle, but `n` rotations will be the same ordering</p>
        <p>So `a_n = (n!)/n = (n-1)!` and `a_0=0`</p>
        <p>`A(x) = sum_(n ge 0)a_n/(n!)x^n`</p>
        <div class="math">
          <p>`= sum_(n ge 1) ((n-1)!)/n!x^n`</p>
          <p>`= sum_(n ge 1) (x^n)/n`</p>
          <p>`= log(1/(1-x))`</p>
        </div>
        <p>`H(x) = e^(A(x))`</p>
        <div class="math">
          <p>`= e^(log(1/(1-x)))`</p>
          <p>`= 1/(1-x)`</p>
        </div>
        <p>In fact, we can actually find a formula for the `h_n`</p>
        <div class="math">
          <p>`sum_(n ge 0)h_n/(n!)x^n = 1/(1-x) = sum_(n ge 0)x^n`</p>
          <p>`h_n/(n!) = 1`</p>
          <p>`h_n = n!`</p>
        </div>
      </div>
      <p>After breaking up `[n]` into blocks and putting structure `alpha` on each block, we could take a set of those blocks and put another structure `beta` on a set of those blocks.</p>
      <p>Let `beta` be a structure on a set. Let `b_n` be the number of ways to do `beta` on a set of size `n`. The generating function is `B(x) = sum_(n ge 0)b_n/(n!)x^n`.</p>
      <p>Now let `h_n` be the number of ways to pick a set partition of `[n]`, put `alpha` on each block, and put `beta` on a set of blocks.</p>
      <div class="box">
        <p>Theorem: `H(x) = B(A(x))`</p>
        <p>This is the generalized version of the theorem `H(x) = e^(A(x))` where `B(x) = sum_(n ge 0)1/(n!)x^n = e^x` (all the `b_i`'s are `1`)</p>
      </div>
      <h2 id="lagrangeinversion">Lagrange Inversion</h2>
      <p>The Lagrange inversion formula is a technique for extracting coefficients from a formal power series that satisifies a certain identity.</p>
      <div class="box">
        <p>Suppose `R(x) = sum_(n ge 0)r_n/(n!)x^n` satisfies `R(x) = xe^(R(x))`</p>
        <p>It's difficult to isolate `R(x)` in this situation</p>
        <p>One thing we could do is to solve for the coefficients one by one</p>
        <p>`r_0 = 0` because there's no constant term in `xe^(R(x))`</p>
        <p>This means that the lowest degree term of `R(x)` is `r_1x^1`, which means that the lowest degree term of `R(x)^n` is `r_1^nx^n`</p>
        <p>Rewriting `R(x)=xe^(R(x))` we get</p>
        <div class="math">
          <p>`R(x) = xsum_(n ge 0)1/(n!)R(x)^n`</p>
          <p>`= x(1 + R(x) + (R(x)^2)/(2!) + (R(x)^3)/(3!) + ...)`</p>
        </div>
        <p>If we want to find `r_n`, then we only need to consider the first `n` terms, i.e., `x(1+R(x)+...+(R(x)^(n-1))/((n-1)!))`</p>
        <p>By definition, `r_1=[x^1]R(x)=[x^1]xe^(R(x))`</p>
        <p>From the observation above, we don't need to consider the whole summation; we only need to look at the first term</p>
        <p>So `r_1 = [x^1](x(1)) = 1`</p>
        <p>`r_2 = [x^2]R(x) = [x^2]e^(R(x))`</p>
        <div class="math">
          <p>`= [x^2](x(1+R(x)))`</p>
          <p>`= [x^2](x+xR(x))`</p>
          <p>`= [x^2]x + [x^2]xR(x)`</p>
          <p>`= 0 + [x^1]R(x)`</p>
          <p>`= r_1 = 1`</p>
        </div>
        <p>`r_3 = [x^3]R(x) = [x^3]e^(R(x))`</p>
        <div class="math">
          <p>`= [x^3](x(1+R(x)+(R(x)^2)/(2!)))`</p>
          <p>`= [x^3](x+xR(x)+(xR(x)^2)/(2!))`</p>
          <p>`= [x^3]x + [x^3]xR(x) + [x^3](xR(x)^2)/(2!)`</p>
          <p>`= 0 + [x^2]R(x) + 1/2[x^2]R(x)^2`</p>
          <p>`= 0 + r_2 + 1/2(r_0r_2 + r_1r_1 + r_2r_0)`</p>
          <p>`= 1 + 1/2 = 3/2`</p>
        </div>
        <p>And we could repeat this process for the rest of the coefficients</p>
      </div>
      <p>The Lagrange inversion formula gives us a way to find the coefficient directly without computing previous coefficients.</p>
      <div class="box">
        <p>Let `G(x)` be a formal power series with a nonzero constant term.</p>
        <p>Suppose `A(x)` is a formal power series such that `A(x) = xG(A(x))`.</p>
        <p>Theorem: `[x^n]A(x) = 1/n[x^(n-1)](G(x)^n)` for `n gt 0`</p>
      </div>
      <div class="box">
        <p>Going back to the previous example, we can let `G(x) = e^x` and `A(x) = R(x)`</p>
        <p>By the theorem, `r_n = [x^n]R(x)`</p>
        <div class="math">
          <p>`= 1/n[x^(n-1)]e^(nx)`</p>
          <p>`= 1/n[x^(n-1)]sum_(k ge 0)1/(k!)(nx)^k`</p>
          <p>`= 1/n(1/((n-1)!)n^(n-1))`</p>
          <p>`= n^(n-1)/(n!)`</p>
        </div>
        <p>This formula agrees with the previous calculations</p>
        <div class="math">
          <p>`r_1 = 1^0/(1!) = 1`</p>
          <p>`r_2 = 2^1/(2!) = 1`</p>
          <p>`r_3 = 3^2/(3!) = 9/6 = 3/2`</p>
        </div>
      </div>
      <p>We can use the Lagrange inversion formula to get the formula for the Catalan numbers fairly easily.</p>
      <div class="box">
        <p>Before, we showed that `C(x) = 1+xC(x)^2`</p>
        <p>This isn't in the correct form to use the theorem because of the `1+`. (Also, if we were to use the theorem, then `C(x)` shouldn't have a constant term, but we know that `c_0=1`)</p>
        <p>To fix these problems, we could subtract off the constant term</p>
        <p>Define `A(x) = C(x)-1`. Now we could use the theorem on `A(x)`</p>
        <p>Substituting the identity for `A(x)` we get</p>
        <div class="math">
          <p>`A(x)+1 = 1+x(A(x)+1)^2`</p>
          <p>`A(x) = x(A(x)+1)^2`</p>
        </div>
        <p>Let `G(x) = (x+1)^2`, which has a nonzero constant term `1`</p>
        <p>So `A(x)=xG(A(x)) implies [x^n]A(x) = 1/n[x^(n-1)](G(x)^n) = 1/n[x^(n-1)](x+1)^(2n)`</p>
        <div class="math">
          <p>`= 1/n[x^(n-1)]sum_(k ge 0)((2n),(k))x^k`</p>
          <p>`= 1/n((2n),(n-1))`</p>
          <p>`= 1/n((2n)!)/((n-1)!(n+1)!)`</p>
          <p>`= ((2n)!)/(n!(n+1)!)`</p>
          <p>`= ((2n)!)/(n!n!)1/(n+1)`</p>
          <p>`= 1/(n+1)((2n),(n))`</p>
        </div>
        <p>This is the coefficient of `A(x)`, but what we're looking for is the coefficient of `C(x)`</p>
        <p>Well the coefficients of `A(x)=C(x)-1` are the same as those for `C(x)` except for the constant term</p>
        <p>So `[x^n]A(x) = [x^n]C(x)` for `n gt 0` `implies C_n = 1/(n+1)((2n),(n))`</p>
      </div>
      <p>We can generalize the Catalan numbers in a way that is compatible with the Lagrange inversion formula.</p>
      <div class="box">
        <p>Before, we showed that `C_n` is the number of rooted binary trees with `n+1` leaves</p>
        <p>We could generalize this so that `c_n` is the number of rooted `k`-ary trees with `n` internal vertices</p>
        <p>Let `C(x) = sum_(n ge 0)c_nx^n` be the ordinary generating function for `c_n`</p>
        <p>Removing the root, we get `k` smaller trees</p>
        <p>Let `n_i` be the number of internal vertices of the `i^(th)` tree (`n_1+...+n_k=n-1`)</p>
        <p>For this choice, there are `c_(n_1), c_(n_2), ..., c_(n_k)` possibilities</p>
        <p>So `c_n = sum_(n_1+n_2+...n_k=n-1)c_(n_1)c_(n_2)...c_(n_k)` for `n ge 1`</p>
        <p>This is a product of `k` generating functions so we get</p>
        <div class="math">
          <p>`C(x) = 1+xC(x)^k`</p>
        </div>
        <p>To get `c_n`, we could use the Lagrange inversion formula</p>
        <p>Let `A(x) = C(x)-1`</p>
        <p>Then</p>
        <div class="math">
          <p>`A(x)+1 = 1+x(A(x)+1)^k`</p>
          <p>`A(x) = x(A(x)+1)^k`</p>
        </div>
        <p>Let `G(x) = (x+1)^k`</p>
        <p>So `A(x)=xG(A(x)) implies [x^n]A(x) = 1/n[x^(n-1)](G(x)^n) = 1/n[x^(n-1)](x+1)^(kn)`</p>
        <div class="math">
          <p>`= 1/n((kn),(n-1))`</p>
        </div>
        <p>The coefficients of `A(x)=C(x)-1` are the same as those for `C(x)` except for the constant term</p>
        <p>So `[x^n]A(x) = [x^n]C(x)` for `n gt 0` `implies C_n = 1/(n)((kn),(n-1))`</p>
      </div>
      <h2 id="inclusionexclusion">Inclusion-Exclusion</h2>
      <p>Inclusion-exclusion is used to count the size of a set that is made up of smaller sets, which may overlap with each other. This means we have to make sure that we don't overcount elements.</p>
      <div class="box">
        <p>Theorem: Let `A_1, A_2, ..., A_n` be finite sets. Then</p>
        <div class="math">
          <p>`|A_1 uu A_2 uu ... uu A_n| = sum_(j=1)^n(-1)^(j-1)sum_(1 le i_1 lt i_2 ... lt i_j le n)|A_(i_1) nn A_(i_2) ... nn A_(i_j)|`</p>
        </div>
        <div class="collapse" id="inclusionexclusionformula">
          <p>We want every `x in A_1 uu ... uu A_n` to be counted exactly once</p>
          <p>Let `S = {s_1, s_2, ..., s_k}` be all the indices such that `x in A_(s_1), ..., A_(s_k)`</p>
          <p>`x` is only going to be counted by `(-1)^(j-1)|A_(i_1) nn ... nn A_(i_j)|` when all the `i_1, i_2, ..., i_j` are in `S` (otherwise `x` doesn't belong in the intersection)</p>
          <p>So we have to look at all the possible ways of choosing indices in `S`</p>
          <p>The number of times `x` is counted is</p>
          <div class="math">
            <p>`sum_(T sube S, T != O/) (-1)^(|T|-1) = sum_(i=1)^(|S|)((|S|),(i))(-1)^(i-1)`</p>
          </div>
          <p>We could simplify that by using the binomial theorem</p>
          <p>When `x=-1,y=1` we get</p>
          <div class="math">
            <p>`0 = (1-1)^n = sum_(i=0)^n((n),(i))(-1)^i`</p>
            <p>`= 1+sum_(i=1)^n((n),(i))(-1)^i`</p>
          </div>
          <p>So we have `0 = 1+sum_(i=1)^n((n),(i))(-1)^i`</p>
          <div class="math">
            <p>`-sum_(i=1)^n((n),(i))(-1)^i = 1`</p>
            <p>`sum_(i=1)^n((n),(i))(-1)^(i-1) = 1`</p>
          </div>
          <p>which looks like the summation above</p>
          <p>So the number of times `x` is counted is</p>
          <div class="math">
            <p>`sum_(i=1)^(|S|)((|S|),(i))(-1)^(i-1)=1`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#inclusionexclusionformula">Proof</a>
        <p>`j` represents how many sets we consider at a time</p>
        <p>the inner sum looks at the number of ways to intersect `j` sets</p>
      </div>
      <div class="box">
        <p>Example: `n=2`</p>
        <p>Starting with `j=1`, we take all possible subsets of size `1`:</p>
        <div class="math">
          <p>`|A_1 uu A_2| = color(red)(|A_1|+|A_2|)`</p>
        </div>
        <p>Then when `j=2`, we take all possible subsets of size `2`:</p>
        <div class="math">
          <p>`|A_1 uu A_2| = |A_1|+|A_2|color(red)(-|A_1 nn A_2|)`</p>
        </div>
      </div>
      <div class="box">
        <p>Example: `n=4`</p>
        <p>All possible subset of size `1`:</p>
        <div class="math">
          <p>`|A_1 uu A_2 uu A_3 uu A_4| = color(red)(|A_1|+|A_2|+|A_3|+|A_4|)`</p>
        </div>
        <p>All possible subset of size `2`:</p>
        <div class="math">
          <p>`|A_1 uu A_2 uu A_3 uu A_4| = |A_1|+|A_2|+|A_3|+|A_4|`</p>
          <p>`color(red)(-|A_1 nn A_2| - |A_1 nn A_3| - |A_1 nn A_4| - |A_2 nn A_3| - |A_2 nn A_4| - |A_3 nn A_4|)`</p>
        </div>
        <p>All possible subset of size `3`:</p>
        <div class="math">
          <p>`|A_1 uu A_2 uu A_3 uu A_4| = |A_1|+|A_2|+|A_3|+|A_4|`</p>
          <p>`-|A_1 nn A_2| - |A_1 nn A_3| - |A_1 nn A_4| - |A_2 nn A_3| - |A_2 nn A_4| - |A_3 nn A_4|`</p>
          <p>`color(red)(+|A_1 nn A_2 nn A_3| + |A_1 nn A_2 nn A_4| + |A_1 nn A_3 nn A_4| + |A_2 nn A_3 nn A_4|)`</p>
        </div>
        <p>All possible subset of size `4`:</p>
        <div class="math">
          <p>`|A_1 uu A_2 uu A_3 uu A_4| = |A_1|+|A_2|+|A_3|+|A_4|`</p>
          <p>`-|A_1 nn A_2| - |A_1 nn A_3| - |A_1 nn A_4| - |A_2 nn A_3| - |A_2 nn A_4| - |A_3 nn A_4|`</p>
          <p>`+|A_1 nn A_2 nn A_3| + |A_1 nn A_2 nn A_4| + |A_1 nn A_3 nn A_4| + |A_2 nn A_3 nn A_4|`</p>
          <p>`color(red)(-|A_1 nn A_2 nn A_3 nn A_4|)`</p>
        </div>
      </div>
      <p>When proving things using inclusion-exclusion, we want to express our set as one that satisfies one of `n` conditions. Then each `A_i` is the set that only satisfies condition `i`. The union of all the `A_i`'s will be our original set.</p>
      <div class="box">
        <p>A bijection `f:S rarr S` is a derangement if `f(s)!=s` for all `s in S`</p>
        <p>Theorem: The number of derangements of a set of size `n` is `sum_(i=0)^n(-1)^i(n!)/(i!)`</p>
        <div class="collapse" id="derangement">
          <p>It's easier to count the number of non-derangements and subtract from the total number of permutations</p>
          <p>`f` is not a derangement if `f(1)=1` or `f(2)=2` or `...\ f(n) = n`</p>
          <p>Let `A_i = {f:[n] rarr [n]|f(i)=i}`. So all the non-derangements are included in `A_1 uu A_2 uu ... uu A_n`</p>
          <p>`A_1` is the set of all bijections such that `f(1)=1`. For `2,...,n` there are `(n-1)!` ways to assign values, so `|A_1|=(n-1)!`</p>
          <p>By similar reasoning, `|A_2| = ... = |A_n| = (n-1)!`</p>
          <p>`A_1 nn A_2` is the set of all bijections such that `f(1)=1` and `f(2)=2`. For `3,...,n` there are `(n-2)!` ways to assign values, so `|A_1 nn A_2| = (n-2)!`</p>
          <p>In general, `|A_(i_1) nn ... nn A_(i_j)| = (n-j)!`</p>
          <p>Since the union of all the `A_i`'s gives us the number of non-derangements, we can use inclusion-exclusion</p>
          <div class="math">
            <p>`|A_1 uu ... uu A_n| = sum_(j=1)^n(-1)^(j-1)sum_(1 le i_1 lt ... lt i_j le n)|A_(i_1) nn ... nn A_(i_j)|`</p>
            <p>`= sum_(j=1)^n(-1)^(j-1)sum_(1 le i_1 lt ... lt i_j le n)(n-j)!`</p>
            <p>`= sum_(j=1)^n(-1)^(j-1)((n),(j))(n-j)!`</p>
            <p>`= sum_(j=1)^n(-1)^(j-1)(n!)/(j!)`</p>
          </div>
          <p>The number of derangements is the number of permutations minus the number of non-derangements, which is</p>
          <div class="math">
            <p>`n!-sum_(j=1)^n(-1)^(j-1)(n!)/(j!)`</p>
            <p>`= n!+sum_(j=1)^n(-1)^j(n!)/(j!)`</p>
            <p>`= sum_(j=0)^n(-1)^j(n!)/(j!)`</p>
            <p>the last part can be seen as rewriting `n!` as `(n!)/(0!)`</p>
          </div>
          <p>Big idea: To be a non-derangement, it needs to satisfy (at least) one of `n` conditions. The set of non-derangements is the union of `n` simpler sets.</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#derangement">Proof</a>
      </div>
      <p>Formulas obtained from inclusion-exclusion will have alternating signs, which makes it hard to tell how big that quantity is. For example, is `sum_(i=0)^n(-1)^i(n!)/(i!)` a big or small number? It turns out that this specific formula (accidentally?) has another nice interpretation that can be obtained using calculus.</p>
      <div class="box">
        <p>Example: What percentage of permutations are derangements?</p>
        <p>The answer is the number of derangements divided by the number of permutations, which is</p>
        <div class="math">
          <p>`1/(n!)sum_(j=0)^n(-1)^j(n!)/(j!)`</p>
          <p>`= sum_(j=0)^n(-1)^j/(j!)`</p>
        </div>
        <p>From calculus,</p>
        <div class="math">
          <p>`e^x = sum_(i ge 0)x^i/(i!)`</p>
        </div>
        <p>`e^x` converges everywhere, so if we plug in a number for `x`, that series will converge</p>
        <p>Also, the larger `n` gets, the closer we get to the value. So even though it's an infinite sum, large enough `n` will provide a good enough approximation</p>
        <p>Plugging in `x=-1`, we get</p>
        <div class="math">
          <p>`e^(-1) = sum_(i ge 0)(-1)^i/(i!) ~~ sum_(i=0)^n(-1)^i/(i!)`</p>
        </div>
        <p>So the number of derangements is</p>
        <div class="math">
          <p>`= sum_(j=0)^n(-1)^j/(j!) ~~ 1/e ~~ 0.367...`</p>
        </div>
        <p>In a room with a lot of people, if we throw everyone's hat into a pile and randomly give everyone a hat, there's about a `37%` chance that no one will get their own hat back</p>
      </div>
      <p>We can also use inclusion-exclusion to get a formula for the Stirling numbers. `S(n,k)` is the number of set partitions of `[n]` into `k` blocks. `k!S(n,k)` is the number of ordered set partitions of `[n]` into `k` blocks. It can also be thought of as the number of surjective functions from `[n]` to `[k]`.</p>
      <div class="box">
        <p>Theorem: `S(n,k) = 1/(k!)sum_(i=0)^k(-1)^i((k),(i))(k-i)^n` for `n ge k gt 0`</p>
        <div class="collapse" id="stirlinginclusionexclusion">
          <p>Count the number of non-surjective functions from `[n]` to `[k]` and subtract from the total number of functions from `[n]` to `[k]`</p>
          <p>Being non-surjective means `1` is not in the image or `2` is not in the image or `...\ k` is not in the image</p>
          <p>Define `A_i = {f:[n] rarr [k]|i` is not in the image of `f}` for `1 le i le k`</p>
          <p>Then the set of non-surjective functions is the union of the `A_i`'s</p>
          <p>`A_1` is all the functions where `1` is not in the image, which is the same as `{`functions `[n] rarr {2,3,...,k}}`</p>
          <p>There are `(k-1)^n` such functions, so `|A_1| = (k-1)^n`</p>
          <p>By similar reasoning, `|A_i| = (k-1)^n` for all `i`</p>
          <p>`A_1 nn A_2 = {`functions `[n] rarr {3,4,...,k}}` so `|A_1 nn A_2| = (k-2)^n`</p>
          <p>In general, `|A_(i_1) nn ... nn A_(i_j)| = (k-j)^n`</p>
          <p>The number of non-surjective functions is</p>
          <div class="math">
            <p>`|A_1 uu ... uu A_k| = sum_(j=1)^k(-1)^(j-1)sum_(1 le i_1 lt ... lt i_j le k)|A_(i_1) nn ... nn A_(i_j)|`</p>
            <p>`= sum_(j=1)^n(-1)^(j-1)sum_(1 le i_1 lt ... lt i_j le k)(k-j)^n`</p>
            <p>`= sum_(j=1)^n(-1)^(j-1)((k),(j))(k-j)^n`</p>
          </div>
          <p>The number of surjective functions is the total number of functions minus the number of non-surjective functions, so we have</p>
          <div class="math">
            <p>`k!S(n,k) = k^n - sum_(j=1)^k(-1)^(j-1)((k),(j))(k-j)^n`</p>
            <p>`k!S(n,k) = k^n + sum_(j=1)^k(-1)^j((k),(j))(k-j)^n`</p>
            <p>`k!S(n,k) = sum_(j=0)^k(-1)^j((k),(j))(k-j)^n`</p>
          </div>
          <p>To get the Stirling numbers, divide by `k!`:</p>
          <div class="math">
            <p>`S(n,k) = 1/(k!)sum_(j=0)^k(-1)^j((k),(j))(k-j)^n`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#stirlinginclusionexclusion">Proof</a>
      </div>
      <h2 id="mobiusinversion">Möbius Inversion</h2>
      <p>Möbius inversion deals with a different kind of overcounting. It usually shows up in number theory, but we can use it to count necklaces.</p>
      <p>Let `A` be an alphabet of size `k`. We want to count the number of words of length `n` up to cyclic symmetry. The idea is that if we arrange the letters in a circle, each rotation would be considered the same word.</p>
      <div class="box">
        <p>For example, `a_1a_2a_3a_4 -= a_4a_1a_2a_3 -= a_3a_4a_1a_2 -= a_2a_3a_4a_1`</p>
      </div>
      <p>Because of the cyclic symmetry, we have to divide out the commonalities to get the number of unique arrangements. It seems like the number of symmetries is equal to the number of times we can shift it to get the same word back.</p>
      <p>One idea is to divide the number of words of length `n` by the length of the word.</p>
      <div class="math">
        <p>`= k^n/n`</p>
      </div>
      <p>The problem with this idea is that not every word is overcounted equally.</p>
      <div class="box">
        <p>For example, `a_1a_1a_1a_1` is not overcounted four times; it is only overcounted once</p>
      </div>
      <p>The number of symmetries is actually equal to the number of times we can shift it. It's just not always equal to the length of the word.</p>
      <div class="box">
        <p>Given a word, its <b>period</b> is the least number of times we need to rotate it to get the original word back</p>
        <p>Fact: the period always divides the length of the word</p>
        <p>Let `omega(d)` be the number of words of period `d`</p>
      </div>
      <p>To count the number of necklaces, we can count the number of words with period `1, 2, ..., n`, dividing out the commonalities in each case.</p>
      <div class="math">
        <p>`#\ text(necklaces) = sum_(d|n)(omega(d))/d`</p>
      </div>
      <div class="box">
        <p>The number of necklaces of length `4`</p>
        <div class="math">
          <p>`= (omega(1))/1 + (omega(2))/2 + (omega(4))/4`</p>
          <p>`= k + (k(k-1))/2 + (k^4-k-(k(k-1)))/4`</p>
        </div>
        <div class="box">
          <p>It's tempting to think that the number of words with period `4` is `n(n-1)(n-2)(n-3)`</p>
          <p>But there are words with period `4` that don't have all distinct letters, such as `1312`</p>
          <p>To count the number of words with period `4`, we count the total number of words of length `4` and subtract off words with period `1` and period `2`</p>
          <p>If a word of length `4` doesn't have period `1` or period `2`, then it must have period `4`</p>
          <p>This idea actually leads to another identity</p>
        </div>
      </div>
      <div class="box">
        <p>The number of words of length `n` is the number of words with period `1, 2, ..., n`</p>
        <div class="math">
          <p>`k^n = sum_(d|n)omega(d)`</p>
        </div>
        <p>This is valid for any `n`, so this gives us a system of equations we can use to solve for each `omega(d)`</p>
        <div class="box">
          <p>For `n=4`:</p>
          <div class="math">
            <p>`k^4 = omega(4)+omega(2)+omega(1)`</p>
            <p>`k^2 = omega(2)+omega(1)`</p>
            <p>`k^1 = omega(1)`</p>
          </div>
          <p>Which gives us</p>
          <div class="math">
            <p>`omega(1) = k`</p>
            <p>`omega(2) = k^2-omega(1) = k^2-k`</p>
            <p>`omega(4) = k^4-omega(2)-omega(1) = k^4-k^2+k-k = k^4-k^2`</p>
          </div>
        </div>
        <div class="box">
          <p>For `n=6`:</p>
          <div class="math">
            <p>`k^6 = omega(6)+omega(3)+omega(2)+omega(1)`</p>
            <p>`k^3 = omega(3)+omega(1)`</p>
            <p>`k^2 = omega(2)+omega(1)`</p>
            <p>`k^1 = omega(1)`</p>
          </div>
          <p>Which gives us</p>
          <div class="math">
            <p>`omega(1) = k`</p>
            <p>`omega(2) = k^2-omega(1) = k^2-k`</p>
            <p>`omega(3) = k^3-omega(1) = k^3-k`</p>
            <p>`omega(6) = k^6-omega(3)-omega(2)-omega(1) = k^6-k^3+k-k^2+k-k = k^6-k^3-k^2+k`</p>
            <p>
          </div>
        </div>
      </div>
      <p>We could use this system of equations to manually solve for `omega(d)` and calculate the number of necklaces that way. But it would be nicer to find a pattern for `omega(d)` and solve for it directly.</p>
      <div class="box">
        <p>For `n gt 1`, write `n` as a product of primes</p>
        <p>The <b>Möbius function</b> is defined by</p>
        <div class="math">
          <p>`mu(n) = {(0\ text(if n is divisible by a square of some prime)), ((-1)^k\ text(if n is a product of k different primes)):}`</p>
        </div>
        <p>and `mu(1)=1`</p>
        <div class="box">
          <p>`mu(12) = mu(2^2*3) = 0`</p>
          <p>`mu(30) = mu(2*3*5) = (-1)^3 = -1`</p>
          <p>`mu(8) = mu(2^3) = 0`</p>
        </div>
      </div>
      <div class="box">
        <p>Lemma: `sum_(d|n)mu(d) = 0` for `n gt 1`</p>
        <div class="collapse" id="mobiuslemma">
          <p>Consider the prime factorization of `n = p_1^(a_1)p_2^(a_2)...p_r^(a_r)` where each `p_i` is distinct and all `a_i gt 0`</p>
          <p>To get divisors of `n`, we just make the exponents smaller</p>
          <p>So all divisors `d` of `n` are of the form `d = p_1^(b_1)p_2^(b_2)...p_r^(b_r)` where `0 le b_i le a_i`</p>
          <p>We can rewrite the sum as</p>
          <div class="math">
            <p>`sum_(d|n)mu(d) = sum_(0 le b_i le a_i)mu(p_1^(b_1)p_2^(b_2)...p_r^(b_r))`</p>
          </div>
          <p>By the Möbius function, if `n` is divisible by a prime more than once, then the result is `0`. So we only need to consider `b_i`'s `lt 2`:</p>
          <div class="math">
            <p>`= sum_(0 le b_i le 1)mu(p_1^(b_1)p_2^(b_2)...p_r^(b_r))`</p>
          </div>
          <p>Since each `b_i` is either `0` or `1`, we either include each `p_i` or we don't:</p>
          <div class="math">
            <p>`= sum_(S sube [r])mu(prod_(i in S)p_i)`</p>
          </div>
          <p>We have a product of distinct primes so the result will be `(-1)` to some power by the Möbius function:</p>
          <div class="math">
            <p>`= sum_(S sube [r])(-1)^(|S|)`</p>
            <p>`= sum_(j=0)^r (-1)^j((r),(j)) = 0`</p>
            <p>by the binomial theorem with `x=-1,y=1`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#mobiuslemma">Proof</a>
      </div>
      <div class="box">
        <p>Theorem: `omega(d) = sum_(e|d)mu(d/e)k^e` for any `d`</p>
        <div class="collapse" id="mobiustheorem">
          <p>From the identity before, we can rewrite `k^e` as a sum of `omega`'s</p>
          <div class="math">
            <p>`sum_(e|d)mu(d/e)k^e = sum_(e|d)mu(d/e)sum_(f|e)omega(f)`</p>
          </div>
          <p>We can rearrange the sum to get</p>
          <div class="math">
            <p>`= sum_(f|d)(omega(f)sum_(e|d, e\ text(divisible by )f)mu(d/e))`</p>
            <p>`= sum_(f|d)(omega(f)sum_(g|d/f)mu(g))color(red)(text(*))`</p>
          </div>
          <p>By the lemma, `sum_(g|d/f)mu(g) = 0` if `d/f gt 1 implies d gt f`</p>
          <p>So we don't need to consider all the terms where `d gt f`. The only term left is when `f=d`:</p>
          <div class="math">
            <p>`= omega(d)sum_(g|d/d)mu(g)`</p>
            <p>`= omega(d)sum_(g|1)mu(g)`</p>
            <p>`= omega(d)sum_(1)1`</p>
            <p>`= omega(d)`</p>
          </div>
          <div class="box">
            <p>`color(red)(text(*))`We can define a function `varphi:{e|e\ ` divides `d` and `e` is divisible by `f} rarr {g|g` divides `d/f}` by `varphi(e)=d/e`</p>
            <p>`varphi` is a bijection, so we can rewrite the sum</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#mobiustheorem">Proof</a>
      </div>
      <div class="box">
        <p>We could verify that this theorem is consistent with the previous examples for `d=4` and `d=6`</p>
        <div class="box">
          <div class="math">
            <p>`omega(4) = mu(4/1)k^1 + mu(4/2)k^2 + mu(4/4)k^4`</p>
            <p>`= mu(2^2)k^1 + mu(2)k^2 + mu(1)k^4`</p>
            <p>`= -k^2 + k^4`</p>
          </div>
        </div>
        <div class="box">
          <div class="math">
            <p>`omega(6) = mu(6/1)k^1 + mu(6/2)k^2 + mu(6/3)k^3 + mu(6/6)k^6`</p>
            <p>`= mu(2*3)k^1 + mu(3)k^2 + mu(2)k^3 + mu(1)k^6`</p>
            <p>`= k - k^2 - k^3 + k^6`</p>
          </div>
        </div>
      </div>
      <p>Counting necklaces is a specific case of Möbius inversion. Generally, we use Möbius inversion when we have a function that is a sum of another function, and we want to write it the other way around.</p>
      <div class="box">
        <p>Theorem: Let `f,g` be functions defined on positive integers. Assume that `f(n) = sum_(d|n)g(d)` for all `n ge 1`</p>
        <p>Then `g(d) = sum_(e|d)mu(d/e)f(e)` for all `d ge 1`</p>
      </div>
      <div class="box">
        <p>In the necklace problem, `f(n) = k^n` and `g(d) = omega(d)`</p>
      </div>
      <h2 id="practiceproblems">Practice Problems</h2>
      <h3>Chapter 3</h3>
      <div class="box">
        <p>3.1: How many functions are there from `[n]` to `[n]` that are not one-to-one?</p>
        <div class="collapse" id="q3-1">
          <p>Count the number of functions that are one-to-one and subtract from the total number of functions</p>
          <p>Total number of functions: there are `n` choices in the codomain for each element in the domain `implies n^n`</p>
          <p>One-to-one: assign each element in the domain one element in the codomain and permute `implies n!`</p>
          <p>`color(red)(n^n - n!)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-1">Answer</a>
      </div>
      <div class="box">
        <p>3.2: Prove that the number of subsets of `[n]` that have an odd number of elements is `2^(n-1)`</p>
        <div class="collapse" id="q3-2">
          <p>For each of the first `n-1` elements, there are `2` choices: in the subset or not in the subset `implies 2^(n-1)`</p>
          <p>For the `n^(th)` element, there is only `1` choice:</p>
          <ul>
            <li>if there are an even number of elements in the subset so far, then add the `n^(th)` element in the subset</li>
            <li>if there are an odd number of elements in the subset so far, then don't add the `n^(th)` element in the subset</li>
          </ul>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-2">Answer</a>
      </div>
      <div class="box">
        <p>3.3: A company has `20` employees, `12` males and `8` females. How many ways are there to form a committee of `5` employees that contains at least one male and one female?</p>
        <div class="collapse" id="q3-3">
          <p>Count the number of committees that have all males and all females and subtract both from the total number of ways to form a committee</p>
          <p>Total number of ways to form a committee: `((20),(5))`</p>
          <p>All male: `((12),(5))`</p>
          <p>All female: `((8),(5))`</p>
          <p>`color(red)(((20),(5)) - ((12),(5)) - ((8),(5)))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-3">Answer</a>
      </div>
      <div class="box">
        <p>3.6: How many five-digit positive integers are there with middle digit `6` that are divisible by three?</p>
        <div class="collapse" id="q3-6">
          <p>This problem is the same as counting the number of four-digit positive integers divisible by three since `6` is divisible by three</p>
          <p>There are `9999-1000+1 = 9000` four-digit positive integers</p>
          <p>Every third number is divisible by three `implies 1/3` of the `9000` four-digit positive integers are divisible by three</p>
          <p>`color(red)(3000)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-6">Answer</a>
      </div>
      <div class="box">
        <p>3.7: How many five-digit positive integers are there that contain the digit `9` and are divisible by three?</p>
        <div class="collapse" id="q3-7">
          <p>There are `99999-10000+1 = 90000` five-digit positive integers</p>
          <p>Every third number is divisible by three `implies 1/3*90000 = 30000` five-digit positive integers are divisible by three</p>
          <p>Now count how many of those don't contain a `9` and subtract from the total number of five-digit positive integers divisible by three</p>
          <p>There are `8` choices for the first digit</p>
          <p>There are `9` choices for the second digit</p>
          <p>There are `9` choices for the third digit</p>
          <p>There are `9` choices for the fourth digit</p>
          <p>The fifth digit depends on what the first `4` digits sum up to</p>
          <ul>
            <li>if the sum mod `3` equals `0`, then the fifth digit can be `0`, `3`, or `6`</p>
            <li>if the sum mod `3` equals `1`, then the fifth digit can be `2`, `5`, or `8`</p>
            <li>if the sum mod `3` equals `2`, then the fifth digit can be `1`, `4`, or `7`</p>
          </ul>
          <p>There are `3` choices for the fifth digit</p>
          <p>`color(red)(30000-(8*9*9*9*3))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-7">Answer</a>
      </div>
      <div class="box">
        <p>3.8: How many ways are there to list the digits `{1,2,2,3,4,5,6}` so that identical digits are not in consecutive positions?</p>
        <div class="collapse" id="q3-8">
          <p>Count the number of ways to list the digits where they are in consecutive positions and subtract from the total number of ways to list the digits</p>
          <p>Total number of ways to list digits: `(7!)/(2!)`</p>
          <p>Consecutive positions: combine the `2`'s into one `2`, then there are `6!` ways to list the digits</p>
          <p>`color(red)((7!)/(2!) - 6!)`</p>
          <p>Alternatively, there are `6` positions where the `2`'s could go, then there are `5!` ways to rearrange the remaining digits `implies 6*5! = 6!`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-8">Answer</a>
      </div>
      <div class="box">
        <p>3.9: How many ways are there to list the digits `{1,1,2,2,3,4,5}` so that the two `1`'s are in consecutive positions?</p>
        <div class="collapse" id="q3-9">
          <p>Combine the two `1`'s together into one `1`, then there are `(6!)/(2!)` ways to list the digits</p>
          <p>`color(red)((6!)/(2!))`</p>
          <p>Alternatively, there are `6` positions where the `1`'s could go, then there are `(5!)/(2!)` ways to rearrange the remaining digits `implies 6*(5!)/(2!) = (6!)/(2!)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-9">Answer</a>
      </div>
      <div class="box">
        <p>3.10: A cashier wants to work five days a week, but he wants to have at least one of Saturday and Sunday off. In how many ways can he choose the days he will work?</p>
        <div class="collapse" id="q3-10">
          <p>Count the number of ways where he works on Saturday and Sunday and subtract from the total number of ways to choose the five days</p>
          <p>Total number of ways to choose five days: `((7),(5))`</p>
          <p>Works on Saturday and Sunday: `((5),(3))`</p>
          <p>`color(red)(((7),(5))-((5),(3)))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-10">Answer</a>
      </div>
      <div class="box">
        <p>3.11: A car dealership employs five salespeople. Yesterday the dealership sold seven cars. In how many different ways could this happen?</p>
        <div class="collapse" id="q3-11">
          <p>This is a `7`-element multiset of `[5]`</p>
          <p>Alternatively, it is also a weak composition of `7` into `5` parts</p>
          <p>`color(red)(((11),(7)))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-11">Answer</a>
      </div>
      <div class="box">
        <p>3.12: A traveling agent has to visit four cities, each of them five times. In how many different ways can he do this if he is not allowed to start and finish in the same city?</p>
        <div class="collapse" id="q3-12">
          <p>Count the number of ways to do this where he starts and finishes in the same city and subtract from the total number of ways to visit four cities five times each</p>
          <p>Consider a random permutation of cities</p>
          <p>Total number of ways:
          <ul>
            <li>There are `20!` ways to rearrange them</li>
            <li>But there are `4` sets of `5` duplicate cities</li>
            <li>`implies (20!)/(5!5!5!5!)`</li>
          </ul>
          <p>Start and finish in the same city:</p>
          <ul>
            <li>Choose `1` city that will be the start and finish</li>
            <li>There are `18!` ways to rearrange the cities</li>
            <li>But there are `3` sets of `5` duplicate cities and `1` set of `3` duplicate cities</li>
            <li>There are `4` choices for the cities that are fixed at the start and end</li>
            <li>`implies 4*(18!)/(5!5!5!3!)`</li>
          <p>`color(red)((20!)/(5!5!5!5!) - 4*(18!)/(5!5!5!3!))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-12">Answer</a>
      </div>
      <div class="box">
        <p>3.14: A restaurant offers five soups, ten main courses, and six desserts. Joe decided to order at most one soup, at most one main course, and at most one dessert. In how many ways can he do this?</p>
        <div class="collapse" id="q3-14">
          <p>For each meal, not getting it is an option</p>
          <p>There are `6` choices for soup</p>
          <p>There are `11` choices for soup</p>
          <p>There are `7` choices for soup</p>
          <p>`color(red)(6*11*7)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-14">Answer</a>
      </div>
      <div class="box">
        <p>3.18: How many `6`-digit positive integers are there in which the sum of the digits is at most `51`?</p>
        <div class="collapse" id="q3-18">
          <p>Count the number of `6`-digit positive integers in which the sum of the digits is more than `51` and subtract from the total number of `6`-digit positive integers</p>
          <p>Total number of `6`-digit positive integers: `999999-100000+1 = 900000`</p>
          <p>There are `4` situations where the sum of the digits is more than `51`:</p>
          <ul>
            <li>six `9`'s: `1` way to do this</p>
            <li>five `9`'s and one `8`: `6` ways to do this</p>
            <li>five `9`'s and one `7`: `6` ways to do this</p>
            <li>four `9`'s and two `8`'s: `((6),(2))` ways to do this</p>
          </ul>
          <p>`color(red)(900000-(1+6+6+((6),(2))))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-18">Answer</a>
      </div>
      <div class="box">
        <p>3.19: How many ways are there to select an `11`-member soccer team and a `5`-member basketball team from a class of `30` students if</p>
        <p>(a) nobody can be on `2` teams</p>
        <p>(b) any number of students can be on both teams</p>
        <p>(c) at most one student can be on both teams?</p>
        <div class="collapse" id="q3-19">
          <p>(a) First, pick `11` students for the soccer team: `((30),(11))`</p>
          <p>From the remaining `19` students, pick `5` of them to be on the basketball team: `((19),(5))`</p>
          <p>`color(red)(((30),(11))*((19),(5)))`</p>
          <p>(b) First, pick `11` students for the soccer team: `((30),(11))`</p>
          <p>Since we can have students on both teams, we can pick `5` students for the basketball team from the same set of `30` students: `((30),(5))`</p>
          <p>`color(red)(((30),(11))*((30),(5)))`</p>
          <p>(c) It is valid to have a situation where no student is on both teams. This is part (a): `((30),(11))*((19),(5))`</p>
          <p>The (only) other valid situation is to have `1` student on both teams</p>
          <p>First, pick `10` students for the soccer team: `((30),(10))`</p>
          <p>(the `11^(th)` spot is reserved for the student who is on both teams)</p>
          <p>From the remaining `20` students, pick `4` of them to be on the basketball team: `((20),(4))`</p>
          <p>(the `4^(th)` spot is reserved for the student who is on both teams)</p>
          <p>From the remaining `16` students, pick `1` of them to be on both teams: `16`</p>
          <p>`color(red)(((30),(11))*((19),(5)) + ((30),(10))*((20),(4))*16)`</p>
          <p>Alternatively, first pick the student who will be on both teams: `30`</p>
          <p>From the remaining `29` students, pick `10` of them to be on the soccer team: `((29),(10))`</p>
          <p>From the remaining `19` students, pick `4` of them to be on the basketball team: `((19),(4))`</p>
          <p>`color(red)(((30),(11))*((19),(5)) + 30*((29),(10))*((19),(4)))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-19">Answer</a>
      </div>
      <div class="box">
        <p>3.20: Suppose all cars have license plates consisting of six numerical digits only. How many license plates have only one digit that occurs more than once and that digit occurs exactly three times? For example, `404824`.</p>
        <div class="collapse" id="q3-20">
          <p>Pick the digit that will occur three times: `10` choices</p>
          <p>From the six positions, pick three of them to be the places where the repeated digit will be: `((6),(3))`</p>
          <p>The rest of the digits have to be distinct since there is only one digit that occurs more than once</p>
          <p>The fourth digit, regardless of position, has `9` choices</p>
          <p>The fifth digit, regardless of position, has `8` choices</p>
          <p>The sixth digit, regardless of position, has `7` choices</p>
          <p>`color(red)(10*((6),(3))*9*8*7)`</p>
          <p>Alternatively,</p>
          <p>There are `10` choices for the digit that appears three times</p>
          <p>There are `9` choices for the fourth digit</p>
          <p>There are `8` choices for the fifth digit</p>
          <p>There are `7` choices for the sixth digit</p>
          <p>There are `(6!)/(3!)` ways to arrange the six digits</p>
          <p>`color(red)(10*9*8*7*(6!)/(3!))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-20">Answer</a>
      </div>
      <div class="box">
        <p>3.23: In how many different ways can we place `8` identical rooks on a chess board so that no two of them attack each other?</p>
        <div class="collapse" id="q3-23">
          <p>Place a rook on any row/column: `8` choices</p>
          <p>There are `7` remaining rows/columns for the next rook</p>
          <p>There are `6` remaining rows/columns for the next rook</p>
          <p>`vdots`</p>
          <p>There is `1` remaining row/column for the last rook</p>
          <p>`color(red)(8!)`</p>
          <p>Alternatively, place the `8` rooks in such a way so that none of them are attacking each other (e.g. place them all along a diagonal)</p>
          <p>There are `8!` ways to rearrange them and still have them not attacking each other</p>
          <p>(swapping two rows/columns will ensure that they are still not attacking each other)</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-23">Answer</a>
      </div>
      <div class="box">
        <p>3.25: How many three-digit positive integers contain two (but not three) different digits?</p>
        <div class="collapse" id="q3-25">
          <p>Count the number of three-digit positive integers that contain only one different digit and the number of three-digit positive integers that contain three different digits and subtract both from the total number of three-digit positive integers</p>
          <p>Total number of three-digit positive integers: `999-100+1 = 900`</p>
          <p>three-digit positive integers with only one different digit:</p>
          <ul>
            <li>one different digit means all three digits are the same and there are `9` of these</li>
          </ul>
          <p>three-digit positive integers with three different digits:</p>
          <ul>
            <li>There are `9` choices for the first digit (can't be `0`)</li>
            <li>There are `9` choices for the second digit (can't be the first digit but can be `0`)</li>
            <li>There are `8` choices for the third digit</li>
          </ul>
          <p>`color(red)(900-9-9*9*8)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-25">Answer</a>
      </div>
      <div class="box">
        <p>3.27: How many subsets does `[n]` have that contain exactly one of the elements `1` and `2`?</p>
        <div class="collapse" id="q3-27">
          <p>Consider the subsets of `{3,4,...,n}`</p>
          <p>There are `n-2` elements `implies 2^(n-2)` subsets</p>
          <p>For each subset, there are `2` choices: put a `1` or put a `2`</p>
          <p>`2*2^(n-2) = color(red)(2^(n-1))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-27">Answer</a>
      </div>
      <div class="box">
        <p>3.28: How many subsets does `[n]` have that contain at least one of the elements `1` and `2`?</p>
        <div class="collapse" id="q3-28">
          <p>Consider the subsets of `{3,4,...,n}`</p>
          <p>There are `n-2` elements `implies 2^(n-2)` subsets</p>
          <p>For each subset, there are `3` choices: put a `1`, put a `2`, or put both</p>
          <p>`color(red)(3*2^(n-2))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-28">Answer</a>
      </div>
      <div class="box">
        <p>3.29: How many three-digit positive integers start and end with an even digit?</p>
        <div class="collapse" id="q3-29">
          <p>There are `4` choices for the first digit (can't be `0`)</p>
          <p>There are `10` choices for the second digit</p>
          <p>There are `5` choices for the third digit</p>
          <p>`color(red)(4*10*5)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-29">Answer</a>
      </div>
      <div class="box">
        <p>3.30: How many four-digit positive integers are there in which all digits are different?</p>
        <div class="collapse" id="q3-30">
          <p>There are `9` choices for the first digit (can't be `0`)</p>
          <p>There are `9` choices for the second digit</p>
          <p>There are `8` choices for the third digit</p>
          <p>There are `7` choices for the fourth digit</p>
          <p>`color(red)(9*9*8*7)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-30">Answer</a>
      </div>
      <div class="box">
        <p>3.31: How many four-digit positive integers are there that contain the digit `1`?</p>
        <div class="collapse" id="q3-31">
          <p>Count the number of four-digit positive integers that don't contain the digit `1` and subtract from the total number of four-digit positive integers</p>
          <p>Total number of four-digit positive integers: `9999-1000+1 = 9000`</p>
          <p>Don't contain `1`:</p>
          <ul>
            <li>There are `8` choices for the first digit (can't be `0` or `1`)</li>
            <li>There are `9` choices for the second digit (can't be `1`)</li>
            <li>There are `9` choices for the third digit (can't be `1`)</li>
            <li>There are `9` choices for the fourth digit (can't be `1`)</li>
          </ul>
          <p>`color(red)(9000-8*9*9*9)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-31">Answer</a>
      </div>
      <div class="box">
        <p>3.32: How many three-digit numbers are there in which the sum of the digits is even?</p>
        <div class="collapse" id="q3-32">
          <p>There are four situations where the sum of the digits is even:</p>
          <ul>
            <li>All digits are even</li>
            <li>even odd odd</li>
            <li>odd even odd</li>
            <li>odd odd even</li>
          </ul>
          <p>For the case where all digits are even:</p>
          <ul>
            <li>There are `4` choices for the first digit (can't be `0`)</li>
            <li>There are `5` choices for the second digit</li>
            <li>There are `5` choices for the third digit</li> 
            <li>`implies 4*5*5 = 100`</li>
          </ul>
          <p>For even odd odd:</p>
          <ul>
            <li>There are `4` choices for the first digit (can't be `0`)</li>
            <li>There are `5` choices for the second digit</li>
            <li>There are `5` choices for the third digit</li>
            <li>`implies 4*5*5 = 100`</li>
          </ul>
          <p>For odd even odd:</p>
          <ul>
            <li>There are `5` choices for the first digit (can't be `0`)</li>
            <li>There are `5` choices for the second digit</li>
            <li>There are `5` choices for the third digit</li>
            <li>`implies 5*5*5 = 125`</li>
          </ul>
          <p>For odd odd even:</p>
          <ul>
            <li>There are `5` choices for the first digit (can't be `0`)</li>
            <li>There are `5` choices for the second digit</li>
            <li>There are `5` choices for the third digit</li>
            <li>`implies 5*5*5 = 125`</li>
          </ul>
          <p>`color(red)(100+100+125+125 = 450)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-32">Answer</a>
      </div>
      <div class="box">
        <p>3.33: In how many ways can the elements of `[n]` be permuted if</p>
        <p>(a) `1` is to precede `2` and `3` is to precede `4`</p>
        <p>(b) `1` is to precede both `2` and `3`?</p>
        <div class="collapse" id="q3-33">
          <p>(a) Consider the set `[4]`</p>
          <p>There are six situations where this happens:</p>
          <ul>
            <li>`1234`</li>
            <li>`1324`</li>
            <li>`1342`</li>
            <li>`3214`</li>
            <li>`3124`</li>
            <li>`3142`</li>
          </ul>
          <p>Now consider adding `5`</p>
          <p>There are `5` choices where it could be placed for each of the six situations</p>
          <p>Now consider adding `6`</p>
          <p>There are `6` choices where it could be placed for each of the six situations</p>
          <p>`vdots`</p>
          <p>Now consider adding `n`</p>
          <p>There are `n` choices where it could be placed for each of the six situations</p>
          <p>`color(red)(6*(n)_(n-4) = 6*n*(n-1)*...*6*5)`</p>
          <p>(b) Consider the set `[3]`</p>
          <p>There are two situations where this happens:</p>
          <ul>
            <li>`123`</li>
            <li>`132`</li>
          </ul>
          <p>Now consider adding `4`</p>
          <p>There are `4` choices where it could be placed for each of the two situations</p>
          <p>`vdots`</p>
          <p>Now consider adding `n`</p>
          <p>There are `n` choices where it could be placed for each of the two situations</p>
          <p>`color(red)(2*(n)_(n-2) = 2*n*(n-1)*...*5*4)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-33">Answer</a>
      </div>
      <div class="box">
        <p>3.37: A student needs to work five days in January. He does not want to work on more than one Sunday. In how many ways can he select his five working days? (Assume that January has five Sundays.)</p>
        <div class="collapse" id="q3-37">
          <p>There are two situations:</p>
          <ul>
            <li>none of the days is Sunday</li>
            <li>one of the days is Sunday</li>
          </ul>
          <p>For the case where none of the days is Sunday, there are `26` days to choose from: `((26),(5))`</p>
          <p>For the case where one of the days is Sunday:</p>
          <ul>
            <li>Pick `4` days that aren't Sunday: `((26),(4))`</li>
            <li>There are `5` positions for the Sunday (e.g. Sunday can be the first day, second day, ..., fifth day)</li>
            <li>`implies 5*((26),(4))`</li>
          </ul>
          <p>`color(red)(((26),(5))+5*((26),(4)))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-37">Answer</a>
      </div>
      <div class="box">
        <p>3.38: A host invites `n` couples to a party. She wants to ask a subset of the `2n` guests to give a speech, but she does not want to ask both members of any couple to give speeches. In how many ways can she proceed?</p>
        <div class="collapse" id="q3-38">
          <p>For each of the `n` couples there are `3` options:</p>
          <ul>
            <li>no person speaks</li>
            <li>partner `1` speaks</li>
            <li>partner `2` speaks</li>
          </ul>
          <p>`color(red)(3^n)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-38">Answer</a>
      </div>
      <div class="box">
        <p>3.40: How many different ways can we select ordered pairs `(A,B)` of subsets of `[n]` so that `A nn B != O/`?</p>
        <div class="collapse" id="q3-40">
          <p>Count the number of ways to pick ordered pairs `(A,B)` such that `A nn B = O/` and subtract from the total number of ways to select ordered pairs `(A,B)`</p>
          <p>Total number of ways to pick ordered pairs `(A,B)`:</p>
          <img class="img-fluid" src="../pictures/combinatorics/q3-40a.jpg">
          <p>Any element in `[n]` can be:</p>
          <ul>
            <li>`in A` and `in B`</li>
            <li>`in A` and `notin B`</li>
            <li>`notin A` and `in B`</li>
            <li>`notin A` and `notin B`</li>
          </ul>
          <p>`4^n` ways</p>
          <p>For the case where `A nn B = O/`:</p>
          <img class="img-fluid" src="../pictures/combinatorics/q3-40b.jpg">
          <p>Any element can be:</p>
          <ul>
            <li>`in A and notin B`</li>
            <li>`notin A and in B`</li>
            <li>`notin A and notin B`</li>
          </ul>
          <p>`3^n` ways</p>
          <p>`color(red)(4^n-3^n)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-40">Answer</a>
      </div>
      <div class="box">
        <p>3.41: How many different ways are there to select three subsets `A`,`B`, and `C` of `[n]` so that `A sube C`, `B sube C` and `A nn B != O/`?</p>
        <div class="collapse" id="q3-41">
          <p>Count the number of way to pick subsets so that `A nn B = O/` and subtract from the total number of ways to pick subsets</p>
          <p>Total number of ways to pick subsets:</p>
          <img class="img-fluid" src="../pictures/combinatorics/q3-41a.jpg">
          <p>Any element in `[n]` can be:</p>
          <ul>
            <li>`in A and in B`</li>
            <li>`in A and notin B`</li>
            <li>`notin A and in B`</li>
            <li>`notin A and notin B and in C`</li>
            <li>`notin A and notin B and notin C`</li>
          </ul>
          <p>`5^n` ways</p>
          <p>For the case where `A nn B = O/`:</p>
          <img class="img-fluid" src="../pictures/combinatorics/q3-41b.jpg">
          <p>Any element in `[n]` can be:</p>
          <ul>
            <li>`in A and notin B`</li>
            <li>`notin A and in B`</li>
            <li>`notin A and notin B and in C`</li>
            <li>`notin A and notin B and notin C`</li>
          </ul>
          <p>`4^n` ways</p>
          <p>`color(red)(5^n-4^n)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-41">Answer</a>
      </div>
      <div class="box">
        <p>3.42: A two-day math conference has `n` participants. Some of the participants give a talk on Saturday, some others give a talk on Sunday. Nobody gives more than one talk, and there may be some people who do not give a talk at all. At the end of the conference, a few talks are selected to be included in a book. In how many different ways is this all possible if there is at least one talk selected for inclusion in the book?</p>
        <div class="collapse" id="q3-42">
          <p>Count the number of ways for people to give talks without any of them being included in the book and subtract from the total number of ways for people to give talks</p>
          <p>Total number of ways for people to give talks:</p>
          <p>There are five situations for each person:</p>
          <ul>
            <li>don't give a talk at all</li>
            <li>give a talk on Saturday</li>
            <li>give a talk on Sunday</li>
            <li>be included in the book as a Saturday speaker</li>
            <li>be included in the book as a Sunday speaker</li>
          </ul>
          <p>`5^n` ways</p>
          <p>For the case where no talk is selected to be in the book, there are three situations for each person:</p>
          <ul>
            <li>don't give a talk at all</li>
            <li>give a talk on Saturday</li>
            <li>give a talk on Sunday</li>
          </ul>
          <p>`3^n` ways</p>
          <p>`color(red)(5^n-3^n)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-42">Answer</a>
      </div>
      <div class="box">
        <p>3.43: A group organizing a faculty-student tennis match must match four faculty volunteers to four of the `13` students who volunteered to be in the match. In how many ways can they do this?</p>
        <div class="collapse" id="q3-43">
          <p>The first faculty volunteer has `13` students from which to choose</p>
          <p>The second faculty volunteer has `12` students from which to choose</p>
          <p>The third faculty volunteer has `11` students from which to choose</p>
          <p>The fourth faculty volunteer has `10` students from which to choose</p>
          <p>`color(red)(13*12*11*10)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-43">Answer</a>
      </div>
      <div class="box">
        <p>3.45: A student will study `26` hours in preparation for an exam. She will do this in the course of six consecutive days. On each of these days, she will study either four hours, five hours, or six hours. In how many different ways is this possible?</p>
        <div class="collapse" id="q3-45">
          <p>Let `a` be the number of days she studies for four hours</p>
          <p>Let `b` be the number of days she studies for five hours</p>
          <p>Let `c` be the number of days she studies for six hours</p>
          <p>Considering the conditions, we get the system of equations</p>
          <div class="math">
            <p>`a+b+c = 6`</p>
            <p>`4a+5b+6c = 26`</p>
          </div>
          <p>`implies b + 2c = 2`</p>
          <p>So `b = 2, c = 0, a = 4` (five hours for `2` days and four hours for `4` days)</p>
          <p>or</p>
          <p>`b = 0, c = 1, a = 5` (six hours for `1` day and four hours for `5` days)</p>
          <p>For the case where she studies for four hours for `4` days and five hours for `2` days:</p>
          <ul>
            <li>There are `6` days to choose from and `4` of them could be for the four hours</li>
            <li>`((6),(4)) = 15`</li>
            <li>Alternatively, there are `6` days to choose from and `2` of them could be for the five hours</li>
            <li>`((6),(2)) = 15`</li>
          </ul>
          <p>For the case where she studies for four hours for `5` days and six hours for `1` day:</p>
          <ul>
            <li>There are `6` days to choose from and `5` of them could be for the four hours</li>
            <li>`((6),(5)) = 6`</li>
            <li>Alternatively, there are `6` days to choose from and `1` of them could be for the six hours</li>
            <li>`((6),(1)) = 6`</li>
          </ul>
          <p>`color(red)(15+6 = 21)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-45">Answer</a>
      </div>
      <div class="box">
        <p>3.46: Andy and Brenda throw four dice at the same time. If at least one of the four dice shows a six, then Andy wins, if not then Brenda. Who has a greater chance of winning?</p>
        <div class="collapse" id="q3-46">
          <p>Calculate Brenda's chance of winning by counting the number of possibilities where none of the dice show a six</p>
          <p>Total number of possibilities:</p>
          <ul>
            <li>Each die has `6` possible outcomes `implies 6^4`</li>
          </ul>
          <p>None of them show a six:</p>
          <ul>
            <li>Each die has `5` possible outcomes `implies 5^4`</li>
          </ul>
          <p>Brenda has a `(5^4)/(6^4) = 625/1296` chance of winning</p>
          <p>Andy has a `671/1296` chance of winning</p>
          <p>`color(red)(text(Andy))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-46">Answer</a>
      </div>
      <div class="box">
        <p>3.49: A class is attended by `n` sophomores, `n` juniors, and `n` seniors. In how many ways can these students form `n` groups of three people each if each group is to contain a sophomore, a junior, and a senior?</p>
        <div class="collapse" id="q3-49">
          <p>For the first sophomore, there are `n` choices of juniors and `n` choices of seniors</p>
          <p>For the second sophomore, there are `n-1` choices of juniors and `n-1` choices of seniors</p>
          <p>For the third sophomore, there are `n-2` choices of juniors and `n-2` choices of seniors</p>
          <p>`vdots`</p>
          <p>For the last sophomore, there is `1` choice for the junior and `1` choice for the senior</p>
          <p>`color(red)(n!*n!)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-49">Answer</a>
      </div>
      <div class="box">
        <p>3.50: The NFL consists of `32` teams. These teams are first divided into two conferences, the American Conference and the National Conference, each of which consists of sixteen teams. Then each conference is divided into four divisions of four teams each. Each division has a distinct name. In how many ways can this be done?</p>
        <div class="collapse" id="q3-50">
          <p>There are a total of `8` divisions</p>
          <p>There are `((32),(4))` choices for the first division</p>
          <p>There are `((28),(4))` choices for the second division</p>
          <p>There are `((24),(4))` choices for the third division</p>
          <p>`vdots`</p>
          <p>There are `((8),(4))` choices for the seventh division</p>
          <p>There are `((4),(4))` choices for the eighth division</p>
          <p>`color(red)(((32),(4))*((28),(4))*((24),(4))*...*((8),(4))*((4),(4)))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q3-50">Answer</a>
      </div>
      <h3>Chapter 5</h3>
      <div class="box">
        <p>5.19: What is the number of partitions of `[8]` into two blocks in which the two blocks do not have the same size?</p>
        <div class="collapse" id="q5-19">
          <p>There are `3` situations where the two blocks do not have the same size:</p>
          <ul>
            <li>size `1` and size `7`: `((8),(1)) = ((8),(7))` ways to do this</li>
            <li>size `2` and size `6`: `((8),(2)) = ((8),(6))` ways to do this</li>
            <li>size `3` and size `5`: `((8),(3)) = ((8),(5))` ways to to this</li>
          </ul>
          <p>`color(red)(((8),(1))+((8),(2))+((8),(3)))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q5-19">Answer</a>
      </div>
      <div class="box">
        <p>5.20: What is the number of compositions of `5` with a unique largest part?</p>
        <div class="collapse" id="q5-20">
          <p>There are five types of compositions of `5` with a unique largest part:</p>
          <ul>
            <li>`(1,1,1,2)`: `4` permutations</li>
            <li>`(1,1,3)`: `3` permutations</li>
            <li>`(1,4)`: `2` permutations</li>
            <li>`(2,3)`: `2` permutations</li>
            <li>`(5)`: `1` permutation</li>
          </ul>
          <p>`color(red)(1+2+2+3+4 = 12)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q5-20">Answer</a>
      </div>
      <div class="box">
        <p>5.22: A student has to take twelve hours of classes a week. She must take at least three hours on Monday, at least two on Thursday, and at least one on Friday. In how many ways can she do this?</p>
        <div class="collapse" id="q5-22">
          <p>Let `a,b,c,d,e` be the number of hours she takes on Monday, Tuesday, Wednesday, Thursday, and Friday respectively</p>
          <div class="math">
            <p>`a+3 + b + c + d+2 + e+1 = 12`</p>
            <p>`a+b+c+d+e = 6`</p>
          </div>
          <p>This is a weak composition of `6` into `5` parts</p>
          <p>`color(red)(((10),(6)))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q5-22">Answer</a>
      </div>
      <div class="box">
        <p>5.23: Find the number of compositions of ten into even parts</p>
        <div class="collapse" id="q5-23">
          <div class="math">
            <p>`2x_1 + 2x_2 + ... + 2x_n = 10`</p>
            <p>`2(x_1 + x_2 + ... + x_n) = 10`</p>
            <p>`x_1 + x_2 + ... + x_n = 5`</p>
          </div>
          <p>This is the same problem as the number of compositions of `5` into integer parts</p>
          <p>`color(red)(2^(5-1) = 2^4 = 16)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q5-23">Answer</a>
      </div>
      <div class="box">
        <p>5.24: Find the number of weak compositions of `25` into five odd parts</p>
        <div class="collapse" id="q5-24">
          <p>`x_1 + x_2 + x_3 + x_4 + x_5 = 25` where `x_1, ..., x_5` are odd integers</p>
          <p>Let `x_i = 2y_i+1`</p>
          <div class="math">
            <p>`2y_1+1 + 2y_2+1 + 2y_3+1 + 2y_4+1 + 2y_5+1 = 25`</p>
            <p>`2(y_1 + y_2 + y_3 + y_4 + y_5) = 20`</p>
            <p>`y_1 + y_2 + y_3 + y_4 + y_5 = 10`</p>
          </div>
          <p>This is a weak composition of `10` into `5` parts</p>
          <p>`color(red)(((14),(10)))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q5-24">Answer</a>
      </div>
      <div class="box">
        <p>5.25: A student has to take eight hours of classes a week. He wants to have fewer hours on Friday than on Thursday. In how many ways can he do this?</p>
        <div class="collapse" id="q5-25">
          <p>Let `a,b,c,d,e` be the number of hours he takes on Monday, Tuesday, Wednesday, Thursday, and Friday respectively</p>
          <p>`a+b+c+d+e = 8` where `d gt e`</p>
          <p>He could take `0, 1, 2, 3` hours on Friday</p>
          <p>Since he wants fewer hours on Friday than on Thursday, we add `e+1` hours to `d` to maintain the rule `d gt e` and to turn the problem into a weak composition problem</p>
          <div class="math">
            <p>`e=0: a+b+c+(d+1)+0=8 implies a+b+c+d=7 implies ((10),(7))`</p>
            <p>`e=1: a+b+c+(d+2)+1=8 implies a+b+c+d=5 implies ((8),(5))`</p>
            <p>`e=2: a+b+c+(d+3)+2=8 implies a+b+c+d=3 implies ((6),(3))`</p>
            <p>`e=3: a+b+c+(d+4)+3=8 implies a+b+c+d=1 implies ((4),(1))`</p>
          </div>
          <p>`color(red)(((10),(7))+((8),(5))+((6),(3))+((4),(1)))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q5-25">Answer</a>
      </div>
      <div class="box">
        <p>5.27: Find a closed formula for `S(n,n-2)` for all `n ge 3`</p>
        <div class="collapse" id="q5-27">
          <p>There are only two ways to have `n-2` blocks:</p>
          <ul>
            <li>one block of size `3` and `n-3` singletons: `((n),(3))`</li>
            <li>two blocks of size `2` and `n-4` singletons: `((n),(4))*((4),(2))*1/2` (choose four numbers to be in the two blocks, then choose two of those four numbers to be in one of the blocks, the order of the blocks don't matter)</li>
          </ul>
          <p>`color(red)(((n),(3))+((n),(4))*((4),(2))*1/2)`</p>
          <p>Alternatively, for the two blocks of size `2`, we could choose two numbers  to be in one block, then choose another two to be in the other block: `((n),(2))*((n-2),(2))*1/2`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q5-27">Answer</a>
      </div>
      <div class="box">
        <p>5.28: Find a closed formula for `S(n,n-3)` for all `n ge 4`</p>
        <div class="collapse" id="q5-28">
          <p>There are only `3` ways to have `n-3` blocks:</p>
          <ul>
            <li>one block of size `4` and `n-4` singletons: `((n),(4))`</li>
            <li>one block of size `3`, one block of size `2` and `n-5` singletons: `((n),(5))*((5),(3))` (choose `5` to be in the two blocks, then choose `3` to be in the block of size `3`)</li>
            <li>three blocks of size `2` and `n-6` singletons: `((n),(2))*((n-2),(2))*((n-4),(2))*1/(3!)`</li>
          </ul>
          <p>`color(red)(((n),(4))+((n),(5))*((5),(3))+((n),(2))*((n-2),(2))*((n-4),(2))*1/(3!))`</p>
          <p>Alternatively, for the one block of size `3`, we could do `((n),(3))*((n-3),(2))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q5-28">Answer</a>
      </div>
      <div class="box">
        <p>5.32: Let `F(n)` be the number of all partitions of `[n]` with no singleton blocks. Prove that `B(n) = F(n) + F(n+1)`</p>
        <div class="collapse" id="q5-32">
          <p>`B(n)-F(n)` is the number of partitions of `[n]` where each partition has at least one singleton</p>
          <p>Goal: Prove `B(n)-F(n) = F(n+1)`</p>
          <p>Claim: There is a bijection between `A = {`partitions of `[n]` such that there is at least one singleton`}` and `B = {`partitions of `[n+1]` such that every block has size `gt 1}`</p>
          <p>Let `f:A rarr B` be defined as follows:</p>
          <p>For a partition in `A`, add the singleton `{n+1}` and merge together all the singleton blocks into one block</p>
          <p>This produces an element in `B` because there are no singleton blocks, i.e., every block has size `gt 1`</p>
          <p>Let `g:B rarr A` be defined as follows:</p>
          <p>For a partition in `B`, break up the block containing `n+1` into singletons and remove the singleton `{n+1}`</p>
          <p>This produces an element in `A` because there are now singleton blocks, i.e., there is at least one block with size `1`</p>
          <p>So `g` is the inverse of `f`</p>
          <p>`implies f` is a bijection</p>
          <p>`implies |A| = |B|`</p>
          <p>`implies B(n)-F(n) = F(n+1)`</p>
          <p>`implies B(n) = F(n) + F(n+1)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q5-32">Answer</a>
      </div>
      <h3>Chapter 4</h3>
      <div class="box">
        <p>4.3: Prove that `2^(n-2)*n*(n-1) = sum_(k=2)^n k(k-1)((n),(k))` for all integers `n ge 2`</p>
        <div class="collapse" id="q4-3">
          <p>Start with the binomial theorem</p>
          <div class="math">
            <p>`(x+y)^n = sum_(k=2)^n((n),(k))x^ky^(n-k)`</p>
          </div>
          <p>Take the derivative (with respect to `x`) of both sides twice</p>
          <div class="math">
            <p>`n*(x+y)^(n-1) = sum_(k=2)^n((n),(k))kx^(k-1)y^(n-k)`</p>
            <p>`n*(n-1)*(x+y)^(n-2) = sum_(k=2)^n((n),(k))k(k-1)x^(k-2)y^(n-k)`</p>
          </div>
          <p>Plug in `x=y=1`</p>
          <div class="math">
            <p>`n*(n-1)*2^(n-2) = sum_(k=2)^n((n),(k))k(k-1)`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q4-3">Answer</a>
      </div>
      <div class="box">
        <p>4.4: Let `k,m,n` be nonnegative integers integers such that `k+m le n`. Prove that `((n),(m))*((n-m),(k)) = ((n),(k))((n-k),(m))`</p>
        <div class="collapse" id="q4-4">
          <p>The left-hand side is counting the number of ways to</p>
          <ol>
            <li>Pick `m` people to form a soccer team from a group of `n` people</li>
            <li>Then pick `k` people from the remaining people (`n-m`) to form a basketball team</li>
          </ol>
          <p>The right-hand side is counting the number of ways to</p>
          <ol>
            <li>Pick `k` people to form a basketball team from a group of `n` people</li>
            <li>Then pick `m` people from the remaining people (`n-k`) to form a soccer team</li>
          </ol>
          <p>Both are counting the number of ways to form an `m`-member soccer team and a `k`-member basketball team</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q4-4">Answer</a>
      </div>
      <div class="box">
        <p>4.8: Prove that for all positive integers `n`, the inequality `((2n),(n)) lt 4^n` holds</p>
        <div class="collapse" id="q4-8">
          <p>`((2n),(n))` is the number of `n`-element subsets of `[2n]`</p>
          <p>`4^n = 2^(2n)` is the number of all subsets of `[2n]`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q4-8">Answer</a>
      </div>
      <div class="box">
        <p>4.9: How many subsets of `[n]` are larger than their complements?</p>
        <div class="collapse" id="q4-9">
          <p>Pair each subset with its complement</p>
          <p>If `n` is odd:</p>
          <ul>
            <li>The two subsets in each pair will be different sizes, so there will be a larger subset in each pair</li>
            <li>There are `2^(n-1)` unique pairs, so there are `color(red)(2^(n-1))` subsets larger than their complement</li>
          </ul>
          <p>If `n` is even, then let `n = 2k`</p>
          <p>`sum_(i=0)^(k-1)((n),(i))` counts the number of subsets that are larger than their complements</p>
          <p>To get that summation, we could split the subsets of `[n]` into three groups:</p>
          <ul>
            <li>Subsets with size `0 le i le k-1`: `sum_(i=0)^(k-1)((n),(i))=((n),(1))+((n),(2))+...+((n),(k-1))`</li>
            <li>Subsets with size `k=n/2`: `((n),(k))=((n),(n/2))`</p>
            <li>Subsets with size `k+1 le i le n`: this is the "reverse" of `0 le i le k-1`, so it is also counted by `sum_(i=0)^(k-1)((n),(i))`</p>
          </ul>
          <p>So we have</p>
          <div class="math">
            <p>`2^n = ((n),(n/2))+2sum_(i=0)^(k-1)((n),(i))`</p>
            <p>`2sum_(i=0)^(k-1)((n),(i)) = 2^n-((n),(n/2))`</p>
            <p>`sum_(i=0)^(k-1)((n),(i)) = (2^n-((n),(n/2)))/2`</p>
            <p>`sum_(i=0)^(k-1)((n),(i)) = color(red)(2^(n-1)-1/2((n),(n/2)))`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q4-9">Answer</a>
      </div>
      <div class="box">
        <p>4.17: Prove that `sum_(a_1+a_2+a_3=n)((n),((a_1,a_2,a_3)))=3^n`</p>
        <div class="collapse" id="q4-17">
          <p>Start with the multinomial theorem</p>
          <div class="math">
            <p>`sum_(a_1+a_2+a_3=n)((n),((a_1,a_2,a_3)))x_1^(a_1)x_2^(a_2)x_3^(a_3) = (x_1+x_2+x_3)^n`</p>
          </div>
          <p>Plug in `x_1=x_2=x_3=1`</p>
          <div class="math">
            <p>`sum_(a_1+a_2+a_3=n)((n),((a_1,a_2,a_3)))=3^n`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q4-17">Answer</a>
      </div>
      <div class="box">
        <p>4.18: Prove that `sum_(a_1+a_2+a_3=n)((n),((a_1,a_2,a_3)))(-1)^(a_2)=1`</p>
        <div class="collapse" id="q4-18">
          <p>Start with the multinomial theorem</p>
          <div class="math">
            <p>`sum_(a_1+a_2+a_3=n)((n),((a_1,a_2,a_3)))x_1^(a_1)x_2^(a_2)x_3^(a_3) = (x_1+x_2+x_3)^n`</p>
          </div>
          <p>Plug in `x_1=x_3=1`, `x_2=-1`</p>
          <div class="math">
            <p>`sum_(a_1+a_2+a_3=n)((n),((a_1,a_2,a_3)))(-1)^n=(1-1+1)^n`</p>
            <p>`sum_(a_1+a_2+a_3=n)((n),((a_1,a_2,a_3)))(-1)^n=1`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q4-18">Answer</a>
      </div>
      <div class="box">
        <p>4.25: Find a closed form for `sum_(n=1)^(oo)nx^(n-1)`</p>
        <div class="collapse" id="q4-25">
          <p>Since there's an `n` dropped down from the exponent, it looks like we have to take the derivative of `sum_(n=0)^(oo)x^n = 1/(1-x)`</p>
          <p>Take out the constant term from `sum_(n=0)^(oo)x^n` in order to take the derivative<p>
          <div class="math">
            <p>`sum_(n=0)^(oo)x^n=1+sum_(n=1)^(oo)x^n = 1/(1-x)`</p>
          </div>
          <p>Taking the derivative, we get</p>
          <div class="math">
            <p>`sum_(n=1)^(oo)nx^(n-1) = color(red)(1/(1-x)^2)`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q4-25">Answer</a>
      </div>
      <div class="box">
        <p>4.26: Prove that `1/sqrt(1-4x) = sum_(n ge 0)((2n),(n))x^n`</p>
        <div class="collapse" id="q4-26">
          <div class="math">
            <p>`1/sqrt(1-4x) = (1-4x)^(-1/2)`</p>
            <p>`= sum_(n ge 0)((-1/2),(n))(-4x)^n`</p>
            <p>`= sum_(n ge 0)((-1/2)(-3/2)(-5/2)...(-2n+1)/2)/(n!)(-1)^n2^(2n)x^n`</p>
            <p>`= sum_(n ge 0)(1*3*5*...*(2n-1))/(n!)2^nx^n`</p>
          </div>
          <p>Now we have to show that `((2n),(n)) = ((2n)!)/(n!n!) = (1*3*5*...*(2n-1))/(n!)2^n`, which is the same as showing `((2n)!)/(n!) = 1*3*5*...*(2n-1)*2^n`</p>
          <p>For `((2n)!)/(n!)`, all the terms on the bottom will divide all the even terms on top in half, resulting in `2^n` and all the odd terms leftover, which is `1*3*5*...*(2n-1)*2^n`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q4-26">Answer</a>
      </div>
      <div class="box">
        <p>4.35: A school has `105` students and seven classes. If each student takes three classes, and each class is taken by the same number of students, how many students are taking each class?</p>
        <div class="collapse" id="q4-35">
          <p>Count the number of pairs `(x,c)` where `x` is a student and `c` is a class</p>
          <p>There are `105*3 = 315` pairs</p>
          <p>Distribute the pairs among `7` groups so that each group has the same number of pairs</p>
          <p>So there are `color(red)(315/7 = 45)` students in each class</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q4-35">Answer</a>
      </div>
      <div class="box">
        <p>4.36: How many northeastern lattice paths are there from `(0,0)` to `(10,10)` that do not touch the point `(5,5)`, but do touch the point `(3,3)`?</p>
        <div class="collapse" id="q4-36">
          <p>Count the paths from `(0,0)` to `(3,3)`:</p>
          <div class="math">
            <p>`((6),(3))`</p>
            <p>(`6` steps total, choose `3` to be right/up)</p>
          </div>
          <p>Count the paths from `(3,3)` to `(10,10)`</p>
          <div class="math">
            <p>`((14),(7))`</p>
          </div>
          <p>Since we can't go through `(5,5)`, count the number of paths going through `(5,5)` and subtract from the total number of paths</p>
          <p>Paths from `(3,3)` to `(5,5)`:</p>
          <div class="math">
            <p>`((4),(2))`</p>
          </div>
          <p>Paths from `(5,5)` to `(10,10)`</p>
          <div class="math">
            <p>`((10),(5))`</p>
          </div>
          <p>Paths from `(3,3)` to `(10,10)` that go through `(5,5)`:</p>
          <div class="math">
            <p>`((4),(2))*((10),(5))`</p>
          </div>
          <p>Paths from `(3,3)` to `(10,10)` that don't go through `(5,5)`:</p>
          <div class="math">
            <p>`((14),(7))-((4),(2))*((10),(5))`</p>
          </div>
          <p>Paths from `(0,0)` to `(10,10)` that don't go through `(5,5)`:</p>
          <div class="math">
            <p>`color(red)(((6),(3))*[((14),(7))-((4),(2))*((10),(5))])`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q4-36">Answer</a>
      </div>
      <div class="box">
        <p>4.38: Prove that `((2n),(n)) = sum_(k=0)^n((n),(k))^2` for all positive integers `n`</p>
        <div class="collapse" id="q4-38">
          <p>Note that `((n),(k))^2 = ((n),(k))*((n),(k)) = ((n),(k))*((n),(n-k))`</p>
          <p>The left-hand side is counting the number of ways to pick `n` people from a group of `2n` people</p>
          <p>We could pick people another way by splitting the `2n` people into two groups of `n` people</p>
          <p>Pick `k` people from the first group: `((n),(k))`</p>
          <p>Now we have to pick `n-k` people from the second group: `((n),(n-k))`</p>
          <p>Summing over all `k`, we get the result</p>
          <div class="math">
            <p>`((2n),(n)) = sum_(k=0)^n((n),(k))*((n),(n-k))`</p>
            <p>`((2n),(n)) = sum_(k=0)^n((n),(k))*((n),(k))`</p>
            <p>`((2n),(n)) = sum_(k=0)^n((n),(k))^2`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q4-38">Answer</a>
      </div>
      <div class="box">
        <p>4.39: Prove that `n((2n-1),(n-1)) = sum_(k=1)^nk((n),(k))^2` for all positive integers `n`</p>
        <div class="collapse" id="q4-39">
          <p>Note that `((n),(k))^2 = ((n),(k))*((n),(k)) = ((n),(k))*((n),(n-k))`</p>
          <p>The left-hand side is counting the number of ways to form a group of `n` people with a leader from a group of `2n` people</p>
          <p>First, pick the leader from `n` people, then pick `n-1` people from `2n-1` people to form the group</p>
          <p>We could pick people another way by splitting the `2n` people into two groups of `n` people and picking a leader from the first group</p>
          <p>Pick `k` people from the first group: `((n),(k))`</p>
          <p>Pick a leader from the first group: there are `k` choices</p>
          <p>Now we have to pick `n-k` people from the second group: `((n),(n-k))`</p>
          <p>Summing over all `k`, we get the result</p>
          <div class="math">
            <p>`n((2n-1),(n-1)) = sum_(k=1)^nk((n),(k))*((n),(n-k))`</p>
            <p>`n((2n-1),(n-1)) = sum_(k=1)^nk((n),(k))*((n),(k))`</p>
            <p>`n((2n-1),(n-1)) = sum_(k=1)^nk((n),(k))^2`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q4-39">Answer</a>
      </div>
      <div class="box">
        <p>4.40: Prove that `3^n = sum_(k=0)^n2^k((n),(k))` for all positive integers `n`</p> 
        <div class="collapse" id="q4-40">
          <p>Start with the binomial theorem:</p>
          <div class="math">
            <p>`(x+y)^n = sum_(k=0)^n((n),(k))x^ky^(n-k)`</p>
          </div>
          <p>Plug in `x=2, y=1`:</p>
          <div class="math">
            <p>`(2+1)^n = sum_(k=0)^n((n),(k))2^k1^(n-k)`</p>
            <p>`3^n = sum_(k=0)^n((n),(k))2^k`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q4-40">Answer</a>
      </div>
      <div class="box">
        <p>4.45: Prove that `sum_(k=0)^n((n),(k))2^k = (3^n+(-1)^n)/2` for all positive integers `n` and even `k`</p>
        <div class="collapse" id="q4-45">
          <p>(Refer to the trick for getting rid of even/odd terms of a formal power series in the egf section)</p>
          <p>We can isolate the even terms by adding `sum_(k=0)^n((n),(k))(-2)^k` to `sum_(k=0)^n((n),(k))2^k`</p>
          <div class="math">
            <p>`sum_(k=0)^n((n),(k))2^k = ((n),(0))2^0 + ((n),(1))2^1 + ((n),(2))2^2 + ((n),(3))2^3 + ...`</p>
            <p>`sum_(k=0)^n((n),(k))(-2)^k = ((n),(0))(-2)^0 + ((n),(1))(-2)^1 + ((n),(2))(-2)^2 + ((n),(3))(-2)^3 + ...`</p>
          </div>
          <p>Notice that the terms with odd exponents will cancel out after addition, leaving</p>
          <div class="math">
            <p>`2 + 2((n),(2))2^2 + 2((n),(4))2^4 + ...`</p>
          </div>
          <p>Dividing by `2` will give us</p>
          <div class="math">
            <p>`1 + ((n),(2))2^2 + ((n),(4))2^4 + ...`</p>
            <p>`= sum_(k=0)^n((n),(k))2^k` for even `k`</p>
          </div>
          <p>Using the binomial theorem, we can simplify `sum_(k=0)^n((n),(k))2^k` and `sum_(k=0)^n((n),(k))(-2)^k`</p>
          <div class="math">
            <p>`sum_(k=0)^n((n),(k))2^k = (2+1)^n = 3^n`</p>
            <p>`sum_(k=0)^n((n),(k))(-2)^k = (-2+1)^n = (-1)^n`</p>
          </div>
          <p>Adding those and dividing the sum by `2` gives us</p>
          <div class="math">
            <p>`(3^n+(-1)^n)/2`</p>
          </div>
          <p>which is equal to `sum_(k=0)^n((n),(k))2^k` for even `k` as shown at the beginning</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q4-45">Answer</a>
      </div>
      <div class="box">
        <p>4.46: Prove that `sum_(k=1)^n((n),(k))5^k = (6^n-(-4)^n)/2` for all positive integers `n` and odd `k`</p>
        <div class="collapse" id="q4-46">
          <p>(Refer to the trick for getting rid of even/odd terms of a formal power series in the egf section)</p>
          <p>We can isolate the odd terms by subtracting `sum_(k=0)^n((n),(k))(-5)^k` from `sum_(k=0)^n((n),(k))5^k`</p>
          <div class="math">
            <p>`sum_(k=0)^n((n),(k))5^k = ((n),(0))5^0 + ((n),(1))5^1 + ((n),(2))5^2 + ((n),(3))5^3 + ...`</p>
            <p>`sum_(k=0)^n((n),(k))(-5)^k = ((n),(0))(-5)^0 + ((n),(1))(-5)^1 + ((n),(2))(-5)^2 + ((n),(3))(-5)^3 + ...`</p>
          </div>
          <p>Notice that the terms with even exponents will cancel out after subtraction, leaving</p>
          <div class="math">
            <p>`2((n),(1))5^1 + 2((n),(3))5^3 + ...`</p>
          </div>
          <p>Dividing by `2` will give us</p>
          <div class="math">
            <p>`((n),(2))5^1 + ((n),(3))5^3 + ...`</p>
            <p>`= sum_(k=1)^n((n),(k))5^k` for odd `k`</p>
          </div>
          <p>Using the binomial theorem, we can simplify `sum_(k=0)^n((n),(k))5^k` and `sum_(k=0)^n((n),(k))(-5)^k`</p>
          <div class="math">
            <p>`sum_(k=0)^n((n),(k))5^k = (5+1)^n = 6^n`</p>
            <p>`sum_(k=0)^n((n),(k))(-5)^k = (-5+1)^n = (-4)^n`</p>
          </div>
          <p>Adding those and dividing the sum by `2` gives us</p>
          <div class="math">
            <p>`(6^n+(-4)^n)/2`</p>
          </div>
          <p>which is equal to `sum_(k=0)^n((n),(k))5^k` for odd `k` as shown at the beginning</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q4-46">Answer</a>
      </div>
      <div class="box">
        <p>4.49: What is the coefficient of `x^n` in the power series form of `root(3)(1-2x)`?</p>
        <div class="collapse" id="q4-49">
          <p>`root(3)(1-2x) = (1-2x)^(1/3)`</p>
          <p>Start with the general binomial theorem:</p>
          <div class="math">
            <p>`(1+x)^m = sum_(n ge 0)((m),(n))x^n`</p>
          </div>
          <p>Plug in `x=-2x` and `m=1/3`</p>
          <div class="math">
            <p>`(1-2x)^(1/3) = sum_(n ge 0)((1/3),(n))(-2x)^n`</p>
            <p>`(1-2x)^(1/3) = sum_(n ge 0)((1/3),(n))(-2)^nx^n`</p>
          </div>
          <p>So the coefficient of `x^n` is `color(red)(((1/3),(n))(-2)^n)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q4-49">Answer</a>
      </div>
      <h3>Chapter 8</h3>
      <div class="box">
        <p>8.1: Find an explicit formula for `a_k` if `a_0=0` and `a_(k+1)=a_k+2^k` for `k ge 0`</p>
        <div class="collapse" id="q8-1">
          <div class="math">
            <p>`a_1 = a_0 + 2^0 = 2^0`</p>
            <p>`a_2 = a_1 + 2^1 = 2^0+2^1`</p>
            <p>`a_3 = a_2 + 2^2 = 2^0+2^1+2^2`</p>
            <p>`vdots`</p>
            <p>`a_k = 2^0+2^1+2^2+...+2^(k-1) = sum_(i=0)^(k-1)2^i`</p>
          </div>
          <p>We can think of `sum_(i=0)^(k-1)2^i` as a binary digit with `k` `1`'s</p>
          <div class="math">
            <p>`ubrace(111...111)_k`</p>
          </div>
          <p>Adding `1` to that binary digit results in a `1` followed by `k` `0`'s, which is `2^k`</p>
          <div class="math">
            <p>`1ubrace(000...000)_k`</p>
          </div>
          <p>So `a_k = sum_(i=0)^(k-1)2^i = color(red)(2^k-1)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-1">Answer</a>
      </div>
      <div class="box">
        <p>8.4: A child wants to walk up a stairway. At each step, she moves up either one or two stairs. Let `f(n)` be the number of ways she can reach the `n^(th)` stair. Let `F(x) = sum_(n ge 0)f_nx^n` be the generating function. Express `F(x)` as a rational function</p>
        <div class="collapse" id="q8-4">
          <p>She can reach the `n^(th)` step from either the `(n-1)^(st)` step or the `(n-2)^(nd)` step</p>
          <p>So `f(n) = f(n-1) + f(n-2) implies f(n+2) = f(n+1) + f(n)`</p>
          <p>Let `f(0)=1`</p>
          <p>Multiply the recurrence by `x^(n+2)` and sum over all `n ge 0`</p>
          <div class="math">
            <p>`sum_(n ge 0)f(n+2)x^(n+2) = sum_(n ge 0)f(n+1)x^(n+2) + sum_(n ge 0)f(n)x^(n+2)`</p>
            <p>`F(x)-f(0)-f(1)x = xsum_(n ge 0)f(n+1)x^(n+1) + x^2sum_(n ge 0)f(n)x^n`</p>
            <p>`F(x)-1-x = x(F(x)-f(0)) + x^2F(x)`</p>
            <p>`F(x)-1-x = xF(x)-x+x^2F(x)`</p>
            <p>`F(x)-xF(x)-x^2F(x)=1`</p>
            <p>`F(x)(1-x-x^2)=1`</p>
            <p>`color(red)(F(x)=1/(1-x-x^2))`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-4">Answer</a>
      </div>
      <div class="box">
        <p>8.7: Let `a_n` be the number of ways to pay `n` dollars using ten-dollar bills, five-dollar bills, and one-dollar bills only. Find the ordinary generating function `A(x) = sum_(n ge 0)a_nx^n`</p>
        <div class="collapse" id="q8-7">
          <p>Let `B(x)` be the generating function for the number of ways to pay `n` dollars using only ten-dollar bills</p>
          <p>Let `C(x)` be the generating function for the number of ways to pay `n` dollars using only five-dollar bills</p>
          <p>Let `D(x)` be the generating function for the number of ways to pay `n` dollars using only one-dollar bills</p>
          <p>Then the product `B(x)C(x)D(x)` will be the number of ways to pay `n` dollars using those three types of bills</p>
          <p>For `B(x)`, there are no ways to pay `n` dollars using only ten-dollar bills for `1 le n le 9`, `11 le n le 19`, ..., so</p>
          <div class="math">
            <p>`B(x) = 1+0x+0x^2+...+1x^10+0x^11+...+1x^20+...=1+x^10+x^20+...=1/(1-x^10)`</p>
          </div>
          <p>Similarly for `C(x)` and `D(x)`</p>
          <div class="math">
            <p>`C(x) = 1+x^5+x^10+...=1/(1-x^5)`</p>
            <p>`D(x) = 1+x^1+x^2+...=1/(1-x)`</p>
          </div>
          <p>So `A(x)=B(x)C(x)D(x)=color(red)(1/((1-x^10)(1-x^5)(1-x)))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-7">Answer</a>
      </div>
      <div class="box">
        <p>8.8: Find a simple, closed form for the generating function of the sequence defined by `a_n=n^2`. Hint: `n^2 = 2((n),(2))+n`</p>
        <div class="collapse" id="q8-8">
          <p>Multiply the recurrence by `x^n` and sum over all `n`:</p>
          <div class="math">
            <p>`sum_(n ge 0)a_nx^n = sum_(n ge 0)2((n),(2))x^n + sum_(n ge 0)nx^n`</p>
          </div>
          <p>Simplifying `((n),(2)) = (n*(n-1)*(n-2)!)/(2*(n-2)!) = (n(n-1))/2`, we get</p>
          <div class="math">
            <p>`A(x) = sum_(n ge 2)n(n-1)x^n + sum_(n ge 1)nx^n`</p>
          </div>
          <p>`sum_(n ge 2)n(n-1)x^n` looks like a double derivative and `sum_(n ge 1)nx^n` looks like a derivative</p>
          <div class="math">
            <p>`A(x) = sum_(n ge 0)a_nx^n = 1/(1-x)`</p>
            <p>`A'(x) = sum_(n ge 1)na_nx^(n-1) = 1/(1-x)^2`</p>
            <p>`A''(x) = sum_(n ge 2)a_n(n-1)x^(n-2) = 2/(1-x)^3`</p>
          </div>
          <p>Taking the derivatives and multiplying by `x` and `x^2` gives us</p>
          <div class="math">
            <p>`A(x) = (2x^2)/(1-x)^3 + x/(1-x)^2`</p>
            <p>`= color(red)((x(x+1))/(1-x)^3)`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-8">Answer</a>
      </div>
      <div class="box">
        <p>8.9: Let `f(n)` be the number of subsets of `[n]` in which the distance of any two elements is at least three. Find the generating function of `f(n)`</p>
        <div class="collapse" id="q8-9">
          <p>Consider a subset that satisfies the condition</p>
          <p>If `n` is part of the subset, then `n-1` and `n-2` cannot be in the subset</p>
          <p>So there would be `f(n-3)` ways to make this subset</p>
          <p>If `n` is not part of the subset, then there would be `f(n-1)` ways to make this subset</p>
          <p>So we get the recurrence `f(n) = f(n-3)+f(n-1)` for `n ge 3`</p>
          <p>`f(0) = 1` (just the empty set)</p>
          <p>`f(1) = 2` (the empty set and `{1}`)</p>
          <p>`f(2) = 3` (the empty set, `{1}` and `{2}`)</p>
          <p>Multiply the recurrence by `x^n` and sum over all `n ge 3`</p>
          <div class="math">
            <p>`sum_(n ge 3)f(n)x^n = sum_(n ge 3)f(n-3)x^n + sum_(n ge 3)f(n-1)x^n`</p>
            <p>`F(x)-f(0)-f(1)x-f(2)x^2 = x^3sum_(n ge 3)f(n-3)x^(n-3) + xsum_(n ge 3)f(n-1)x^(n-1)`</p>
            <p>`F(x)-1-2x-3x^2 = x^3F(x) + x(F(x)-f(0)-f(1)x)`</p>
            <p>`F(x)-1-2x-3x^2 = x^3F(x) + xF(x)-x-2x^2`</p>
            <p>`F(x)-x^3F(x)-xF(x) = 1+x+x^2`</p>
            <p>`F(x)(1-x-x^3) = 1+x+x^2`</p>
            <p>`F(x) = (1+x+x^2)/(1-x-x^3)`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-9">Answer</a>
      </div>
      <div class="box">
        <p>8.22: Let `b(n)` be the number of compositions of `n` in which each part is an odd integer. Find a closed formula for `sum_(n ge 0)b(n)x^n`</p>
        <div class="collapse" id="q8-22">
          <p>Since the number of parts is unspecified, this problem involves a composition of generating functions</p>
          <p>This is equivalent to splitting up `[n]` into intervals and covering each interval with a single tile of odd length</p>
          <p>If the length of the interval is even, then there is no way to do this</p>
          <p>If the length of the interval is odd, then there is one way to do this</p>
          <div class="math">
            <p>`a_n = {(1 text( if n odd)),(0 text( if n even)):}`</p>
          </div>
          <p>So `A(x)=x+x^3+x^5+... = x(1+x^2+x^4+...) = x/(1-x^2)`</p>
          <p>So `B(x) = 1/(1-A(x))`</p>
          <div class="math">
            <p>`= 1/(1-x/(1-x^2))`</p>
            <p>`= color(red)((1-x^2)/(1-x^2-x))`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-22">Answer</a>
      </div>
      <div class="box">
        <p>8.23: Find an explicit formula for `a_n` if `a_0=1` and `a_(n+1)=3a_n+2^n` if `n ge 0`</p>
        <div class="collapse" id="q8-23">
          <p>Multiply the recurrence by `x^(n+1)` and sum over all `n ge 0`:</p>
          <div class="math">
            <p>`sum_(n ge 0)a_(n+1)x^(n+1) = sum_(n ge 0)3a_nx^(n+1) + sum_(n ge 0)2^nx^(n+1)`</p>
            <p>`A(x)-a_0 = 3xsum_(n ge 0)a_nx^n + xsum_(n ge 0)(2x)^n`</p>
            <p>`A(x)-1 = 3xA(x)+x/(1-2x)`</p>
            <p>`A(x)-3xA(x) = x/(1-2x)+1`</p>
            <p>`A(x)(1-3x) = (1-x)/(1-2x)`</p>
            <p>`A(x) = (1-x)/((1-2x)(1-3x))`</p>
          </div>
          <p>Using partial fractions, we get</p>
          <div class="math">
            <p>`(1-x)/((1-2x)(1-3x)) = alpha/(1-2x) + beta/(1-3x)`</p>
            <p>`1-x = (1-3x)alpha + (1-2x)beta`</p>
            <p>`1-x = alpha-3alphax + beta-2betax`</p>
            <p>`1-x = (alpha+beta)+(-3alpha-2beta)x`</p>
            <p>`implies alpha=-1, beta=2`</p>
            <p>`implies (1-x)/((1-2x)(1-3x)) = -1/(1-2x) + 2/(1-3x)`</p>
            <p>`= 2sum_(n ge 0)(3x)^n - sum_(n ge 0)(2x)^n`</p>
            <p>`= 2sum_(n ge 0)3^nx^n - sum_(n ge 0)2^nx^n`</p>
          </div>
          <p>So `a_n` is the coefficient of `x^n`, which is `color(red)(2*3^n-2^n)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-23">Answer</a>
      </div>
      <div class="box">
        <p>8.24: Find an explicit formula for `a_n` if `a_0=1,a_1=4` and `a_(n+2)=8a_(n+1)-16a_n` for `n ge 0`</p>
        <div class="collapse" id="q8-24">
          <p>We can use the characteristic polynomial `t^2-c_1t-c_2` where `c_1=8` and `c_2=-16`</p>
          <div class="math">
            <p>`t^2-8t+16=(t-4)(t-4)`</p>
          </div>
          <p>Since the roots are the same there exist `alpha_1,alpha_2` such that `a_n = alpha_1 4^n+alpha_2n4^n`</p>
          <p>Plugging in `n=0,1`:</p>
          <div class="math">
            <p>`a_0 = 1 = alpha_1`</p>
            <p>`a_1 = 4 = 4alpha_1 + 4alpha_2`</p>
            <p>`implies alpha_1 = 1, alpha_2 = 0`</p>
            <p>`implies a_n = color(red)(4^n)`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-24">Answer</a>
      </div>
      <div class="box">
        <p>8.25: A certain kind of insect population multiplies so that at the end of each year, its size is the double of its size a year before, plus `1000` more insects. Assuming that originally we released `50` insects, how many of them will we have at the end of the `n^(th)` year?
        <div class="collapse" id="q8-25">
          <p>The recurrence is `a_(n+1) = 2a_n + 1000` for `n ge 0` and `a_0=50`</p>
          <p>Multiply the recurrence by `x^(n+1)` and sum over `n ge 0`:</p>
          <div class="math">
            <p>`sum_(n ge 0)a_(n+1)x^(n+1) = sum_(n ge 0)2a_nx^(n+1) + sum_(n ge 0)1000x^(n+1)`</p>
            <p>`A(x)-a_0 = 2xsum_(n ge 0)a_nx^n + 1000xsum_(n ge 0)x^n`</p>
            <p>`A(x)-50 = 2xA(x) + (1000x)/(1-x)`</p>
            <p>`A(x)-2xA(x) = (1000x)/(1-x)+50`</p>
            <p>`A(x)(1-2x) = (50+950x)/(1-x)`</p>
            <p>`A(x) = (50+950x)/((1-2x)(1-x))`</p>
          </div>
          <p>Using partial fractions, we get:</p>
          <div class="math">
            <p>`(50+950x)/((1-2x)(1-x)) = alpha/(1-2x)+beta/(1-x)`</p>
            <p>`50+950x = (1-x)alpha + (1-2x)beta`</p>
            <p>`50+950x = alpha-alphax + beta-2betax`</p>
            <p>`50+950x = (alpha+beta) + (-alpha-2beta)x`</p>
            <p>`implies alpha=1050, beta=-1000`</p>
            <p>`implies (50+950x)/((1-2x)(1-x)) = 1050/(1-2x)-1000/(1-x)`</p>
            <p>`= 1050sum_(n ge 0)(2x)^n - 1000sum_(n ge 0)x^n`</p>
            <p>`= 1050sum_(n ge 0)2^nx^n - 1000sum_(n ge 0)x^n`</p>
          </div>
          <p>So `a_n` is the coefficient of `x^n`, which is `color(red)(1050*2^n-1000)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-25">Answer</a>
      </div>
      <div class="box">
        <p>8.27: Find an explicit formula for the numbers `a_n` if `a_(n+1) = (n+1)a_n + 2(n+1)!` if `n ge 0` and `a_0 = 0`</p>
        <div class="collapse" id="q8-27">
          <p>Since there's an `(n+1)!`, we should probably use exponential generating functions</p>
          <p>Let `A(x) = sum_(n ge 0)a_n/(n!)x^n`</p>
          <p>Multiply both sides by `x^(n+1)/((n+1)!)` and sum over `n ge 0`</p>
          <div class="math">
            <p>`sum_(n ge 0)a_(n+1)/((n+1)!)x^(n+1) = sum_(n ge 0)((n+1)a_n)/((n+1)!)x^(n+1) + sum_(n ge 0)(2(n+1)!)/((n+1)!)x^(n+1)`</p>
            <p>`A(x)-a_0 = sum_(n ge 0)a_n/(n!)x^(n+1) + sum_(n ge 0)2x^(n+1)`</p>
            <p>`A(x) = xsum_(n ge 0)a_n/(n!)x^n + 2xsum_(n ge 0)x^n`</p>
            <p>`A(x) = xA(x) = (2x)/(1-x)`</p>
            <p>`A(x)-xA(x) = (2x)/(1-x)`</p>
            <p>`A(x)(1-x) = (2x)/(1-x)`</p>
            <p>`A(x) = (2x)/(1-x)^2`</p>
            <p>`A(x) = 2x(1-x)^(-2)`</p>
            <p>`A(x) = 2xsum_(n ge 0)((n+1),(n))x^n`</p>
            <p>`A(x) = 2sum_(n ge 0)((n+1),(n))x^(n+1)`</p>
            <p>`A(x) = 2sum_(n ge 1)((n),(n-1))x^n`</p>
            <p>`A(x) = 2sum_(n ge 1)(n!)/((n-1)!1!)x^n`</p>
            <p>`A(x) = 2sum_(n ge 1)(n*n!)/(n!)x^n`</p>
            <p>`A(x) = 2sum_(n ge 0)(n*n!)/(n!)x^n`</p>
          </div>
          <p>So `color(red)(a_n = 2n(n!))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-27">Answer</a>
      </div>
      <div class="box">
        <p>8.34: Let `h_0=1`, and let `h_n` be the number of compositions of `n` into parts equal to `2` or `3`. Find a closed formula for `H(x)=sum_(n ge 0)h_nx^n`</p>
        <div class="collapse" id="q8-34">
          <p>Consider removing the `n^(th)` part of the composition</p>
          <p>If it was of size `2`, then there are `h_(n-2)` ways to get a composition of `n`</p>
          <p>If it was of size `3`, then there are `h_(n-3)` ways to get a composition of `n`</p>
          <p>So we get the recurrence `h_n = h_(n-2)+h_(n-3)` for `n ge 3` and `h_0=1, h_1=0, h_2=1`</p>
          <p>Multiply the recurrence by `x^n` and sum over all `n ge 3`:</p>
          <div class="math">
            <p>`sum_(n ge 3)h_nx^n = sum_(n ge 3)h_(n-2)x^n + sum_(n ge 3)h_(n-3)x^n`</p>
            <p>`H(x)-h_0-h_1x-h_2x^2 = x^2sum_(n ge 3)h_(n-2)x^(n-2) + x^3sum_(n ge 3)h_(n-3)x^(n-3)`</p>
            <p>`H(x)-1-x^2 = x^2(H(x)-h_0) + x^3H(x)`</p>
            <p>`H(x)-1-x^2 = x^2H(x)-x^2+x^3H(x)`</p>
            <P>`H(x)-x^2H(x)-x^3H(x) = 1`</p>
            <p>`H(x)(1-x^2-x^3) = 1`</p>
            <p>`H(x) = color(red)(1/(1-x^2-x^3))`</p>
          </div>
          <p>Alternatively, since the number of parts are unspecified, we could compose generating functions</p>
          <p>Let `h_n` be the number of ways to break up `[n]` into consecutive intervals of sizes `2` and `3`</p>
          <p>Let `alpha` be the ways to create a set of size `2` or `3`</p>
          <p>So `a_2=a_3=1` and `a_n = 0` for `n != 2,3`</p>
          <p>So `A(x) = sum_(n ge 0)a_nx^n = x^2+x^3`</p>
          <p>`H(x) = 1/(1-A(x)) = color(red)(1/(1-x^2-x^3))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-34">Answer</a>
      </div>
      <div class="box">
        <p>8.35: Let `H_n` be the number of ways to tile a `1xxn` rectangle with `1xx1` tiles that are red or blue and `1xx2` tiles that are green, yellow, or white. Find a closed formula for `H(x)=sum_(n ge 0)h_nx^n`</p>
        <div class="collapse" id="q8-35">
          <p>Consider removing the `n^(th)` tile</p>
          <p>If it was a `1xx1` tile, then there are `2` ways to create the rectangle</p>
          <p>If it was a `1xx2` tile, then there are `3` ways to create the rectangle</p>
          <p>So we get the recurrence `h_n = 2h_(n-1)+3h_(n-2)` for `n ge 2` and `h_0=1, h_1=2`</p>
          <p>Multiply the recurrence by `x^n` and sum over all `n ge 2`:</p>
          <div class="math">
            <p>`sum_(n ge 2)h_nx^n = sum_(n ge 2)2h_(n-1)x^n + sum_(n ge 2)3h_(n-2)x^n`</p>
            <p>`H(x)-h_0-h_1x = 2xsum_(n ge 2)h_(n-1)x^(n-1) + 3x^2sum_(n ge 2)h_(n-2)x^(n-2)`</p>
            <p>`H(x)-1-2x = 2x(H(x)-h_0) + 3x^2H(x)`</p>
            <p>`H(x)-1-2x = 2xH(x)-2x+3x^2H(x)`</p>
            <p>`H(x)-2xH(x)-3x^2H(x) = 1`</p>
            <p>`H(x)(1-2x-3x^2) = 1`</p>
            <p>`H(x) = color(red)(1/(1-2x-3x^2))`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-35">Answer</a>
      </div>
      <div class="box">
        <p>8.36: Let `h_n` be the number of sequences of length `n` consisting of letters `A` and `B` in which there is no subsequence of two letters `A` in consecutive positions. Find a closed formula for `H(x)=sum_(n ge 0)h_nx^n`</p>
        <div class="collapse" id="q8-36">
          <p>Consider the last letter of the sequence</p>
          <p>If it is a `B`, then there are `h_(n-1)` ways to form this sequence</p>
          <p>If it is an `A`, then there are `h_(n-2)` ways to form this sequence because the second to last letter must be a `B`</p>
          <p>So we get the recurrence `h_n = h_(n-1) + h_(n-2)` where `h_0 = 1` and `h_1 = 2`</p>
          <p>Multiply the recurrence by `x_n` and sum over all `n ge 2`:</p>
          <div class="math">
            <p>`sum_(n ge 2)h_nx^n = sum_(n ge 2)h_(n-1)x^n + sum_(n ge 2)h_(n-2)x^n`</p>
            <p>`H(x)-h_0-h_1x = xsum_(n ge 2)h_(n-1)x^(n-1) + x^2sum_(n ge 2)h_(n-2)x^(n-2)`</p>
            <p>`H(x)-1-2x = x(H(x)-h_0) + x^2H(x)`</p>
            <p>`H(x)-1-2x = xH(x)-x + x^2H(x)`</p>
            <p>`H(x)-xH(x)-x^2H(x) = 1+x`</p>
            <p>`H(x)(1-x-x^2) = 1+x`</p>
            <p>`H(x) = color(red)((1+x)/(1-x-x^2))`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-36">Answer</a>
      </div>
      <div class="box">
        <p>8.39: Let `t_n` be the number of ways to arrange `n` books on two bookshelves so that each shelf receives at least one book. Find a closed formula for `t_n`</p>
        <div class="collapse" id="q8-39">
          <p>We want to split up the books into two nonempty subsets and order the books in each subset</p>
          <p>Let `a_n` be the number of ways to order the books in the first shelf</p>
          <p>Let `b_n` be the number of ways to order the books in the second shelf</p>
          <div class="math">
            <p>`a_n = b_n = {(0\ text(if ) n = 0), (n!\ text(if ) n ge 0):}`</p>
          </div>
          <p>`t_n` is the coefficient of `x^n/(n!)` in the product `A(x)B(x)`</p>
          <div class="math">
            <p>`= (sum_(n ge 0)a_n/(n!)x^n)(sum_(n ge 0)b_n/(n!)x^n)`</p>
            <p>`= (sum_(n ge 1)a_n/(n!)x^n)(sum_(n ge 1)b_n/(n!)x^n)`</p>
            <p>`= (sum_(n ge 1)(n!)/(n!)x^n)(sum_(n ge 1)(n!)/(n!)x^n)`</p>
            <p>`= (sum_(n ge 1)x^n)(sum_(n ge 1)x^n)`</p>
            <p>`= (xsum_(n ge 1)x^(n-1))(xsum_(n ge 1)x^(n-1))`</p>
            <p>`= (xsum_(n ge 0)x^n)(xsum_(n ge 0)x^n)`</p>
            <p>`= (x/(1-x))(x/(1-x))`</p>
            <p>`= x^2(1-x)^(-2)`</p>
            <p>`= x^2sum_(n ge 0)((-2),(n))(-x)^n`</p>
            <p>`= x^2sum_(n ge 0)((n+1),(n))(-1)^n(-1)^nx^n`</p>
            <p>`= x^2sum_(n ge 0)(n+1)x^n`</p>
            <p>`= sum_(n ge 0)(n+1)x^(n+2)`</p>
            <p>`= sum_(n ge 2)(n-1)x^n`</p>
            <p>`= sum_(n ge 2)(n!(n-1))/(n!)x^n`</p>
          </div>
          <p>So `color(red)(t_n = n!(n-1))` for `n ge 2` and `color(red)(t_0 = t_1 = 0)`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-39">Answer</a>
      </div>
      <div class="box">
        <p>8.43: We divide a group of people into subgroups `A`, `B`, and `C`, and ask each subgroup to form a line. We also require that `A` have an odd number of people, and that `B` have an even number of people. How many ways are there to do this?</p>
        <div class="collapse" id="q8-43">
          <p>Let `a_n` be the number of ways to order the people in `A` in a line</p>
          <p>Let `b_n` be the number of ways to order the people in `B` in a line</p>
          <p>Let `c_n` be the number of ways to order the people in `C` in a line</p>
          <div class="math">
            <p>`a_n = {(n! text( if ) n text( odd)),(0 text( if ) n text( even)):}`</p>
            <p>`b_n = {(n! text( if ) n text( even)),(0 text( if ) n text( odd)):}`</p>
            <p>`c_n = n!`</p>
          </div>
          <p>The answer is the coefficient of `x^n/(n!)` in the product `A(x)B(x)C(x)`</p>
          <div class="math">
            <p>`=(sum_(n ge 0)a_n/(n!)x^n)(sum_(n ge 0)c_n/(n!)x^n)(sum_(n ge 0)c_n/(n!)x^n)`</p>
            <p>`=(sum_(n text( odd ))(n!)/(n!)x^n)(sum_(n text( even ))(n!)/(n!)x^n)(sum_(n ge 0)(n!)/(n!)x^n)`</p>
            <p>`=(sum_(n text( odd ))x^n)(sum_(n text( even ))x^n)(sum_(n ge 0)x^n)`</p>
            <p>`=(sum_(n ge 0)x^(2n+1))(sum_(n ge 0)x^(2n))(sum_(n ge 0)x^n)`</p>
            <p>`=(xsum_(n ge 0)x^(2n))(sum_(n ge 0)x^(2n))(sum_(n ge 0)x^n)`</p>
            <p>`=(x/(1-x^2))(1/(1-x^2))(1/(1-x))`</p>
          </div>
          <p>And use partial fraction decomposition to continue</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-43">Answer</a>
      </div>
      <div class="box">
        <p>8.44: We select an odd number of people from a group of `n` people to serve on a committee. Then we select an even number from this committee to serve on a subcommittee. In how many different ways can we do this?</p>
        <div class="collapse" id="q8-44">
          <p>This is the same problem as picking subsets `A sube B sube [n]` such that `A` is even, `B\\A` is odd, and `[n]\\B` can be even or odd</p>
          <p>(We frame the problem this way to set the problem up with disjoint sets whose union is the whole set)</p>
          <p>Let `a_n` be the number of ways for a subset to be even</p>
          <p>Let `b_n` be the number of ways for a subset to be odd</p>
          <p>Let `c_n` be the number of ways for a subset to be of size `n`</p>
          <div class="math">
            <p>`a_n = {(1 text( if ) n text( even)), (0 text( if ) n text( odd)):}`</p>
            <p>`b_n = {(1 text( if ) n text( odd)), (0 text( if ) n text( even)):}`</p>
            <p>`c_n = 1`</p>
          </div>
          <p>The answer is the coefficient of `x^n/(n!)` in the product `A(x)B(x)C(x)`</p>
          <div class="math">
            <p>`= (sum_(n ge 0)a_n/(n!)x^n)(sum_(n ge 0)b_n/(n!)x^n)(sum_(n ge 0)c_n/(n!)x^n)`</p>
            <p>`= (sum_(n text( even))1/(n!)x^n)(sum_(n text( odd))1/(n!)x^n)(sum_(n ge 0)1/(n!)x^n)`</p>
            <p>`= ((e^x+e^(-x))/2)((e^x-e^(-x))/2)(e^x)`</p>
            <p>`= ((e^(2x)-e^(-2x))/4)e^x`</p>
            <p>`= 1/4(e^(3x)-e^(-x))`</p>
            <p>`= 1/4(sum_(n ge 0)1/(n!)(3x)^n - sum_(n ge 0)1/(n!)(-x)^n)`</p>
            <p>`= 1/4(sum_(n ge 0)1/(n!)3^nx^n - sum_(n ge 0)1/(n!)(-1)^nx^n)`</p>
          </div>
          <p>The coefficient of `x^n/(n!)` is `color(red)(1/4(3^n-(-1)^n))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-44">Answer</a>
      </div>
      <div class="box">
        <p>8.45: We have `n` cards. We want to split them into an even number of non-empty subsets, form a line within each subset, then arrange the subsets in a line. In how many different ways can we do this?</p>
        <div class="collapse" id="q8-45">
          <p>Let `a_n` be the number of ways to form a line of cards</p>
          <p>Let `b_n` be the number of ways to form a line of subsets</p>
          <p>Let `c_n` be the answer to the problem</p>
          <div class="math">
            <p>`a_n = {(0 text( if ) n = 0),(n! text( if ) n gt 0):}`</p>
            <p>`b_n = {(0 text( if ) n text ( odd)),(n! text( if ) n text( even)):}`</p>
          </div>
          <p>So the exponential generating functions are</p>
          <div class="math">
            <p>`A(x) = sum_(n ge 0)a_n/(n!)x^n = sum_(n ge 1)x^n = x/(1-x)`</p>
            <p>`B(x) = sum_(n ge 0)b_n/(n!)x^n = sum_(n ge 0)x^2n = 1/(1-x^2)`</p>
          </div>
          <p>The answer is the coefficient of `x^n/(n!)` in the composition `B(A(x))`</p>
          <div class="math">
            <p>`= 1/(1-(x/(1-x))^2)`</p>
            <p>`= (1-x)^2/((1-x)^2-x^2)`</p>
            <p>`= (1-2x+x^2)/(1-2x)`</p>
            <p>`= 1 + x^2/(1-2x)`</p>
            <p>`= 1 + x^2sum_(n ge 0)(-2x)^n`</p>
            <p>`= 1 + x^2sum_(n ge 0)(-2)^nx^n`</p>
            <p>`= 1 + sum_(n ge 0)(-2)^nx^(n+2)`</p>
            <p>`= 1 + sum_(n ge 2)(-2)^(n-2)x^n`</p>
            <p>`= 1 + sum_(n ge 2)n!(-2)^(n-2)x^n/(n!)`</p>
          </div>
          <p>So `c_n = color(red)(n!(-2)^(n-2))` for `n ge 2`</p>
          <p>`c_0` is the constant term, which is `1`</p>
          <p>`c_1` is the linear term, which is `0`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-45">Answer</a>
      </div>
      <div class="box">
        <p>8.49:</p>
        <p>(a) Let `a_1,a_2,...,a_k` be nonnegative integers, and let `a(n)` be the number of compositions of `n` into `k` parts so that the `i^(th)` part is not larger than `a_i`. Find the ordinary generating function `A(x)=sum_(n ge 0)a(n)x^n`
        <p>(b) Let `b(n)` be the number of compositions of `n` into `k+1` parts so that the `i^(th)` part is not larger than `a_i`, and there is no constraint on the last part. Find the ordinary generating function `B(x) = sum_(n ge 0)b(n)x^n`</p>
        <div class="collapse" id="q8-49">
          <p>Since the number of parts is specified, this problem involves multiplying generating functions</p>
          <p>(a) This problem is the same as splitting up `[n]` into `k` consecutive intervals such that the `i^(th)` interval has size `ge 1` and `le a_i`</p>
          <p>So `A(x) = A_1(x)A_2(x)...A_k(x)` where `A_i(x)` encodes the conditions on the `i^(th)` interval</p>
          <p>`A_i(x) = x + x^2 + ... + x^(a_i) = x(1+x+...+x^(a_i-1))`</p>
          <p>So `A(x) = prod_(i=1)^k x(1+x+...+x^(a_i-1)) = color(red)(prod_(i=1)^k x(1-x^(a_i))/(1-x))`</p>
          <p>(b) With the same constraints on `1 le i le k`, we have</p>
          <div class="math">
            <p>`B(x) = A_1(x)A_2(x)...A_k(x)A_(k+1)(x)`</p>
          </div>
          <p>Since there is no constraint for the `(k+1)^(st)` part, we have</p>
          <div class="math">
            <p>`A_(k+1) = x + x^2 + ... = x(1 + x + x^2 + ...) = x1/(1-x)`</p>
          </div>
          <p>So `B(x) = color(red)((xA(x))/(1-x))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q8-49">Answer</a>
      </div>
      <h3>Chapter 7</h3>
      <div class="box">
        <p>7.3: How many positive integers `k le 210` are relatively prime to `210`?</p>
        <div class="collapse" id="q7-3">
          <p>We can count the number of integers that are not relatively prime to `210` and subtract that from `210`</p>
          <p>An integer is not relatively prime to `210` if it is divisible by `2` or `3` or `5` or `7`</p>
          <p>Let `A_2` be the set of integers divisible by `2`</p>
          <p>Let `A_3` be the set of integers divisible by `3`</p>
          <p>Let `A_5` be the set of integers divisible by `5`</p>
          <p>Let `A_7` be the set of integers divisible by `7`</p>
          <p>Then the set of all integers relatively prime to `210` are in the union `A_2 uu A_3 uu A_5 uu A_7`</p>
          <p>By inclusion-exclusion, `|A_2 uu A_3 uu A_5 uu A_7|`</p>
          <div class="math">
            <p>`= |A_2| + |A_3| + |A_5| + |A_7|`</p>
            <p>`- |A_2 nn A_3| - |A_2 nn A_5| - |A_2 nn A_7| - |A_3 nn A_5| - |A_3 nn A_7| - |A_5 nn A_7|`</p>
            <p>`+ |A_2 nn A_3 nn A_5| + |A_2 nn A_3 nn A_7| + |A_2 nn A_5 nn A_7| + |A_3 nn A_5 nn A_7|`</p>
            <p>`- |A_2 nn A_3 nn A_5 nn A_7|`</p>
          </div>
          <p>There are `210/2 = 105` integers divisible by `2`, so `|A_2| = 105`</p>
          <p>There are `210/(2*3) = 35` integers divisible by `2` and `3`, so `|A_2 nn A_3| = 35`</p>
          <p>(A number divisible by `2` and `3` is divisible by `6`)</p>
          <p>There are `210/(2*3*5) = 7` integers divisible by `2` and `3` and `5`, so `|A_2 nn A_3 nn A_5| = 7`</p>
          <p>So the number of integers not relatively prime to `210` is</p>
          <div class="math">
            <p>`105+70+42+30-35-21-15-14-10-6+7+5+3+2-1 = 162`
          </div>
          <p>The number of integers relatively prime to `210` is</p>
          <div class="math">
            <p>`210-162 = color(red)(48)`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q7-3">Answer</a>
      </div>
      <div class="box">
        <p>7.4: Let `m` be a positive integer. Denote by `phi(m)` the number of integers in `[m]` that are relatively prime to `m`. Let `p,q,r` be distinct prime numbers. Compute `phi(pqr)`</p>
        <div class="collapse" id="q7-4">
          <p>We can count the number of integers that are not relatively prime to `pqr` and subtract that from `pqr`</p>
          <p>An integer is not relatively prime to `pqr` if it is divisible by `p` or `q` or `r`</p>
          <p>Let `A_p` be the set of integers divisible by `p`</p>
          <p>Let `A_q` be the set of integers divisible by `q`</p>
          <p>Let `A_r` be the set of integers divisible by `r`</p>
          <p>Then the set of all integers relatively prime to `pqr` are in the union `A_p uu A_q uu A_r`</p>
          <p>By inclusion-exclusion, `|A_p uu A_q uu A_r|`</p>
          <div class="math">
            <p>`= |A_p| + |A_q| + |A_r| - |A_p nn A_q| - |A_p nn A_r| - |A_q nn A_r| + |A_p nn A_q nn A_r|`</p>
            <p>`= qr + pr + pq - r - q - p + 1`</p>
          </div>
          <p>which is the number of integers not relatively prime to `pqr`</p>
          <p>So the number of integers relatively prime to `pqr` is</p>
          <div class="math">
            <p>`color(red)(pqr - qr - pr - pq + r + q + p - 1) = (p-1)(q-1)(r-1)`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q7-4">Answer</a>
      </div>
      <div class="box">
        <p>7.13: Let `p = p_1p_2...p_n` be an `n`-permutation, and assume `n ge 3`. `i` is an excedence of `p` if `p_i gt i`. Compute the number of `n`-permutations whose excedence set contains at least one of `n-2` and `n-1`</p>
        <div class="collapse" id="q7-13">
          <p>Let `A_(n-1)` be the set of `n`-permutations whose excedence set contains only `n-1`</p>
          <p>Let `A_(n-2)` be the set of `n`-permutations whose excedence set contains only `n-2`</p>
          <p>Then the number of `n`-permutations whose excedence set contains at least one of `n-2` and `n-1` is the union `A_(n-1) uu A_(n-2)`</p>
          <p>By inclusion-exclusion, `|A_(n-1) uu A_(n-2)|`</p>
          <div class="math">
            <p>`= |A_(n-1)| + |A_(n-2)| - |A_(n-1) nn A_(n-2)|`</p>
          </div>
          <p>For `n-1` to be an excedence, the number at the `(n-1)^(st)` spot has to be bigger than `n-1`. There is only one number (`n`) bigger than `n-1`, so there is only one choice for `p_(n-1)`. There are `n-1` remaining numbers for the rest of the spots, so `|A_(n-1)| = (n-1)!`</p>
          <p>For `n-2` to be an excedence, the number at the `(n-2)^(nd)` spot has to be bigger than `n-2`. There are two numbers (`n` and `n-1`) bigger than `n-2`, so there are two choices for `p_(n-2)`. There are `n-1` remaining numbers for the rest of the spots, so `|A_(n-2)| = 2(n-1)!`</p>
          <p>For `n-1` and `n-2` to be an excedence, the number at the `(n-1)^(th)` spot has to be bigger than `n-1` and the number at the `(n-2)^(nd)` spot has to be bigger than `n-2`. `p_(n-1)` is forced to be `n`, which forces `p_(n-2)` to be `n-1`. There are `n-2` remaining numbers for the rest of the spots, so `|A_(n-1) nn A_(n-2)| = (n-2)!`</p>
          <p>So the number of `n`-permutations whose excedence set contains at least one of `n-2` and `n-1` is</p>
          <div class="math">
            <p>`(n-1)! + 2(n-1)! - (n-2)!`</p>
            <p>`= color(red)(3(n-1)! - (n-2)!)`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q7-13">Answer</a>
      </div>
      <div class="box">
        <p>7.15: How many partitions of `[n]` contain at least one of the singleton blocks `{1}` and `{n}`?</p>
        <div class="collapse" id="q7-15">
          <p>Let `A_1` be the set of partitions containing the singleton block `{1}`</p>
          <p>Let `A_n` be the set of partitions containing the singleton block `{n}`</p>
          <p>The set of partitions containing at least one of the singleton blocks is the union `A_1 uu A_n`</p>
          <p>By inclusion-exclusion, `|A_1 uu A_n|`</p>
          <div class="math">
            <p>`= |A_1| + |A_n| - |A_1 nn A_n|`</p>
          </div>
          <p>For `A_1`, we put `1` in its own block. Then there are `n-1` numbers to put into blocks, which is counted by `B(n-1)`</p>
          <p>For `A_1 nn A_n`, we put `1` and `n` in their own blocks. Then there `n-2` numbers to put into blocks, which is counted by `B(n-2)`</p>
          <p>So the number of partitions that contain at least one of the singleton blocks `{1}` and `{n}` is</p>
          <div class="math">
            <p>`B(n-1) + B(n-1) - B(n-2)`</p>
            <p>`= color(red)(2B(n-1) - B(n-2))`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q7-15">Answer</a>
      </div>
      <div class="box">
        <p>7.17: How many compositions does `n` have in which neither the first nor the last entry is `1`?</p>
        <div class="collapse" id="q7-17">
          <p>Count the number of compositions that have a `1` in the first entry or a `1` in the last entry and subtract from the total number of compositions</p>
          <p>Let `A_1` be the set of compositions that have a `1` in the first entry</p>
          <p>Let `A_2` be the set of compositions that have a `1` in the last entry</p>
          <p>Then the set of compositions in which the first or last entry is a `1` is the union `A_1 uu A_2`</p>
          <p>By inclusion-exclusion, `|A_1 uu A_2|`</p>
          <div class="math">
            <p>`= |A_1| + |A_2| - |A_1 nn A_2|`</p>
          </div>
          <p>For `A_1`, since there is a `1` in the first entry, the problem turns into compositions of `n-1`, of which there are `2^(n-1-1) = 2^(n-2)`</p>
          <p>For `A_1 nn A_2`, since there is are `1`'s in the first and last entry, the problem turns into compositions of `n-2`, of which there are `2^(n-2-1) = 2^(n-3)`</p>
          <p>So the number of compositions in which the first or last entry is a `1` is</p>
          <div class="math">
            <p>`2^(n-2) + 2^(n-2) - 2^(n-3)`</p>
            <p>`= 2*2^(n-2) - 2^(n-3)`</p>
            <p>`= 2^(n-1) - 2^(n-3)`</p>
          </div>
          <p>The number of compositions in which neither the first nor last entry is `1` is</p>
          <div class="math">
            <p>`2^(n-1) - 2^(n-1) + 2^(n-3)`</p>
            <p>`= color(red)(2^(n-3))`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q7-17">Answer</a>
      </div>
      <div class="box">
        <p>7.20: Let `D(n)` be the number of derangements of a set of size `n`. Give a combinatorial proof of the identity `D(n+1) = n(D(n)+D(n-1))` for `n ge 1`</p>
        <div class="collapse" id="q7-20">
          <p>Consider the set `[n+1]`</p>
          <p>Consider the number `n+1`. There are `n` choices for it</p>
          <p>Suppose `n+1` is mapped to `i`</p>
          <p>If `i` is not mapped to `n+1`, then we are now looking at derangements of a set of size `n`, which is `D(n)`</p>
          <p>If `i` is mapped to `n+1`, then we are now looking at derangements of a set of size `n-1`, which is `D(n-1)`</p>
          <p>So the number of derangements for a set of size `n+1` is `n(D(n)+D(n-1))`</p>
        </div>
        <a class="btn" data-toggle="collapse" href="#q7-20">Answer</a>
      </div>
      <div class="box">
        <p>7.24: How many three-digit positive integers are divisible by at least one of six and seven?</p>
        <div class="collapse" id="q7-24">
          <p>Let `A_6` be the set of integers divisible by six</p>
          <p>Let `A_7` be the set of integers divisible by seven</p>
          <p>Then the set of integers divisible by six or seven is the union `A_6 uu A_7`</p>
          <p>By inclusion-exclusion, `|A_6 uu A_7|`</p>
          <div class="math">
            <p>`= |A_6| + |A_7| - |A_6 nn A_7|`</p>
          </div>
          <p>There are `900/6 = 150` integers divisible by six, so `|A_6| = 150`</p>
          <p>There are `lfloor900/7rfloor = 128` integers divisible by seven, so `|A_7| = 128`</p>
          <p>There are `lfloor900/42rfloor = 21` integers divisible by six and seven, so `|A_6 nn A_7| = 21`</p>
          <p>So the number of integers divisible by at least one of six and seven is</p>
          <div class="math">
            <p>`150 + 128 - 21 = color(red)(257)`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q7-24">Answer</a>
      </div>
      <div class="box">
        <p>7.25: How many two-digit positive integers are relatively prime to both two and three?</p>
        <div class="collapse" id="q7-25">
          <p>Count the number of integers not relatively prime to two or three and subtract from the total number of two-digit positive integers</p>
          <p>Let `A_2` be the set of integers divisible by two</p>
          <p>Let `A_3` be the set of integers divisible by three</p>
          <p>Then the set of integers divisible by two or three is the union `A_2 uu A_3`</p>
          <p>By inclusion-exclusion, `|A_2 uu A_3|`</p>
          <div class="math">
            <p>`= |A_2| + |A_3| - |A_2 nn A_3|`</p>
          </div>
          <p>There are `90/2 = 45` integers divisible by two, so `|A_2| = 45`</p>
          <p>There are `90/3 = 30` integers divisible by three, so `|A_3| = 30`</p>
          <p>There are `90/6 = 15` integers divisible by two and three, so `|A_2 nn A_3| = 15`</p>
          <p>So the number of integers divisible by two or three is</p>
          <div class="math">
            <p>`45 + 30 - 15 = 60`</p>
          </div>
          <p>The number of two-digit positive integers that are relatively prime to both two and three is</p>
          <div class="math">
            <p>`90 - 60 = color(red)(30)`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q7-25">Answer</a>
      </div>
      <div class="box">
        <p>7.26: In how many ways can we list the digits `{1,1,2,2,3,4,5}` so that two identical digits are not in consecutive positions?</p>
        <div class="collapse" id="q7-26">
          <p>Count the number of arrangements that have consecutive `1`'s or consecutive `2`'s and subtract from the total number of arrangements</p>
          <p>Let `A_1` be the set of arrangements that have consecutive `1`'s</p>
          <p>Let `A_2` be the set of arrangements that have consecutive `2`'s</p>
          <p>Then the set of arrangements that have consecutive `1`'s or consecutive `2`'s is the union `A_1 uu A_2`</p>
          <p>By inclusion-exclusion, `|A_1 uu A_2|`</p>
          <div class="math">
            <p>`= |A_1| + |A_2| - |A_1 nn A_2|`</p>
          </div>
          <p>We can combine the two `1`'s into one `1` since they have to go together</p>
          <p>Then there are `(6!)/(2!)` ways to arrange the numbers, so `|A_1| = (6!)/(2!)</p>
          <p>We can also combine the two `2`'s into one `2` since they have to go together</p>
          <p>Then there are `5!` ways to arrange the numbers, so `|A_1 nn A_2| = 5!`</p>
          <p>So the number of arrangements that have consecutive `1`'s or consecutive `2`'s is</p>
          <div class="math">
            <p>`(6!)/(2!) + (6!)/(2!) - 5!`</p>
            <p>`= 2(6!)/(2!) - 5!`</p>
            <p>`= 6! - 5!`</p>
          </div>
          <p>The number of arrangements that don't have consecutive `1`'s and `2`'s is</p>
          <div class="math">
            <p>`color(red)(7! - 6! + 5!)`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q7-26">Answer</a>
      </div>
      <div class="box">
        <p>7.27: How many positive integers are there that are not larger than `1000` and are neither perfect squares nor perfect cubes?</p>
        <div class="collapse" id="q7-27">
          <p>Count the number of integers that are perfect squares or perfect cubes and subtract from the total number of integers</p>
          <p>Let `A_2` be the set of perfect squares</p>
          <p>Let `A_3` be the set of perfect cubes</p>
          <p>Then the set of perfect squares or perfect cubes is the union `|A_2 uu A_3|`</p>
          <p>By inclusion-exclusion, `|A_2 uu A_3|`</p>
          <div class="math">
            <p>`= |A_2| + |A_3| - |A_2 nn A_3|`</p>
          </div>
          <p>There are `lfloorsqrt(1000)rfloor = 31` perfect squares, so `|A_2| = 31`</p>
          <p>There are `root(3)(1000) = 10` perfect cubes, so `|A_3| = 10`</p>
          <p>A perfect square that is also a perfect cube is a number that has the form `(x^2)^3 = x^6`</p>
          <p>There are `lfloorroot(6)(1000)rfloor = 3` numbers that are perfect squares and perfect cubes</p>
          <p>So the number of integers that are perfect squares or perfect cubes is</p>
          <div class="math">
            <p>`31 + 10 - 3 = 38`</p>
          </div>
          <p>The number of integers that are neither perfect squares nor perfect cubes is</p>
          <div class="math">
            <p>`1000 - 38 = color(red)(962)`</p>
          </div>
        </div>
        <a class="btn" data-toggle="collapse" href="#q7-27">Answer</a>
      </div>
    </div>
    <script>
      function showMenu() {
        document.getElementById("dropDownMenu").classList.toggle("show");
      }
      window.onclick = function(event) {
        if (!event.target.matches('.dropbtn')) {
          var dropdowns = document.getElementsByClassName("dropdown-content");
          var i;
          for (i = 0; i < dropdowns.length; i++) {
            var openDropdown = dropdowns[i];
            if (openDropdown.classList.contains('show')) {
              openDropdown.classList.remove('show');
            }
          }
        }
      }
    </script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>
  </body>
</html>

